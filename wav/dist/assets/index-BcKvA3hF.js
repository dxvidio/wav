(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},def=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$1(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=isString(r)?parseStringStyle(r):normalizeStyle(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(isString(e)||isObject(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const r=n.split(propertyDelimiterRE);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$1(e))for(let n=0;n<e.length;n++){const r=normalizeClass(e[n]);r&&(t+=r+" ")}else if(isObject(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const isRef$1=e=>!!(e&&e.__v_isRef===!0),toDisplayString=e=>isString(e)?e:e==null?"":isArray$1(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?isRef$1(e)?toDisplayString(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef$1(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],s)=>(n[stringifySymbol(r,s)+" =>"]=i,n),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>stringifySymbol(n))}:isSymbol(t)?stringifySymbol(t):isObject(t)&&!isArray$1(t)&&!isPlainObject(t)?String(t):t,stringifySymbol=(e,t="")=>{var n;return isSymbol(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=n}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const t=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=t,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)removeSub(t);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,t=!1){if(e.flags|=8,t){e.next=batchedComputed,batchedComputed=e;return}e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let t=batchedComputed;for(batchedComputed=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;batchedSub;){let t=batchedSub;for(batchedSub=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cleanupDeps(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),removeSub(r),removeDep(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===globalVersion)||(e.globalVersion=globalVersion,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!isDirty(e))))return;e.flags|=2;const t=e.dep,n=activeSub,r=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const i=e.fn(e._value);(t.version===0||hasChanged(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{activeSub=n,shouldTrack=r,cleanupDeps(e),e.flags&=-3}}function removeSub(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)removeSub(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function cleanupEffect(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=activeSub;activeSub=void 0;try{t()}finally{activeSub=n}}}let globalVersion=0;class Link{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=r)}return n}trigger(t){this.version++,globalVersion++,this.notify(t)}notify(t){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)addSub(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,t,n){if(shouldTrack&&activeSub){let r=targetMap.get(e);r||targetMap.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Dep),i.map=r,i.key=n),i.track()}}function trigger(e,t,n,r,i,s){const o=targetMap.get(e);if(!o){globalVersion++;return}const a=l=>{l&&l.trigger()};if(startBatch(),t==="clear")o.forEach(a);else{const l=isArray$1(e),u=l&&isIntegerKey(n);if(l&&n==="length"){const c=Number(r);o.forEach((f,m)=>{(m==="length"||m===ARRAY_ITERATE_KEY||!isSymbol(m)&&m>=c)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(ARRAY_ITERATE_KEY)),t){case"add":l?u&&a(o.get("length")):(a(o.get(ITERATE_KEY)),isMap(e)&&a(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":l||(a(o.get(ITERATE_KEY)),isMap(e)&&a(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&a(o.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(e){const t=toRaw(e);return t===e?t:(track(t,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(t=>isArray$1(t)?reactiveReadArray(t):t))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,t){return apply(this,"every",e,t,void 0,arguments)},filter(e,t){return apply(this,"filter",e,t,n=>n.map(toReactive),arguments)},find(e,t){return apply(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,t,n){const r=shallowReadArray(e),i=r[t]();return r!==e&&!isShallow(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const arrayProto=Array.prototype;function apply(e,t,n,r,i,s){const o=shallowReadArray(e),a=o!==e&&!isShallow(e),l=o[t];if(l!==arrayProto[t]){const f=l.apply(e,s);return a?toReactive(f):f}let u=n;o!==e&&(a?u=function(f,m){return n.call(this,toReactive(f),m,e)}:n.length>2&&(u=function(f,m){return n.call(this,f,m,e)}));const c=l.call(o,u,r);return a&&i?i(c):c}function reduce(e,t,n,r){const i=shallowReadArray(e);let s=n;return i!==e&&(isShallow(e)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,e)}):s=function(o,a,l){return n.call(this,o,toReactive(a),l,e)}),i[t](s,...r)}function searchProxy(e,t,n){const r=toRaw(e);track(r,"iterate",ARRAY_ITERATE_KEY);const i=r[t](...n);return(i===-1||i===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),r[t](...n)):i}function noTracking(e,t,n=[]){pauseTracking(),startBatch();const r=toRaw(e)[t].apply(e,n);return endBatch(),resetTracking(),r}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol));function hasOwnProperty(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?shallowReadonlyMap:readonlyMap:s?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=isArray$1(t);if(!i){let l;if(o&&(l=arrayInstrumentations[n]))return l;if(n==="hasOwnProperty")return hasOwnProperty}const a=Reflect.get(t,n,isRef(t)?t:r);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(i||track(t,"get",n),s)?a:isRef(a)?o&&isIntegerKey(n)?a:a.value:isObject(a)?i?readonly(a):reactive(a):a}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,n,r,i){let s=t[n];if(!this._isShallow){const l=isReadonly(s);if(!isShallow(r)&&!isReadonly(r)&&(s=toRaw(s),r=toRaw(r)),!isArray$1(t)&&isRef(s)&&!isRef(r))return l?!1:(s.value=r,!0)}const o=isArray$1(t)&&isIntegerKey(n)?Number(n)<t.length:hasOwn(t,n),a=Reflect.set(t,n,r,isRef(t)?t:i);return t===toRaw(i)&&(o?hasChanged(r,s)&&trigger(t,"set",n,r):trigger(t,"add",n,r)),a}deleteProperty(t,n){const r=hasOwn(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&trigger(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(t,"has",n),r}ownKeys(t){return track(t,"iterate",isArray$1(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,t,n){return function(...r){const i=this.__v_raw,s=toRaw(i),o=isMap(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...r),c=n?toShallow:t?toReadonly:toReactive;return!t&&track(s,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:a?[c(f[0]),c(f[1])]:c(f),done:m}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(e,t){const n={get(i){const s=this.__v_raw,o=toRaw(s),a=toRaw(i);e||(hasChanged(i,a)&&track(o,"get",i),track(o,"get",a));const{has:l}=getProto(o),u=t?toShallow:e?toReadonly:toReactive;if(l.call(o,i))return u(s.get(i));if(l.call(o,a))return u(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&track(toRaw(i),"iterate",ITERATE_KEY),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=toRaw(s),a=toRaw(i);return e||(hasChanged(i,a)&&track(o,"has",i),track(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=toRaw(a),u=t?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",ITERATE_KEY),a.forEach((c,f)=>i.call(s,u(c),u(f),o))}};return extend(n,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(i){!t&&!isShallow(i)&&!isReadonly(i)&&(i=toRaw(i));const s=toRaw(this);return getProto(s).has.call(s,i)||(s.add(i),trigger(s,"add",i,i)),this},set(i,s){!t&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const o=toRaw(this),{has:a,get:l}=getProto(o);let u=a.call(o,i);u||(i=toRaw(i),u=a.call(o,i));const c=l.call(o,i);return o.set(i,s),u?hasChanged(s,c)&&trigger(o,"set",i,s):trigger(o,"add",i,s),this},delete(i){const s=toRaw(this),{has:o,get:a}=getProto(s);let l=o.call(s,i);l||(i=toRaw(i),l=o.call(s,i)),a&&a.call(s,i);const u=s.delete(i);return l&&trigger(s,"delete",i,void 0),u},clear(){const i=toRaw(this),s=i.size!==0,o=i.clear();return s&&trigger(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=createIterableMethod(i,e,t)}),n}function createInstrumentationGetter(e,t){const n=createInstrumentations(e,t);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(hasOwn(n,i)&&i in r?n:r,i,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,n,r,i){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=getTargetType(e);if(s===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,s===2?r:n);return i.set(e,a),a}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!hasOwn(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function isRef(e){return e?e.__v_isRef===!0:!1}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:toRaw(t),this._value=n?t:toReactive(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||isShallow(t)||isReadonly(t);t=r?t:toRaw(t),hasChanged(t,n)&&(this._rawValue=t,this._value=r?t:toReactive(t),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>t==="__v_raw"?e:unref(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return isRef(i)&&!isRef(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const t=this.dep.track();return refreshComputed(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function computed$1(e,t,n=!1){let r,i;return isFunction(e)?r=e:(r=e.get,i=e.set),new ComputedRefImpl(r,i,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,t=!1,n=activeWatcher){if(n){let r=cleanupMap.get(n);r||cleanupMap.set(n,r=[]),r.push(e)}}function watch$1(e,t,n=EMPTY_OBJ){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,u=O=>i?O:isShallow(O)||i===!1||i===0?traverse(O,1):traverse(O);let c,f,m,d,T=!1,_=!1;if(isRef(e)?(f=()=>e.value,T=isShallow(e)):isReactive(e)?(f=()=>u(e),T=!0):isArray$1(e)?(_=!0,T=e.some(O=>isReactive(O)||isShallow(O)),f=()=>e.map(O=>{if(isRef(O))return O.value;if(isReactive(O))return u(O);if(isFunction(O))return l?l(O,2):O()})):isFunction(e)?t?f=l?()=>l(e,2):e:f=()=>{if(m){pauseTracking();try{m()}finally{resetTracking()}}const O=activeWatcher;activeWatcher=c;try{return l?l(e,3,[d]):e(d)}finally{activeWatcher=O}}:f=NOOP,t&&i){const O=f,L=i===!0?1/0:i;f=()=>traverse(O(),L)}const x=getCurrentScope(),v=()=>{c.stop(),x&&x.active&&remove(x.effects,c)};if(s&&t){const O=t;t=(...L)=>{O(...L),v()}}let A=_?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const B=O=>{if(!(!(c.flags&1)||!c.dirty&&!O))if(t){const L=c.run();if(i||T||(_?L.some((U,R)=>hasChanged(U,A[R])):hasChanged(L,A))){m&&m();const U=activeWatcher;activeWatcher=c;try{const R=[L,A===INITIAL_WATCHER_VALUE?void 0:_&&A[0]===INITIAL_WATCHER_VALUE?[]:A,d];A=L,l?l(t,3,R):t(...R)}finally{activeWatcher=U}}}else c.run()};return a&&a(B),c=new ReactiveEffect(f),c.scheduler=o?()=>o(B,!1):B,d=O=>onWatcherCleanup(O,!1,c),m=c.onStop=()=>{const O=cleanupMap.get(c);if(O){if(l)l(O,4);else for(const L of O)L();cleanupMap.delete(c)}},t?r?B(!0):A=c.run():o?o(B.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function traverse(e,t=1/0,n){if(t<=0||!isObject(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,isRef(e))traverse(e.value,t,n);else if(isArray$1(e))for(let r=0;r<e.length;r++)traverse(e[r],t,n);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t,n)});else if(isPlainObject(e)){for(const r in e)traverse(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&traverse(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,r=n&&n.appContext.config.warnHandler,i=getComponentTrace();if(r)callWithErrorHandling(r,n,11,[e+t.map(s=>{var o,a;return(a=(o=s.toString)==null?void 0:o.call(s))!=null?a:JSON.stringify(s)}).join(""),n&&n.proxy,i.map(({vnode:s})=>`at <${formatComponentName(n,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${e}`,...t];i.length&&s.push(`
`,...formatTrace(i)),console.warn(...s)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function formatTrace(e){const t=[];return e.forEach((n,r)=>{t.push(...r===0?[]:[`
`],...formatTraceEntry(n))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,i=` at <${formatComponentName(e.component,e.type,r)}`,s=">"+n;return e.props?[i,...formatProps(e.props),s]:[i+s]}function formatProps(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(r=>{t.push(...formatProp(r,e[r]))}),n.length>3&&t.push(" ..."),t}function formatProp(e,t,n){return isString(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),n?t:[`${e}=`,t])}function callWithErrorHandling(e,t,n,r){try{return r?e(...r):e()}catch(i){handleError(i,t,n)}}function callWithAsyncErrorHandling(e,t,n,r){if(isFunction(e)){const i=callWithErrorHandling(e,t,n,r);return i&&isPromise(i)&&i.catch(s=>{handleError(s,t,n)}),i}if(isArray$1(e)){const i=[];for(let s=0;s<e.length;s++)i.push(callWithAsyncErrorHandling(e[s],t,n,r));return i}}function handleError(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||EMPTY_OBJ;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,l,u)===!1)return}a=a.parent}if(s){pauseTracking(),callWithErrorHandling(s,null,10,[e,l,u]),resetTracking();return}}logError(e,n,i,r,o)}function logError(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex$1(e){let t=flushIndex+1,n=queue.length;for(;t<n;){const r=t+n>>>1,i=queue[r],s=getId(i);s<e||s===e&&i.flags&2?t=r+1:n=r}return t}function queueJob(e){if(!(e.flags&1)){const t=getId(e),n=queue[queue.length-1];!n||!(e.flags&2)&&t>=getId(n)?queue.push(e):queue.splice(findInsertionIndex$1(t),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&e.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,e):e.flags&1||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,t,n=flushIndex+1){for(;n<queue.length;n++){const r=queue[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;queue.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((n,r)=>getId(n)-getId(r));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?e.flags&2?-1:1/0:e.id;function flushJobs(e){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),callWithErrorHandling(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&(t.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(t);let o;try{o=e(...i)}finally{setCurrentRenderingInstance(s),r._d&&setBlockTracking(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function withDirectives(e,t){if(currentRenderingInstance===null)return e;const n=getComponentPublicInstance(currentRenderingInstance),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,a,l=EMPTY_OBJ]=t[i];s&&(isFunction(s)&&(s={mounted:s,updated:s}),s.deep&&traverse(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function invokeDirectiveHook(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(pauseTracking(),callWithAsyncErrorHandling(l,n,8,[e.el,a,e,t]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport;function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?(e.transition=t,setTransitionHooks(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,t){return isFunction(e)?extend({name:e.name},t,{setup:e}):e}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function setRef(e,t,n,r,i=!1){if(isArray$1(e)){e.forEach((T,_)=>setRef(T,t&&(isArray$1(t)?t[_]:t),n,r,i));return}if(isAsyncWrapper(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&setRef(e,t,n,r.component.subTree);return}const s=r.shapeFlag&4?getComponentPublicInstance(r.component):r.el,o=i?null:s,{i:a,r:l}=e,u=t&&t.r,c=a.refs===EMPTY_OBJ?a.refs={}:a.refs,f=a.setupState,m=toRaw(f),d=f===EMPTY_OBJ?()=>!1:T=>hasOwn(m,T);if(u!=null&&u!==l&&(isString(u)?(c[u]=null,d(u)&&(f[u]=null)):isRef(u)&&(u.value=null)),isFunction(l))callWithErrorHandling(l,a,12,[o,c]);else{const T=isString(l),_=isRef(l);if(T||_){const x=()=>{if(e.f){const v=T?d(l)?f[l]:c[l]:l.value;i?isArray$1(v)&&remove(v,s):isArray$1(v)?v.includes(s)||v.push(s):T?(c[l]=[s],d(l)&&(f[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else T?(c[l]=o,d(l)&&(f[l]=o)):_&&(l.value=o,e.k&&(c[e.k]=o))};o?(x.id=-1,queuePostRenderEffect(x,n)):x()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(injectHook(t,r,n),n){let i=n.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(r,t,n,i),i=i.parent}}function injectToKeepAliveRoot(e,t,n,r){const i=injectHook(t,e,r,!0);onUnmounted(()=>{remove(r[t],i)},n)}function injectHook(e,t,n=currentInstance,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{pauseTracking();const a=setCurrentInstance(n),l=callWithAsyncErrorHandling(t,n,e,o);return a(),resetTracking(),l});return r?i.unshift(s):i.push(s),s}}const createHook=e=>(t,n=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...r)=>t(...r),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(e,t,n=!0,r=!1){const i=currentRenderingInstance||currentInstance;if(i){const s=i.type;{const a=getComponentName(s,!1);if(a&&(a===t||a===camelize(t)||a===capitalize(camelize(t))))return s}const o=resolve(i[e]||s[e],t)||resolve(i.appContext[e],t);return!o&&r?s:o}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize(camelize(t))])}function renderList(e,t,n,r){let i;const s=n,o=isArray$1(e);if(o||isString(e)){const a=o&&isReactive(e);let l=!1,u=!1;a&&(l=!isShallow(e),u=isReadonly(e),e=shallowReadArray(e)),i=new Array(e.length);for(let c=0,f=e.length;c<f;c++)i[c]=t(l?u?toReadonly(toReactive(e[c])):toReactive(e[c]):e[c],c,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s)}else if(isObject(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,s));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];i[l]=t(e[c],c,l,s)}}else i=[];return i}const getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(hasSetupBinding(r,t))return o[t]=1,r[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&hasOwn(u,t))return o[t]=3,s[t];if(n!==EMPTY_OBJ&&hasOwn(n,t))return o[t]=4,n[t];shouldCacheAccess&&(o[t]=0)}}const c=publicPropertiesMap[t];let f,m;if(c)return t==="$attrs"&&track(e.attrs,"get",""),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==EMPTY_OBJ&&hasOwn(n,t))return o[t]=4,n[t];if(m=l.config.globalProperties,hasOwn(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return hasSetupBinding(i,t)?(i[t]=n,!0):r!==EMPTY_OBJ&&hasOwn(r,t)?(r[t]=n,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||e!==EMPTY_OBJ&&hasOwn(e,o)||hasSetupBinding(t,o)||(a=s[0])&&hasOwn(a,o)||hasOwn(r,o)||hasOwn(publicPropertiesMap,o)||hasOwn(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:hasOwn(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function normalizePropsOrEmits(e){return isArray$1(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),n=e.proxy,r=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:m,beforeUpdate:d,updated:T,activated:_,deactivated:x,beforeDestroy:v,beforeUnmount:A,destroyed:B,unmounted:O,render:L,renderTracked:U,renderTriggered:R,errorCaptured:M,serverPrefetch:ne,expose:W,inheritAttrs:G,components:re,directives:Y,filters:ce}=t;if(u&&resolveInjections(u,r,null),o)for(const ge in o){const te=o[ge];isFunction(te)&&(r[ge]=te.bind(n))}if(i){const ge=i.call(n,n);isObject(ge)&&(e.data=reactive(ge))}if(shouldCacheAccess=!0,s)for(const ge in s){const te=s[ge],ye=isFunction(te)?te.bind(n,n):isFunction(te.get)?te.get.bind(n,n):NOOP,H=!isFunction(te)&&isFunction(te.set)?te.set.bind(n):NOOP,ee=computed({get:ye,set:H});Object.defineProperty(r,ge,{enumerable:!0,configurable:!0,get:()=>ee.value,set:oe=>ee.value=oe})}if(a)for(const ge in a)createWatcher(a[ge],r,n,ge);if(l){const ge=isFunction(l)?l.call(n):l;Reflect.ownKeys(ge).forEach(te=>{provide(te,ge[te])})}c&&callHook(c,e,"c");function de(ge,te){isArray$1(te)?te.forEach(ye=>ge(ye.bind(n))):te&&ge(te.bind(n))}if(de(onBeforeMount,f),de(onMounted,m),de(onBeforeUpdate,d),de(onUpdated,T),de(onActivated,_),de(onDeactivated,x),de(onErrorCaptured,M),de(onRenderTracked,U),de(onRenderTriggered,R),de(onBeforeUnmount,A),de(onUnmounted,O),de(onServerPrefetch,ne),isArray$1(W))if(W.length){const ge=e.exposed||(e.exposed={});W.forEach(te=>{Object.defineProperty(ge,te,{get:()=>n[te],set:ye=>n[te]=ye})})}else e.exposed||(e.exposed={});L&&e.render===NOOP&&(e.render=L),G!=null&&(e.inheritAttrs=G),re&&(e.components=re),Y&&(e.directives=Y),ne&&markAsyncBoundary(e)}function resolveInjections(e,t,n=NOOP){isArray$1(e)&&(e=normalizeInject(e));for(const r in e){const i=e[r];let s;isObject(i)?"default"in i?s=inject(i.from||r,i.default,!0):s=inject(i.from||r):s=inject(i),isRef(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function callHook(e,t,n){callWithAsyncErrorHandling(isArray$1(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,r){let i=r.includes(".")?createPathGetter(n,r):()=>n[r];if(isString(e)){const s=t[e];isFunction(s)&&watch(i,s)}else if(isFunction(e))watch(i,e.bind(n));else if(isObject(e))if(isArray$1(e))e.forEach(s=>createWatcher(s,t,n,r));else{const s=isFunction(e.handler)?e.handler.bind(n):t[e.handler];isFunction(s)&&watch(i,s,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(u=>mergeOptions$1(l,u,o,!0)),mergeOptions$1(l,t,o)),isObject(t)&&s.set(t,l),l}function mergeOptions$1(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&mergeOptions$1(e,s,n,!0),i&&i.forEach(o=>mergeOptions$1(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=internalOptionMergeStrats[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$1(e)&&isArray$1(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend(Object.create(null),e);for(const r in t)n[r]=mergeAsArray(e[r],t[r]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(r,i=null){isFunction(r)||(r=extend({},r)),i!=null&&!isObject(i)&&(i=null);const s=createAppContext(),o=new WeakSet,a=[];let l=!1;const u=s.app={_uid:uid$1++,_component:r,_props:i,_container:null,_context:s,_instance:null,version,get config(){return s.config},set config(c){},use(c,...f){return o.has(c)||(c&&isFunction(c.install)?(o.add(c),c.install(u,...f)):isFunction(c)&&(o.add(c),c(u,...f))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,f){return f?(s.components[c]=f,u):s.components[c]},directive(c,f){return f?(s.directives[c]=f,u):s.directives[c]},mount(c,f,m){if(!l){const d=u._ceVNode||createVNode(r,i);return d.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(d,c,m),l=!0,u._container=c,c.__vue_app__=u,getComponentPublicInstance(d.component)}},onUnmount(c){a.push(c)},unmount(){l&&(callWithAsyncErrorHandling(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,f){return s.provides[c]=f,u},runWithContext(c){const f=currentApp;currentApp=u;try{return c()}finally{currentApp=f}}};return u}}let currentApp=null;function provide(e,t){if(currentInstance){let n=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===n&&(n=currentInstance.provides=Object.create(r)),n[e]=t}}function inject(e,t,n=!1){const r=currentInstance||currentRenderingInstance;if(r||currentApp){let i=currentApp?currentApp._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&isFunction(t)?t.call(r&&r.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,n,r=!1){const i={},s=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:shallowReactive(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function updateProps(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=toRaw(i),[l]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let m=c[f];if(isEmitListener(e.emitsOptions,m))continue;const d=t[m];if(l)if(hasOwn(s,m))d!==s[m]&&(s[m]=d,u=!0);else{const T=camelize(m);i[T]=resolvePropValue(l,a,T,d,e,!1)}else d!==s[m]&&(s[m]=d,u=!0)}}}else{setFullProps(e,t,i,s)&&(u=!0);let c;for(const f in a)(!t||!hasOwn(t,f)&&((c=hyphenate(f))===f||!hasOwn(t,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=resolvePropValue(l,a,f,void 0,e,!0)):delete i[f]);if(s!==a)for(const f in s)(!t||!hasOwn(t,f))&&(delete s[f],u=!0)}u&&trigger(e.attrs,"set","")}function setFullProps(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(isReservedProp(l))continue;const u=t[l];let c;i&&hasOwn(i,c=camelize(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:isEmitListener(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=toRaw(n),u=a||EMPTY_OBJ;for(let c=0;c<s.length;c++){const f=s[c];n[f]=resolvePropValue(i,l,f,u[f],e,!hasOwn(u,f))}}return o}function resolvePropValue(e,t,n,r,i,s){const o=e[n];if(o!=null){const a=hasOwn(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction(l)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const c=setCurrentInstance(i);r=u[n]=l.call(null,t),c()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===hyphenate(n))&&(r=!0))}return r}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,n=!1){const r=n?mixinPropsCache:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},a=[];let l=!1;if(!isFunction(e)){const c=f=>{l=!0;const[m,d]=normalizePropsOptions(f,t,!0);extend(o,m),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return isObject(e)&&r.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(s))for(let c=0;c<s.length;c++){const f=camelize(s[c]);validatePropName(f)&&(o[f]=EMPTY_OBJ)}else if(s)for(const c in s){const f=camelize(c);if(validatePropName(f)){const m=s[c],d=o[f]=isArray$1(m)||isFunction(m)?{type:m}:extend({},m),T=d.type;let _=!1,x=!0;if(isArray$1(T))for(let v=0;v<T.length;++v){const A=T[v],B=isFunction(A)&&A.name;if(B==="Boolean"){_=!0;break}else B==="String"&&(x=!1)}else _=isFunction(T)&&T.name==="Boolean";d[0]=_,d[1]=x,(_||hasOwn(d,"default"))&&a.push(f)}}const u=[o,a];return isObject(e)&&r.set(e,u),u}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,n)=>{if(t._n)return t;const r=withCtx((...i)=>normalizeSlotValue(t(...i)),n);return r._c=!1,r},normalizeObjectSlots=(e,t,n)=>{const r=e._ctx;for(const i in e){if(isInternalKey(i))continue;const s=e[i];if(isFunction(s))t[i]=normalizeSlot$1(i,s,r);else if(s!=null){const o=normalizeSlotValue(s);t[i]=()=>o}}},normalizeVNodeSlots=(e,t)=>{const n=normalizeSlotValue(t);e.slots.default=()=>n},assignSlots=(e,t,n)=>{for(const r in t)(n||!isInternalKey(r))&&(e[r]=t[r])},initSlots=(e,t,n)=>{const r=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const i=t._;i?(assignSlots(r,t,n),n&&def(r,"_",i,!0)):normalizeObjectSlots(t,r)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=EMPTY_OBJ;if(r.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:assignSlots(i,t,n):(s=!t.$stable,normalizeObjectSlots(t,i)),o=t}else t&&(normalizeVNodeSlots(e,t),o={default:1});if(s)for(const a in i)!isInternalKey(a)&&o[a]==null&&delete i[a]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const n=getGlobalThis();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:m,setScopeId:d=NOOP,insertStaticContent:T}=e,_=(F,I,C,$=null,S=null,g=null,b=void 0,E=null,P=!!I.dynamicChildren)=>{if(F===I)return;F&&!isSameVNodeType(F,I)&&($=Q(F),oe(F,S,g,!0),F=null),I.patchFlag===-2&&(P=!1,I.dynamicChildren=null);const{type:q,ref:z,shapeFlag:J}=I;switch(q){case Text:x(F,I,C,$);break;case Comment:v(F,I,C,$);break;case Static:F==null&&A(I,C,$,b);break;case Fragment:re(F,I,C,$,S,g,b,E,P);break;default:J&1?L(F,I,C,$,S,g,b,E,P):J&6?Y(F,I,C,$,S,g,b,E,P):(J&64||J&128)&&q.process(F,I,C,$,S,g,b,E,P,ie)}z!=null&&S&&setRef(z,F&&F.ref,g,I||F,!I)},x=(F,I,C,$)=>{if(F==null)r(I.el=a(I.children),C,$);else{const S=I.el=F.el;I.children!==F.children&&u(S,I.children)}},v=(F,I,C,$)=>{F==null?r(I.el=l(I.children||""),C,$):I.el=F.el},A=(F,I,C,$)=>{[F.el,F.anchor]=T(F.children,I,C,$,F.el,F.anchor)},B=({el:F,anchor:I},C,$)=>{let S;for(;F&&F!==I;)S=m(F),r(F,C,$),F=S;r(I,C,$)},O=({el:F,anchor:I})=>{let C;for(;F&&F!==I;)C=m(F),i(F),F=C;i(I)},L=(F,I,C,$,S,g,b,E,P)=>{I.type==="svg"?b="svg":I.type==="math"&&(b="mathml"),F==null?U(I,C,$,S,g,b,E,P):ne(F,I,S,g,b,E,P)},U=(F,I,C,$,S,g,b,E)=>{let P,q;const{props:z,shapeFlag:J,transition:le,dirs:ue}=F;if(P=F.el=o(F.type,g,z&&z.is,z),J&8?c(P,F.children):J&16&&M(F.children,P,null,$,S,resolveChildrenNamespace(F,g),b,E),ue&&invokeDirectiveHook(F,null,$,"created"),R(P,F,F.scopeId,b,$),z){for(const k in z)k!=="value"&&!isReservedProp(k)&&s(P,k,null,z[k],g,$);"value"in z&&s(P,"value",null,z.value,g),(q=z.onVnodeBeforeMount)&&invokeVNodeHook(q,$,F)}ue&&invokeDirectiveHook(F,null,$,"beforeMount");const Te=needTransition(S,le);Te&&le.beforeEnter(P),r(P,I,C),((q=z&&z.onVnodeMounted)||Te||ue)&&queuePostRenderEffect(()=>{q&&invokeVNodeHook(q,$,F),Te&&le.enter(P),ue&&invokeDirectiveHook(F,null,$,"mounted")},S)},R=(F,I,C,$,S)=>{if(C&&d(F,C),$)for(let g=0;g<$.length;g++)d(F,$[g]);if(S){let g=S.subTree;if(I===g||isSuspense(g.type)&&(g.ssContent===I||g.ssFallback===I)){const b=S.vnode;R(F,b,b.scopeId,b.slotScopeIds,S.parent)}}},M=(F,I,C,$,S,g,b,E,P=0)=>{for(let q=P;q<F.length;q++){const z=F[q]=E?cloneIfMounted(F[q]):normalizeVNode(F[q]);_(null,z,I,C,$,S,g,b,E)}},ne=(F,I,C,$,S,g,b)=>{const E=I.el=F.el;let{patchFlag:P,dynamicChildren:q,dirs:z}=I;P|=F.patchFlag&16;const J=F.props||EMPTY_OBJ,le=I.props||EMPTY_OBJ;let ue;if(C&&toggleRecurse(C,!1),(ue=le.onVnodeBeforeUpdate)&&invokeVNodeHook(ue,C,I,F),z&&invokeDirectiveHook(I,F,C,"beforeUpdate"),C&&toggleRecurse(C,!0),(J.innerHTML&&le.innerHTML==null||J.textContent&&le.textContent==null)&&c(E,""),q?W(F.dynamicChildren,q,E,C,$,resolveChildrenNamespace(I,S),g):b||te(F,I,E,null,C,$,resolveChildrenNamespace(I,S),g,!1),P>0){if(P&16)G(E,J,le,C,S);else if(P&2&&J.class!==le.class&&s(E,"class",null,le.class,S),P&4&&s(E,"style",J.style,le.style,S),P&8){const Te=I.dynamicProps;for(let k=0;k<Te.length;k++){const y=Te[k],w=J[y],D=le[y];(D!==w||y==="value")&&s(E,y,w,D,S,C)}}P&1&&F.children!==I.children&&c(E,I.children)}else!b&&q==null&&G(E,J,le,C,S);((ue=le.onVnodeUpdated)||z)&&queuePostRenderEffect(()=>{ue&&invokeVNodeHook(ue,C,I,F),z&&invokeDirectiveHook(I,F,C,"updated")},$)},W=(F,I,C,$,S,g,b)=>{for(let E=0;E<I.length;E++){const P=F[E],q=I[E],z=P.el&&(P.type===Fragment||!isSameVNodeType(P,q)||P.shapeFlag&198)?f(P.el):C;_(P,q,z,null,$,S,g,b,!0)}},G=(F,I,C,$,S)=>{if(I!==C){if(I!==EMPTY_OBJ)for(const g in I)!isReservedProp(g)&&!(g in C)&&s(F,g,I[g],null,S,$);for(const g in C){if(isReservedProp(g))continue;const b=C[g],E=I[g];b!==E&&g!=="value"&&s(F,g,E,b,S,$)}"value"in C&&s(F,"value",I.value,C.value,S)}},re=(F,I,C,$,S,g,b,E,P)=>{const q=I.el=F?F.el:a(""),z=I.anchor=F?F.anchor:a("");let{patchFlag:J,dynamicChildren:le,slotScopeIds:ue}=I;ue&&(E=E?E.concat(ue):ue),F==null?(r(q,C,$),r(z,C,$),M(I.children||[],C,z,S,g,b,E,P)):J>0&&J&64&&le&&F.dynamicChildren?(W(F.dynamicChildren,le,C,S,g,b,E),(I.key!=null||S&&I===S.subTree)&&traverseStaticChildren(F,I,!0)):te(F,I,C,z,S,g,b,E,P)},Y=(F,I,C,$,S,g,b,E,P)=>{I.slotScopeIds=E,F==null?I.shapeFlag&512?S.ctx.activate(I,C,$,b,P):ce(I,C,$,S,g,b,P):me(F,I,P)},ce=(F,I,C,$,S,g,b)=>{const E=F.component=createComponentInstance(F,$,S);if(isKeepAlive(F)&&(E.ctx.renderer=ie),setupComponent(E,!1,b),E.asyncDep){if(S&&S.registerDep(E,de,b),!F.el){const P=E.subTree=createVNode(Comment);v(null,P,I,C)}}else de(E,F,I,C,S,g,b)},me=(F,I,C)=>{const $=I.component=F.component;if(shouldUpdateComponent(F,I,C))if($.asyncDep&&!$.asyncResolved){ge($,I,C);return}else $.next=I,$.update();else I.el=F.el,$.vnode=I},de=(F,I,C,$,S,g,b)=>{const E=()=>{if(F.isMounted){let{next:J,bu:le,u:ue,parent:Te,vnode:k}=F;{const Z=locateNonHydratedAsyncRoot(F);if(Z){J&&(J.el=k.el,ge(F,J,b)),Z.asyncDep.then(()=>{F.isUnmounted||E()});return}}let y=J,w;toggleRecurse(F,!1),J?(J.el=k.el,ge(F,J,b)):J=k,le&&invokeArrayFns(le),(w=J.props&&J.props.onVnodeBeforeUpdate)&&invokeVNodeHook(w,Te,J,k),toggleRecurse(F,!0);const D=renderComponentRoot(F),V=F.subTree;F.subTree=D,_(V,D,f(V.el),Q(V),F,S,g),J.el=D.el,y===null&&updateHOCHostEl(F,D.el),ue&&queuePostRenderEffect(ue,S),(w=J.props&&J.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(w,Te,J,k),S)}else{let J;const{el:le,props:ue}=I,{bm:Te,m:k,parent:y,root:w,type:D}=F,V=isAsyncWrapper(I);toggleRecurse(F,!1),Te&&invokeArrayFns(Te),!V&&(J=ue&&ue.onVnodeBeforeMount)&&invokeVNodeHook(J,y,I),toggleRecurse(F,!0);{w.ce&&w.ce._injectChildStyle(D);const Z=F.subTree=renderComponentRoot(F);_(null,Z,C,$,F,S,g),I.el=Z.el}if(k&&queuePostRenderEffect(k,S),!V&&(J=ue&&ue.onVnodeMounted)){const Z=I;queuePostRenderEffect(()=>invokeVNodeHook(J,y,Z),S)}(I.shapeFlag&256||y&&isAsyncWrapper(y.vnode)&&y.vnode.shapeFlag&256)&&F.a&&queuePostRenderEffect(F.a,S),F.isMounted=!0,I=C=$=null}};F.scope.on();const P=F.effect=new ReactiveEffect(E);F.scope.off();const q=F.update=P.run.bind(P),z=F.job=P.runIfDirty.bind(P);z.i=F,z.id=F.uid,P.scheduler=()=>queueJob(z),toggleRecurse(F,!0),q()},ge=(F,I,C)=>{I.component=F;const $=F.vnode.props;F.vnode=I,F.next=null,updateProps(F,I.props,$,C),updateSlots(F,I.children,C),pauseTracking(),flushPreFlushCbs(F),resetTracking()},te=(F,I,C,$,S,g,b,E,P=!1)=>{const q=F&&F.children,z=F?F.shapeFlag:0,J=I.children,{patchFlag:le,shapeFlag:ue}=I;if(le>0){if(le&128){H(q,J,C,$,S,g,b,E,P);return}else if(le&256){ye(q,J,C,$,S,g,b,E,P);return}}ue&8?(z&16&&Ee(q,S,g),J!==q&&c(C,J)):z&16?ue&16?H(q,J,C,$,S,g,b,E,P):Ee(q,S,g,!0):(z&8&&c(C,""),ue&16&&M(J,C,$,S,g,b,E,P))},ye=(F,I,C,$,S,g,b,E,P)=>{F=F||EMPTY_ARR,I=I||EMPTY_ARR;const q=F.length,z=I.length,J=Math.min(q,z);let le;for(le=0;le<J;le++){const ue=I[le]=P?cloneIfMounted(I[le]):normalizeVNode(I[le]);_(F[le],ue,C,null,S,g,b,E,P)}q>z?Ee(F,S,g,!0,!1,J):M(I,C,$,S,g,b,E,P,J)},H=(F,I,C,$,S,g,b,E,P)=>{let q=0;const z=I.length;let J=F.length-1,le=z-1;for(;q<=J&&q<=le;){const ue=F[q],Te=I[q]=P?cloneIfMounted(I[q]):normalizeVNode(I[q]);if(isSameVNodeType(ue,Te))_(ue,Te,C,null,S,g,b,E,P);else break;q++}for(;q<=J&&q<=le;){const ue=F[J],Te=I[le]=P?cloneIfMounted(I[le]):normalizeVNode(I[le]);if(isSameVNodeType(ue,Te))_(ue,Te,C,null,S,g,b,E,P);else break;J--,le--}if(q>J){if(q<=le){const ue=le+1,Te=ue<z?I[ue].el:$;for(;q<=le;)_(null,I[q]=P?cloneIfMounted(I[q]):normalizeVNode(I[q]),C,Te,S,g,b,E,P),q++}}else if(q>le)for(;q<=J;)oe(F[q],S,g,!0),q++;else{const ue=q,Te=q,k=new Map;for(q=Te;q<=le;q++){const Se=I[q]=P?cloneIfMounted(I[q]):normalizeVNode(I[q]);Se.key!=null&&k.set(Se.key,q)}let y,w=0;const D=le-Te+1;let V=!1,Z=0;const se=new Array(D);for(q=0;q<D;q++)se[q]=0;for(q=ue;q<=J;q++){const Se=F[q];if(w>=D){oe(Se,S,g,!0);continue}let xe;if(Se.key!=null)xe=k.get(Se.key);else for(y=Te;y<=le;y++)if(se[y-Te]===0&&isSameVNodeType(Se,I[y])){xe=y;break}xe===void 0?oe(Se,S,g,!0):(se[xe-Te]=q+1,xe>=Z?Z=xe:V=!0,_(Se,I[xe],C,null,S,g,b,E,P),w++)}const ve=V?getSequence(se):EMPTY_ARR;for(y=ve.length-1,q=D-1;q>=0;q--){const Se=Te+q,xe=I[Se],Re=Se+1<z?I[Se+1].el:$;se[q]===0?_(null,xe,C,Re,S,g,b,E,P):V&&(y<0||q!==ve[y]?ee(xe,C,Re,2):y--)}}},ee=(F,I,C,$,S=null)=>{const{el:g,type:b,transition:E,children:P,shapeFlag:q}=F;if(q&6){ee(F.component.subTree,I,C,$);return}if(q&128){F.suspense.move(I,C,$);return}if(q&64){b.move(F,I,C,ie);return}if(b===Fragment){r(g,I,C);for(let J=0;J<P.length;J++)ee(P[J],I,C,$);r(F.anchor,I,C);return}if(b===Static){B(F,I,C);return}if($!==2&&q&1&&E)if($===0)E.beforeEnter(g),r(g,I,C),queuePostRenderEffect(()=>E.enter(g),S);else{const{leave:J,delayLeave:le,afterLeave:ue}=E,Te=()=>{F.ctx.isUnmounted?i(g):r(g,I,C)},k=()=>{J(g,()=>{Te(),ue&&ue()})};le?le(g,Te,k):k()}else r(g,I,C)},oe=(F,I,C,$=!1,S=!1)=>{const{type:g,props:b,ref:E,children:P,dynamicChildren:q,shapeFlag:z,patchFlag:J,dirs:le,cacheIndex:ue}=F;if(J===-2&&(S=!1),E!=null&&(pauseTracking(),setRef(E,null,C,F,!0),resetTracking()),ue!=null&&(I.renderCache[ue]=void 0),z&256){I.ctx.deactivate(F);return}const Te=z&1&&le,k=!isAsyncWrapper(F);let y;if(k&&(y=b&&b.onVnodeBeforeUnmount)&&invokeVNodeHook(y,I,F),z&6)we(F.component,C,$);else{if(z&128){F.suspense.unmount(C,$);return}Te&&invokeDirectiveHook(F,null,I,"beforeUnmount"),z&64?F.type.remove(F,I,C,ie,$):q&&!q.hasOnce&&(g!==Fragment||J>0&&J&64)?Ee(q,I,C,!1,!0):(g===Fragment&&J&384||!S&&z&16)&&Ee(P,I,C),$&&ae(F)}(k&&(y=b&&b.onVnodeUnmounted)||Te)&&queuePostRenderEffect(()=>{y&&invokeVNodeHook(y,I,F),Te&&invokeDirectiveHook(F,null,I,"unmounted")},C)},ae=F=>{const{type:I,el:C,anchor:$,transition:S}=F;if(I===Fragment){be(C,$);return}if(I===Static){O(F);return}const g=()=>{i(C),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(F.shapeFlag&1&&S&&!S.persisted){const{leave:b,delayLeave:E}=S,P=()=>b(C,g);E?E(F.el,g,P):P()}else g()},be=(F,I)=>{let C;for(;F!==I;)C=m(F),i(F),F=C;i(I)},we=(F,I,C)=>{const{bum:$,scope:S,job:g,subTree:b,um:E,m:P,a:q,parent:z,slots:{__:J}}=F;invalidateMount(P),invalidateMount(q),$&&invokeArrayFns($),z&&isArray$1(J)&&J.forEach(le=>{z.renderCache[le]=void 0}),S.stop(),g&&(g.flags|=8,oe(b,F,I,C)),E&&queuePostRenderEffect(E,I),queuePostRenderEffect(()=>{F.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},Ee=(F,I,C,$=!1,S=!1,g=0)=>{for(let b=g;b<F.length;b++)oe(F[b],I,C,$,S)},Q=F=>{if(F.shapeFlag&6)return Q(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const I=m(F.anchor||F.el),C=I&&I[TeleportEndKey];return C?m(C):I};let X=!1;const K=(F,I,C)=>{F==null?I._vnode&&oe(I._vnode,null,null,!0):_(I._vnode||null,F,I,null,null,null,C),I._vnode=F,X||(X=!0,flushPreFlushCbs(),flushPostFlushCbs(),X=!1)},ie={p:_,um:oe,m:ee,r:ae,mt:ce,mc:M,pc:te,pbc:W,n:Q,o:e};return{render:K,hydrate:void 0,createApp:createAppAPI(K)}}function resolveChildrenNamespace({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function toggleRecurse({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,n=!1){const r=e.children,i=t.children;if(isArray$1(r)&&isArray$1(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=cloneIfMounted(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&traverseStaticChildren(o,a)),a.type===Text&&(a.el=o.el),a.type===Comment&&!a.el&&(a.el=o.el)}}function getSequence(e){const t=e.slice(),n=[0];let r,i,s,o,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<u?s=a+1:o=a;u<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(e,t,n){return doWatch(e,t,n)}function doWatch(e,t,n=EMPTY_OBJ){const{immediate:r,deep:i,flush:s,once:o}=n,a=extend({},n),l=t&&r||!t&&s!=="post";let u;if(isInSSRComponentSetup){if(s==="sync"){const d=useSSRContext();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=NOOP,d.resume=NOOP,d.pause=NOOP,d}}const c=currentInstance;a.call=(d,T,_)=>callWithAsyncErrorHandling(d,c,T,_);let f=!1;s==="post"?a.scheduler=d=>{queuePostRenderEffect(d,c&&c.suspense)}:s!=="sync"&&(f=!0,a.scheduler=(d,T)=>{T?d():queueJob(d)}),a.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const m=watch$1(e,t,a);return isInSSRComponentSetup&&(u?u.push(m):l&&m()),m}function instanceWatch(e,t,n){const r=this.proxy,i=isString(e)?e.includes(".")?createPathGetter(r,e):()=>r[e]:e.bind(r,r);let s;isFunction(t)?s=t:(s=t.handler,n=t);const o=setCurrentInstance(this),a=doWatch(i,s.bind(r),n);return o(),a}function createPathGetter(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||EMPTY_OBJ;let i=n;const s=t.startsWith("update:"),o=s&&getModelModifiers(r,t.slice(7));o&&(o.trim&&(i=n.map(c=>isString(c)?c.trim():c)),o.number&&(i=n.map(looseToNumber)));let a,l=r[a=toHandlerKey(t)]||r[a=toHandlerKey(camelize(t))];!l&&s&&(l=r[a=toHandlerKey(hyphenate(t))]),l&&callWithAsyncErrorHandling(l,e,6,i);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,callWithAsyncErrorHandling(u,e,6,i)}}function normalizeEmitsOptions(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},a=!1;if(!isFunction(e)){const l=u=>{const c=normalizeEmitsOptions(u,t,!0);c&&(a=!0,extend(o,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(isObject(e)&&r.set(e,null),null):(isArray$1(s)?s.forEach(l=>o[l]=null):extend(o,s),isObject(e)&&r.set(e,o),o)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:f,data:m,setupState:d,ctx:T,inheritAttrs:_}=e,x=setCurrentRenderingInstance(e);let v,A;try{if(n.shapeFlag&4){const O=i||r,L=O;v=normalizeVNode(u.call(L,O,c,f,d,m,T)),A=a}else{const O=t;v=normalizeVNode(O.length>1?O(f,{attrs:a,slots:o,emit:l}):O(f,null)),A=t.props?a:getFunctionalFallthrough(a)}}catch(O){blockStack.length=0,handleError(O,e,1),v=createVNode(Comment)}let B=v;if(A&&_!==!1){const O=Object.keys(A),{shapeFlag:L}=B;O.length&&L&7&&(s&&O.some(isModelListener)&&(A=filterModelListeners(A,s)),B=cloneVNode(B,A,!1,!0))}return n.dirs&&(B=cloneVNode(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&setTransitionHooks(B,n.transition),v=B,setCurrentRenderingInstance(x),v}const getFunctionalFallthrough=e=>{let t;for(const n in e)(n==="class"||n==="style"||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const r in e)(!isModelListener(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function shouldUpdateComponent(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:a,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?hasPropsChanged(r,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const m=c[f];if(o[m]!==r[m]&&!isEmitListener(u,m))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?hasPropsChanged(r,o,u):!0:!!o;return!1}function hasPropsChanged(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!isEmitListener(n,s))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e,t=!1){isBlockTreeEnabled+=e,e<0&&currentBlock&&t&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,r,i,s){return setupBlock(createBaseVNode(e,t,n,r,i,s,!0))}function createBlock(e,t,n,r,i){return setupBlock(createVNode(e,t,n,r,i,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null);function createBaseVNode(e,t=null,n=null,r=0,i=null,s=e===Fragment?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return a?(normalizeChildren(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const a=cloneVNode(e,t,!0);return n&&normalizeChildren(a,n),isBlockTreeEnabled>0&&!s&&currentBlock&&(a.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=a:currentBlock.push(a)),a.patchFlag=-2,a}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:a,style:l}=t;a&&!isString(a)&&(t.class=normalizeClass(a)),isObject(l)&&(isProxy(l)&&!isArray$1(l)&&(l=extend({},l)),t.style=normalizeStyle(l))}const o=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,n,r,i,o,s,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend({},e):e:null}function cloneVNode(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=e,u=t?mergeProps(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&normalizeKey(u),ref:t&&t.ref?n&&s?isArray$1(s)?s.concat(normalizeRef(t)):[s,normalizeRef(t)]:normalizeRef(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&setTransitionHooks(c,l.clone(c)),c}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):isVNode(e)?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(isArray$1(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),normalizeChildren(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!isInternalObject(t)?t._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),r&64?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=normalizeClass([t.class,r.class]));else if(i==="style")t.style=normalizeStyle([t.style,r.style]);else if(isOn(i)){const s=t[i],o=r[i];o&&s!==o&&!(isArray$1(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function invokeVNodeHook(e,t,n,r=null){callWithAsyncErrorHandling(e,t,7,[n,r])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||emptyAppContext,s={uid:uid++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,i),emitsOptions:normalizeEmitsOptions(r,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=emit.bind(null,s),e.ce&&e.ce(s),s}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=t("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,n=!1){t&&setInSSRSetupState(t);const{props:r,children:i}=e.vnode,s=isStatefulComponent(e);initProps(e,r,s,t),initSlots(e,i,n||t);const o=s?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),o}function setupStatefulComponent(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:r}=n;if(r){pauseTracking();const i=e.setupContext=r.length>1?createSetupContext(e):null,s=setCurrentInstance(e),o=callWithErrorHandling(r,e,0,[e.props,i]),a=isPromise(o);if(resetTracking(),s(),(a||e.sp)&&!isAsyncWrapper(e)&&markAsyncBoundary(e),a){if(o.then(unsetCurrentInstance,unsetCurrentInstance),t)return o.then(l=>{handleSetupResult(e,l)}).catch(l=>{handleError(l,e,0)});e.asyncDep=o}else handleSetupResult(e,o)}else finishComponentSetup(e)}function handleSetupResult(e,t,n){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,n){const r=e.type;e.render||(e.render=r.render||NOOP);{const i=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),i()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](e)},has(t,n){return n in t||n in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,n=!1){let r=getComponentName(t);if(!r&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(r=i[1])}if(!r&&e&&e.parent){const i=s=>{for(const o in s)if(s[o]===t)return o};r=i(e.components||e.parent.type.components)||i(e.appContext.components)}return r?classify(r):n?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,n){const r=arguments.length;return r===2?isObject(t)&&!isArray$1(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&isVNode(n)&&(n=[n]),createVNode(e,t,n))}const version="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch{}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):n?doc.createElement(e,{is:n}):doc.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=templateContainer.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(e,t,n){const r=e[vtcKey];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,n){const r=e.style,i=isString(n);let s=!1;if(n&&!i){if(t)if(isString(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&setStyle(r,a,"")}else for(const o in t)n[o]==null&&setStyle(r,o,"");for(const o in n)o==="display"&&(s=!0),setStyle(r,o,n[o])}else if(i){if(t!==n){const o=r[CSS_VAR_TEXT];o&&(n+=";"+o),r.cssText=n,s=displayRE.test(n)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=s?r.display:"",e[vShowHidden]&&(r.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$1(n))n.forEach(r=>setStyle(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(r),n.replace(importantRE,""),"important"):e[r]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let r=camelize(t);if(r!=="filter"&&r in e)return prefixCache[t]=r;r=capitalize(r);for(let i=0;i<prefixes.length;i++){const s=prefixes[i]+r;if(s in e)return prefixCache[t]=s}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,r,i,s=isSpecialBooleanAttr(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n):n==null||s&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,s?"":isSymbol(n)?String(n):n)}function patchDOMProp(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?unsafeToTrustedHTML(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=includeBooleanAttr(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function addEventListener(e,t,n,r){e.addEventListener(t,n,r)}function removeEventListener(e,t,n,r){e.removeEventListener(t,n,r)}const veiKey=Symbol("_vei");function patchEvent(e,t,n,r,i=null){const s=e[veiKey]||(e[veiKey]={}),o=s[t];if(r&&o)o.value=r;else{const[a,l]=parseName(t);if(r){const u=s[t]=createInvoker(r,i);addEventListener(e,a,u,l)}else o&&(removeEventListener(e,a,o,l),s[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let r;for(;r=e.match(optionsModifierRE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(r,n.value),t,5,[r])};return n.value=e,n.attached=getNow(),n}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,n,r,i,s)=>{const o=i==="svg";t==="class"?patchClass(e,r,o):t==="style"?patchStyle(e,n,r):isOn(t)?isModelListener(t)||patchEvent(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,r,o))?(patchDOMProp(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,r,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!isString(r))?patchDOMProp(e,camelize(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),patchAttr(e,t,r,o))};function shouldSetAsProp(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(t)&&isString(n)?!1:t in e}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$1(t)?n=>invokeArrayFns(t,n):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[assignKey]=getModelAssigner(i);const s=r||i.props&&i.props.type==="number";addEventListener(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=looseToNumber(a)),e[assignKey](a)}),n&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(e[assignKey]=getModelAssigner(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?looseToNumber(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===l)||(e.value=l))}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(n=>e[`${n}Key`]&&!t.includes(n))},withModifiers=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<t.length;o++){const a=modifierGuards[t[o]];if(a&&a(i,t))return}return e(i,...s)})},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=normalizeContainer(r);if(!i)return;const s=t._component;!isFunction(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const _export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},_sfc_main$4={};function _sfc_render(e,t){const n=resolveComponent("router-view");return openBlock(),createBlock(n)}const App=_export_sfc(_sfc_main$4,[["render",_sfc_render]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&isRouteComponent(e.default)}const assign=Object.assign;function applyToParams(e,t){const n={};for(const r in t){const i=t[r];n[r]=isArray(i)?i.map(e):e(i)}return n}const noop=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,n="/"){let r,i={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),i=e(s)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=resolveRelativePath(r??t,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:decode(o)}}function stringifyURL(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&isSameRouteRecord(t.matched[r],n.matched[i])&&isSameRouteLocationParams(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!isSameRouteLocationParamsValue(e[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=getElementPosition(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let a=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),stripBase(l,"")}return stripBase(n,e)+r+i}function useHistoryListeners(e,t,n,r){let i=[],s=[],o=null;const a=({state:m})=>{const d=createCurrentLocation(e,location),T=n.value,_=t.value;let x=0;if(m){if(n.value=d,t.value=m,o&&o===T){o=null;return}x=_?m.position-_.position:0}else r(d);i.forEach(v=>{v(n.value,T,{delta:x,type:NavigationType.pop,direction:x?x>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function l(){o=n.value}function u(m){i.push(m);const d=()=>{const T=i.indexOf(m);T>-1&&i.splice(T,1)};return s.push(d),d}function c(){const{history:m}=window;m.state&&m.replaceState(assign({},m.state,{scroll:computeScrollPosition()}),"")}function f(){for(const m of s)m();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function buildState(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:n}=window,r={value:createCurrentLocation(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const f=e.indexOf("#"),m=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:createBaseLocation()+e+l;try{t[c?"replaceState":"pushState"](u,"",m),i.value=u}catch(d){console.error(d),n[c?"replace":"assign"](m)}}function o(l,u){const c=assign({},t.state,buildState(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,c,!0),r.value=l}function a(l,u){const c=assign({},i.value,t.state,{forward:l,scroll:computeScrollPosition()});s(c.current,c,!0);const f=assign({},buildState(r.value,l,null),{position:c.position+1},u);s(l,f,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),n=useHistoryListeners(e,t.state,t.location,t.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=assign({location:"",base:e,go:r,createHref:createHref.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const n=assign({},BASE_PATH_PARSER_OPTIONS,t),r=[];let i=n.start?"^":"";const s=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const m=u[f];let d=40+(n.sensitive?.25:0);if(m.type===0)f||(i+="/"),i+=m.value.replace(REGEX_CHARS_RE,"\\$&"),d+=40;else if(m.type===1){const{value:T,repeatable:_,optional:x,regexp:v}=m;s.push({name:T,repeatable:_,optional:x});const A=v||BASE_PARAM_PATTERN;if(A!==BASE_PARAM_PATTERN){d+=10;try{new RegExp(`(${A})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${T}" (${A}): `+O.message)}}let B=_?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;f||(B=x&&u.length<2?`(?:/${B})`:"/"+B),x&&(B+="?"),i+=B,d+=20,x&&(d+=-8),_&&(d+=-20),A===".*"&&(d+=-50)}c.push(d)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const c=u.match(o),f={};if(!c)return null;for(let m=1;m<c.length;m++){const d=c[m]||"",T=s[m-1];f[T.name]=d&&T.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const m of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of m)if(d.type===0)c+=d.value;else if(d.type===1){const{value:T,repeatable:_,optional:x}=d,v=T in u?u[T]:"";if(isArray(v)&&!_)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const A=isArray(v)?v.join("/"):v;if(!A)if(x)m.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${T}"`);c+=A}}return c||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function compareScoreArray(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function comparePathParserScore(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=compareScoreArray(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(isLastScoreNegative(r))return 1;if(isLastScoreNegative(i))return-1}return i.length-r.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${u}": ${d}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",c="";function f(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&f(),o()):l===":"?(f(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:VALID_PARAM_RE.test(l)?m():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),o(),i}function createRouteRecordMatcher(e,t,n){const r=tokensToParser(tokenizePath(e.path),n),i=assign(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function createRouterMatcher(e,t){const n=[],r=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function i(f){return r.get(f)}function s(f,m,d){const T=!d,_=normalizeRouteRecord(f);_.aliasOf=d&&d.record;const x=mergeOptions(t,f),v=[_];if("alias"in f){const O=typeof f.alias=="string"?[f.alias]:f.alias;for(const L of O)v.push(normalizeRouteRecord(assign({},_,{components:d?d.record.components:_.components,path:L,aliasOf:d?d.record:_})))}let A,B;for(const O of v){const{path:L}=O;if(m&&L[0]!=="/"){const U=m.record.path,R=U[U.length-1]==="/"?"":"/";O.path=m.record.path+(L&&R+L)}if(A=createRouteRecordMatcher(O,m,x),d?d.alias.push(A):(B=B||A,B!==A&&B.alias.push(A),T&&f.name&&!isAliasRecord(A)&&o(f.name)),isMatchable(A)&&l(A),_.children){const U=_.children;for(let R=0;R<U.length;R++)s(U[R],A,d&&d.children[R])}d=d||A}return B?()=>{o(B)}:noop}function o(f){if(isRouteName(f)){const m=r.get(f);m&&(r.delete(f),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(f);m>-1&&(n.splice(m,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const m=findInsertionIndex(f,n);n.splice(m,0,f),f.record.name&&!isAliasRecord(f)&&r.set(f.record.name,f)}function u(f,m){let d,T={},_,x;if("name"in f&&f.name){if(d=r.get(f.name),!d)throw createRouterError(1,{location:f});x=d.record.name,T=assign(paramsFromLocation(m.params,d.keys.filter(B=>!B.optional).concat(d.parent?d.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),f.params&&paramsFromLocation(f.params,d.keys.map(B=>B.name))),_=d.stringify(T)}else if(f.path!=null)_=f.path,d=n.find(B=>B.re.test(_)),d&&(T=d.parse(_),x=d.record.name);else{if(d=m.name?r.get(m.name):n.find(B=>B.re.test(m.path)),!d)throw createRouterError(1,{location:f,currentLocation:m});x=d.record.name,T=assign({},m.params,f.params),_=d.stringify(T)}const v=[];let A=d;for(;A;)v.unshift(A.record),A=A.parent;return{name:x,path:_,params:T,matched:v,meta:mergeMetaFields(v)}}e.forEach(f=>s(f));function c(){n.length=0,r.clear()}return{addRoute:s,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:i}}function paramsFromLocation(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function normalizeRouteRecord(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function normalizeRecordProps(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,n)=>assign(t,n.meta),{})}function mergeOptions(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function findInsertionIndex(e,t){let n=0,r=t.length;for(;n!==r;){const s=n+r>>1;comparePathParserScore(e,t[s])<0?r=s:n=s+1}const i=getInsertionAncestor(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function getInsertionAncestor(e){let t=e;for(;t=t.parent;)if(isMatchable(t)&&comparePathParserScore(e,t)===0)return t}function isMatchable({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function parseQuery(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(PLUS_RE," "),o=s.indexOf("="),a=decode(o<0?s:s.slice(0,o)),l=o<0?null:decode(s.slice(o+1));if(a in t){let u=t[a];isArray(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function stringifyQuery(e){let t="";for(let n in e){const r=e[n];if(n=encodeQueryKey(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(isArray(r)?r.map(s=>s&&encodeQueryValue(s)):[r&&encodeQueryValue(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function normalizeQuery(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=isArray(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function guardToPromiseFn(e,t,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=m=>{m===!1?l(createRouterError(4,{from:n,to:t})):m instanceof Error?l(m):isRouteLocation(m)?l(createRouterError(2,{from:t,to:m})):(o&&r.enterCallbacks[i]===o&&typeof m=="function"&&o.push(m),a())},c=s(()=>e.call(r&&r.instances[i],t,n,u));let f=Promise.resolve(c);e.length<3&&(f=f.then(u)),f.catch(m=>l(m))})}function extractComponentsGuards(e,t,n,r,i=s=>s()){const s=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(isRouteComponent(l)){const c=(l.__vccOpts||l)[t];c&&s.push(guardToPromiseFn(c,n,r,o,a,i))}else{let u=l();s.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=isESModule(c)?c.default:c;o.mods[a]=c,o.components[a]=f;const d=(f.__vccOpts||f)[t];return d&&guardToPromiseFn(d,n,r,o,a,i)()}))}}return s}function useLink(e){const t=inject(routerKey),n=inject(routeLocationKey),r=computed(()=>{const l=unref(e.to);return t.resolve(l)}),i=computed(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],f=n.matched;if(!c||!f.length)return-1;const m=f.findIndex(isSameRouteRecord.bind(null,c));if(m>-1)return m;const d=getOriginalPath(l[u-2]);return u>1&&getOriginalPath(c)===d&&f[f.length-1].path!==d?f.findIndex(isSameRouteRecord.bind(null,l[u-2])):m}),s=computed(()=>i.value>-1&&includesParams(n.params,r.value.params)),o=computed(()=>i.value>-1&&i.value===n.matched.length-1&&isSameRouteLocationParams(n.params,r.value.params));function a(l={}){if(guardEvent(l)){const u=t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:computed(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function preferSingleVNode(e){return e.length===1?e[0]:e}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink,setup(e,{slots:t}){const n=reactive(useLink(e)),{options:r}=inject(routerKey),i=computed(()=>({[getLinkClass(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&preferSingleVNode(t.default(n));return e.custom?s:h("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!isArray(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,n)=>e??t??n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=inject(routerViewLocationKey),i=computed(()=>e.route||r.value),s=inject(viewDepthKey,0),o=computed(()=>{let u=unref(s);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),a=computed(()=>i.value.matched[o.value]);provide(viewDepthKey,computed(()=>o.value+1)),provide(matchedRouteKey,a),provide(routerViewLocationKey,i);const l=ref();return watch(()=>[l.value,a.value,e.name],([u,c,f],[m,d,T])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===m&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!isSameRouteRecord(c,d)||!m)&&(c.enterCallbacks[f]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=a.value,m=f&&f.components[c];if(!m)return normalizeSlot(n.default,{Component:m,route:u});const d=f.props[c],T=d?d===!0?u.params:typeof d=="function"?d(u):d:null,x=h(m,assign({},T,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return normalizeSlot(n.default,{Component:x,route:u})||x}}});function normalizeSlot(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),n=e.parseQuery||parseQuery,r=e.stringifyQuery||stringifyQuery,i=e.history,s=useCallbacks(),o=useCallbacks(),a=useCallbacks(),l=shallowRef(START_LOCATION_NORMALIZED);let u=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=applyToParams.bind(null,Q=>""+Q),f=applyToParams.bind(null,encodeParam),m=applyToParams.bind(null,decode);function d(Q,X){let K,ie;return isRouteName(Q)?(K=t.getRecordMatcher(Q),ie=X):ie=Q,t.addRoute(ie,K)}function T(Q){const X=t.getRecordMatcher(Q);X&&t.removeRoute(X)}function _(){return t.getRoutes().map(Q=>Q.record)}function x(Q){return!!t.getRecordMatcher(Q)}function v(Q,X){if(X=assign({},X||l.value),typeof Q=="string"){const C=parseURL(n,Q,X.path),$=t.resolve({path:C.path},X),S=i.createHref(C.fullPath);return assign(C,$,{params:m($.params),hash:decode(C.hash),redirectedFrom:void 0,href:S})}let K;if(Q.path!=null)K=assign({},Q,{path:parseURL(n,Q.path,X.path).path});else{const C=assign({},Q.params);for(const $ in C)C[$]==null&&delete C[$];K=assign({},Q,{params:f(C)}),X.params=f(X.params)}const ie=t.resolve(K,X),fe=Q.hash||"";ie.params=c(m(ie.params));const F=stringifyURL(r,assign({},Q,{hash:encodeHash(fe),path:ie.path})),I=i.createHref(F);return assign({fullPath:F,hash:fe,query:r===stringifyQuery?normalizeQuery(Q.query):Q.query||{}},ie,{redirectedFrom:void 0,href:I})}function A(Q){return typeof Q=="string"?parseURL(n,Q,l.value.path):assign({},Q)}function B(Q,X){if(u!==Q)return createRouterError(8,{from:X,to:Q})}function O(Q){return R(Q)}function L(Q){return O(assign(A(Q),{replace:!0}))}function U(Q){const X=Q.matched[Q.matched.length-1];if(X&&X.redirect){const{redirect:K}=X;let ie=typeof K=="function"?K(Q):K;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=A(ie):{path:ie},ie.params={}),assign({query:Q.query,hash:Q.hash,params:ie.path!=null?{}:Q.params},ie)}}function R(Q,X){const K=u=v(Q),ie=l.value,fe=Q.state,F=Q.force,I=Q.replace===!0,C=U(K);if(C)return R(assign(A(C),{state:typeof C=="object"?assign({},fe,C.state):fe,force:F,replace:I}),X||K);const $=K;$.redirectedFrom=X;let S;return!F&&isSameRouteLocation(r,ie,K)&&(S=createRouterError(16,{to:$,from:ie}),ee(ie,ie,!0,!1)),(S?Promise.resolve(S):W($,ie)).catch(g=>isNavigationFailure(g)?isNavigationFailure(g,2)?g:H(g):te(g,$,ie)).then(g=>{if(g){if(isNavigationFailure(g,2))return R(assign({replace:I},A(g.to),{state:typeof g.to=="object"?assign({},fe,g.to.state):fe,force:F}),X||$)}else g=re($,ie,!0,I,fe);return G($,ie,g),g})}function M(Q,X){const K=B(Q,X);return K?Promise.reject(K):Promise.resolve()}function ne(Q){const X=be.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(Q):Q()}function W(Q,X){let K;const[ie,fe,F]=extractChangingRecords(Q,X);K=extractComponentsGuards(ie.reverse(),"beforeRouteLeave",Q,X);for(const C of ie)C.leaveGuards.forEach($=>{K.push(guardToPromiseFn($,Q,X))});const I=M.bind(null,Q,X);return K.push(I),Ee(K).then(()=>{K=[];for(const C of s.list())K.push(guardToPromiseFn(C,Q,X));return K.push(I),Ee(K)}).then(()=>{K=extractComponentsGuards(fe,"beforeRouteUpdate",Q,X);for(const C of fe)C.updateGuards.forEach($=>{K.push(guardToPromiseFn($,Q,X))});return K.push(I),Ee(K)}).then(()=>{K=[];for(const C of F)if(C.beforeEnter)if(isArray(C.beforeEnter))for(const $ of C.beforeEnter)K.push(guardToPromiseFn($,Q,X));else K.push(guardToPromiseFn(C.beforeEnter,Q,X));return K.push(I),Ee(K)}).then(()=>(Q.matched.forEach(C=>C.enterCallbacks={}),K=extractComponentsGuards(F,"beforeRouteEnter",Q,X,ne),K.push(I),Ee(K))).then(()=>{K=[];for(const C of o.list())K.push(guardToPromiseFn(C,Q,X));return K.push(I),Ee(K)}).catch(C=>isNavigationFailure(C,8)?C:Promise.reject(C))}function G(Q,X,K){a.list().forEach(ie=>ne(()=>ie(Q,X,K)))}function re(Q,X,K,ie,fe){const F=B(Q,X);if(F)return F;const I=X===START_LOCATION_NORMALIZED,C=isBrowser?history.state:{};K&&(ie||I?i.replace(Q.fullPath,assign({scroll:I&&C&&C.scroll},fe)):i.push(Q.fullPath,fe)),l.value=Q,ee(Q,X,K,I),H()}let Y;function ce(){Y||(Y=i.listen((Q,X,K)=>{if(!we.listening)return;const ie=v(Q),fe=U(ie);if(fe){R(assign(fe,{replace:!0,force:!0}),ie).catch(noop);return}u=ie;const F=l.value;isBrowser&&saveScrollPosition(getScrollKey(F.fullPath,K.delta),computeScrollPosition()),W(ie,F).catch(I=>isNavigationFailure(I,12)?I:isNavigationFailure(I,2)?(R(assign(A(I.to),{force:!0}),ie).then(C=>{isNavigationFailure(C,20)&&!K.delta&&K.type===NavigationType.pop&&i.go(-1,!1)}).catch(noop),Promise.reject()):(K.delta&&i.go(-K.delta,!1),te(I,ie,F))).then(I=>{I=I||re(ie,F,!1),I&&(K.delta&&!isNavigationFailure(I,8)?i.go(-K.delta,!1):K.type===NavigationType.pop&&isNavigationFailure(I,20)&&i.go(-1,!1)),G(ie,F,I)}).catch(noop)}))}let me=useCallbacks(),de=useCallbacks(),ge;function te(Q,X,K){H(Q);const ie=de.list();return ie.length?ie.forEach(fe=>fe(Q,X,K)):console.error(Q),Promise.reject(Q)}function ye(){return ge&&l.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Q,X)=>{me.add([Q,X])})}function H(Q){return ge||(ge=!Q,ce(),me.list().forEach(([X,K])=>Q?K(Q):X()),me.reset()),Q}function ee(Q,X,K,ie){const{scrollBehavior:fe}=e;if(!isBrowser||!fe)return Promise.resolve();const F=!K&&getSavedScrollPosition(getScrollKey(Q.fullPath,0))||(ie||!K)&&history.state&&history.state.scroll||null;return nextTick().then(()=>fe(Q,X,F)).then(I=>I&&scrollToPosition(I)).catch(I=>te(I,Q,X))}const oe=Q=>i.go(Q);let ae;const be=new Set,we={currentRoute:l,listening:!0,addRoute:d,removeRoute:T,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:_,resolve:v,options:e,push:O,replace:L,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:de.add,isReady:ye,install(Q){const X=this;Q.component("RouterLink",RouterLink),Q.component("RouterView",RouterView),Q.config.globalProperties.$router=X,Object.defineProperty(Q.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(l)}),isBrowser&&!ae&&l.value===START_LOCATION_NORMALIZED&&(ae=!0,O(i.location).catch(fe=>{}));const K={};for(const fe in START_LOCATION_NORMALIZED)Object.defineProperty(K,fe,{get:()=>l.value[fe],enumerable:!0});Q.provide(routerKey,X),Q.provide(routeLocationKey,shallowReactive(K)),Q.provide(routerViewLocationKey,l);const ie=Q.unmount;be.add(Q),Q.unmount=function(){be.delete(Q),be.size<1&&(u=START_LOCATION_NORMALIZED,Y&&Y(),Y=null,l.value=START_LOCATION_NORMALIZED,ae=!1,ge=!1),ie()}}};function Ee(Q){return Q.reduce((X,K)=>X.then(()=>ne(K)),Promise.resolve())}return we}function extractChangingRecords(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(u=>isSameRouteRecord(u,a))?r.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(u=>isSameRouteRecord(u,l))||i.push(l))}return[n,r,i]}function useRouter(){return inject(routerKey)}async function authenticateUser(e,t){try{const r=await(await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})})).json();return r.success?{success:!0,userId:r.user.id,user:r.user}:{success:!1}}catch(n){return console.error("Authentication error:",n),{success:!1}}}async function createUser(e,t){try{return(await(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})})).json()).success}catch(n){return console.error("Registration error:",n),!1}}const _hoisted_1$3={class:"auth-container"},_hoisted_2$3={class:"form-field"},_hoisted_3$2={class:"form-field"},_hoisted_4$2={key:0,class:"error"},_hoisted_5$2={class:"account-link"},_sfc_main$3={__name:"Login",setup(e){const t=ref(""),n=ref(""),r=ref(""),i=useRouter(),s=async()=>{r.value="";try{const o=await authenticateUser(t.value,n.value);o.success?(localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userId",o.userId),i.push("/visualizer")):r.value=o.error||"Login failed."}catch(o){r.value="Network error, please try again.",console.error("Login error:",o)}};return(o,a)=>{const l=resolveComponent("router-link");return openBlock(),createElementBlock("main",null,[createBaseVNode("div",_hoisted_1$3,[a[7]||(a[7]=createBaseVNode("h1",null,"WAV Login",-1)),createBaseVNode("form",{onSubmit:withModifiers(s,["prevent"]),id:"form-container"},[createBaseVNode("div",_hoisted_2$3,[a[2]||(a[2]=createBaseVNode("label",{for:"username",id:"username-label"},"Username",-1)),withDirectives(createBaseVNode("input",{type:"text",id:"username","onUpdate:modelValue":a[0]||(a[0]=u=>t.value=u),required:"",placeholder:"Enter your username","aria-labelledby":"username-label","aria-required":"true"},null,512),[[vModelText,t.value]])]),createBaseVNode("div",_hoisted_3$2,[a[3]||(a[3]=createBaseVNode("label",{for:"password",id:"password-label"},"Password",-1)),withDirectives(createBaseVNode("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=u=>n.value=u),required:"",placeholder:"Enter your password","aria-labelledby":"password-label","aria-required":"true"},null,512),[[vModelText,n.value]])]),a[6]||(a[6]=createBaseVNode("button",{type:"submit"},"Login",-1)),r.value?(openBlock(),createElementBlock("p",_hoisted_4$2,toDisplayString(r.value),1)):createCommentVNode("",!0),createBaseVNode("p",_hoisted_5$2,[a[5]||(a[5]=createTextVNode(" Create an Account: ")),createVNode(l,{to:"/register"},{default:withCtx(()=>a[4]||(a[4]=[createTextVNode("Register")])),_:1,__:[4]})])],32)])])}}},_hoisted_1$2={class:"auth-container"},_hoisted_2$2={class:"form-field"},_hoisted_3$1={class:"form-field"},_hoisted_4$1={key:0,class:"error"},_hoisted_5$1={key:1,class:"success"},_hoisted_6={class:"account-link"},_sfc_main$2={__name:"Register",setup(e){const t=ref(""),n=ref(""),r=ref(""),i=ref(""),s=useRouter(),o=async()=>{try{await createUser(t.value,n.value)?(i.value="Registration successful! Proceed to login.",t.value="",n.value="",setTimeout(()=>{s.push("/")},1500)):r.value="Registration failed. Try a different username."}catch(a){r.value="An error occurred during registration.",console.error(a)}};return(a,l)=>{const u=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$2,[l[7]||(l[7]=createBaseVNode("h1",null,"Register",-1)),createBaseVNode("form",{onSubmit:withModifiers(o,["prevent"]),id:"form-container"},[createBaseVNode("div",_hoisted_2$2,[l[2]||(l[2]=createBaseVNode("label",{for:"username",id:"username-label"},"Username",-1)),withDirectives(createBaseVNode("input",{type:"text",id:"username","onUpdate:modelValue":l[0]||(l[0]=c=>t.value=c),required:"",placeholder:"Choose a username","aria-labelledby":"username-label","aria-required":"true"},null,512),[[vModelText,t.value]])]),createBaseVNode("div",_hoisted_3$1,[l[3]||(l[3]=createBaseVNode("label",{for:"password",id:"password-label"},"Password",-1)),withDirectives(createBaseVNode("input",{type:"password",id:"password","onUpdate:modelValue":l[1]||(l[1]=c=>n.value=c),required:"",placeholder:"Choose a password","aria-labelledby":"password-label","aria-required":"true"},null,512),[[vModelText,n.value]])]),l[6]||(l[6]=createBaseVNode("button",{type:"submit"},"Register",-1)),r.value?(openBlock(),createElementBlock("p",_hoisted_4$1,toDisplayString(r.value),1)):createCommentVNode("",!0),i.value?(openBlock(),createElementBlock("p",_hoisted_5$1,toDisplayString(i.value),1)):createCommentVNode("",!0),createBaseVNode("p",_hoisted_6,[l[5]||(l[5]=createTextVNode(" Already have an account? ")),createVNode(u,{to:"/"},{default:withCtx(()=>l[4]||(l[4]=[createTextVNode("Login")])),_:1,__:[4]})])],32)])}}};function initializeAudioVisualizer(){const e=document.getElementById("canvas-audio"),t=document.getElementById("file-upload");e.width=window.innerWidth,e.height=window.innerHeight;const n=e.getContext("2d");let r,i;t.addEventListener("change",function(){const o=this.files,a=document.getElementById("audio-player"),l=new(window.AudioContext||window.webkitAudioContext);a.src=URL.createObjectURL(o[0]),a.load(),a.play(),r=l.createMediaElementSource(a),i=l.createAnalyser(),r.connect(i),i.connect(l.destination),i.fftSize=256;const u=i.frequencyBinCount,c=new Uint8Array(u),f=e.width/2/u;let m,d;function T(){d=0,n.clearRect(0,0,e.width,e.height),i.getByteFrequencyData(c),s(u,d,f,m,c),requestAnimationFrame(T)}T()});function s(o,a,l,u,c){for(let f=0;f<o;f++){u=c[f]*2,n.fillStyle="white",n.fillRect(e.width/2-a,e.height-u-15,l,15);const m=f*.5;n.fillStyle="hsl("+m+",100%,"+u/3+"%)",n.fillRect(e.width/2-a,e.height-u,l,u),a+=l}for(let f=0;f<o;f++){u=c[f]*2,n.fillStyle="white",n.fillRect(a,e.height-u-15,l,15);const m=f*.5;n.fillStyle="hsl("+m+",100%,"+u/3+"%)",n.fillRect(a,e.height-u,l,u),a+=l}}window.addEventListener("resize",()=>{e.width=window.innerWidth,e.height=window.innerHeight})}const _hoisted_1$1={class:"track-list"},_hoisted_2$1={class:"track-info"},_hoisted_3={class:"track-title"},_hoisted_4={class:"track-artist"},_hoisted_5={class:"track-duration"},_sfc_main$1={__name:"TrackList",props:{userId:{type:Number,required:!0}},emits:["trackSelected"],setup(e,{emit:t}){const n=e,r=ref([]),i=async()=>{try{const a=await(await fetch(`/api/tracks/${n.userId}`)).json();a.success&&(r.value=a.tracks)}catch(o){console.error("Error fetching tracks:",o)}},s=o=>{if(!o)return"0:00";const a=Math.floor(o/60),l=o%60;return`${a}:${l.toString().padStart(2,"0")}`};return onMounted(i),(o,a)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[a[0]||(a[0]=createBaseVNode("h3",null,"Upload History",-1)),createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,l=>(openBlock(),createElementBlock("li",{key:l.id},[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("span",_hoisted_3,toDisplayString(l.title),1),createBaseVNode("span",_hoisted_4,toDisplayString(l.artist||"Unknown"),1),createBaseVNode("span",_hoisted_5,toDisplayString(s(l.duration)),1)])]))),128))])]))}},TrackList=_export_sfc(_sfc_main$1,[["__scopeId","data-v-638cf971"]]);var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,s=r*365.25;ms=function(c,f){f=f||{};var m=typeof c;if(m==="string"&&c.length>0)return o(c);if(m==="number"&&isFinite(c))return f.long?l(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var m=parseFloat(f[1]),d=(f[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(c){var f=Math.abs(c);return f>=r?Math.round(c/r)+"d":f>=n?Math.round(c/n)+"h":f>=t?Math.round(c/t)+"m":f>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var f=Math.abs(c);return f>=r?u(c,f,r,"day"):f>=n?u(c,f,n,"hour"):f>=t?u(c,f,t,"minute"):f>=e?u(c,f,e,"second"):c+" ms"}function u(c,f,m,d){var T=f>=m*1.5;return Math.round(c/m)+" "+d+(T?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=s,r.enabled=l,r.humanize=requireMs(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let m=0;for(let d=0;d<f.length;d++)m=(m<<5)-m+f.charCodeAt(d),m|=0;return r.colors[Math.abs(m)%r.colors.length]}r.selectColor=n;function r(f){let m,d=null,T,_;function x(...v){if(!x.enabled)return;const A=x,B=Number(new Date),O=B-(m||B);A.diff=O,A.prev=m,A.curr=B,m=B,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let L=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(R,M)=>{if(R==="%%")return"%";L++;const ne=r.formatters[M];if(typeof ne=="function"){const W=v[L];R=ne.call(A,W),v.splice(L,1),L--}return R}),r.formatArgs.call(A,v),(A.log||r.log).apply(A,v)}return x.namespace=f,x.useColors=r.useColors(),x.color=r.selectColor(f),x.extend=i,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(T!==r.namespaces&&(T=r.namespaces,_=r.enabled(f)),_),set:v=>{d=v}}),typeof r.init=="function"&&r.init(x),x}function i(f,m){const d=r(this.namespace+(typeof m>"u"?":":m)+f);return d.log=this.log,d}function s(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const m=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const d of m)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function o(f,m){let d=0,T=0,_=-1,x=0;for(;d<f.length;)if(T<m.length&&(m[T]===f[d]||m[T]==="*"))m[T]==="*"?(_=T,x=d,T++):(d++,T++);else if(_!==-1)T=_+1,x++,d=x;else return!1;for(;T<m.length&&m[T]==="*";)T++;return T===m.length}function a(){const f=[...r.names,...r.skips.map(m=>"-"+m)].join(",");return r.enable(""),f}function l(f){for(const m of r.skips)if(o(f,m))return!1;for(const m of r.names)if(o(f,m))return!0;return!1}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return common=e,common}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,function(e,t){var n={};t.formatArgs=i,t.save=s,t.load=o,t.useColors=r,t.storage=a(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;u.splice(1,0,c,"color: inherit");let f=0,m=0;u[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(f++,d==="%c"&&(m=f))}),u.splice(m,0,c)}t.log=console.debug||console.log||(()=>{});function s(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function o(){let u;try{u=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}function a(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:l}=e.exports;l.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(browser$3,browser$3.exports)),browser$3.exports}var core$2={},core$1={},ReadStreamTokenizer={},AbstractTokenizer={},lib$2={},EndOfFileStream={},hasRequiredEndOfFileStream;function requireEndOfFileStream(){return hasRequiredEndOfFileStream||(hasRequiredEndOfFileStream=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class t extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=t}(EndOfFileStream)),EndOfFileStream}var StreamReader={},Deferred={},hasRequiredDeferred;function requireDeferred(){if(hasRequiredDeferred)return Deferred;hasRequiredDeferred=1,Object.defineProperty(Deferred,"__esModule",{value:!0}),Deferred.Deferred=void 0;let e=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((n,r)=>{this.reject=r,this.resolve=n})}};return Deferred.Deferred=e,Deferred}var hasRequiredStreamReader;function requireStreamReader(){return hasRequiredStreamReader||(hasRequiredStreamReader=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const t=requireEndOfFileStream(),n=requireDeferred();var r=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});const i=1*1024*1024;class s{constructor(a){if(this.s=a,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!a.read||!a.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new t.EndOfStreamError)),this.s.once("error",l=>this.reject(l)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(a,l,u){const c=await this.read(a,l,u);return this.peekQueue.push(a.subarray(l,l+c)),c}async read(a,l,u){if(u===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new t.EndOfStreamError;let c=u,f=0;for(;this.peekQueue.length>0&&c>0;){const m=this.peekQueue.pop();if(!m)throw new Error("peekData should be defined");const d=Math.min(m.length,c);a.set(m.subarray(0,d),l+f),f+=d,c-=d,d<m.length&&this.peekQueue.push(m.subarray(d))}for(;c>0&&!this.endOfStream;){const m=Math.min(c,i),d=await this.readFromStream(a,l+f,m);if(f+=d,d<m)break;c-=d}return f}async readFromStream(a,l,u){const c=this.s.read(u);if(c)return a.set(c,l),c.length;{const f={buffer:a,offset:l,length:u,deferred:new n.Deferred};return this.deferred=f.deferred,this.s.once("readable",()=>{this.readDeferred(f)}),f.deferred.promise}}readDeferred(a){const l=this.s.read(a.length);l?(a.buffer.set(l,a.offset),a.deferred.resolve(l.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(a)})}reject(a){this.endOfStream=!0,this.deferred&&(this.deferred.reject(a),this.deferred=null)}}e.StreamReader=s}(StreamReader)),StreamReader}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;var t=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return t.EndOfStreamError}});var n=requireStreamReader();Object.defineProperty(e,"StreamReader",{enumerable:!0,get:function(){return n.StreamReader}})}(lib$2)),lib$2}var hasRequiredAbstractTokenizer;function requireAbstractTokenizer(){if(hasRequiredAbstractTokenizer)return AbstractTokenizer;hasRequiredAbstractTokenizer=1,Object.defineProperty(AbstractTokenizer,"__esModule",{value:!0}),AbstractTokenizer.AbstractTokenizer=void 0;const e=requireLib$3();let t=class{constructor(r){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=r||{}}async readToken(r,i=this.position){const s=Buffer.alloc(r.len);if(await this.readBuffer(s,{position:i})<r.len)throw new e.EndOfStreamError;return r.get(s,0)}async peekToken(r,i=this.position){const s=Buffer.alloc(r.len);if(await this.peekBuffer(s,{position:i})<r.len)throw new e.EndOfStreamError;return r.get(s,0)}async readNumber(r){if(await this.readBuffer(this.numBuffer,{length:r.len})<r.len)throw new e.EndOfStreamError;return r.get(this.numBuffer,0)}async peekNumber(r){if(await this.peekBuffer(this.numBuffer,{length:r.len})<r.len)throw new e.EndOfStreamError;return r.get(this.numBuffer,0)}async ignore(r){if(this.fileInfo.size!==void 0){const i=this.fileInfo.size-this.position;if(r>i)return this.position+=i,i}return this.position+=r,r}async close(){}normalizeOptions(r,i){if(i&&i.position!==void 0&&i.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return i?{mayBeLess:i.mayBeLess===!0,offset:i.offset?i.offset:0,length:i.length?i.length:r.length-(i.offset?i.offset:0),position:i.position?i.position:this.position}:{mayBeLess:!1,offset:0,length:r.length,position:this.position}}};return AbstractTokenizer.AbstractTokenizer=t,AbstractTokenizer}var hasRequiredReadStreamTokenizer;function requireReadStreamTokenizer(){if(hasRequiredReadStreamTokenizer)return ReadStreamTokenizer;hasRequiredReadStreamTokenizer=1,Object.defineProperty(ReadStreamTokenizer,"__esModule",{value:!0}),ReadStreamTokenizer.ReadStreamTokenizer=void 0;const e=requireAbstractTokenizer(),t=requireLib$3(),n=256e3;let r=class extends e.AbstractTokenizer{constructor(s,o){super(o),this.streamReader=new t.StreamReader(s)}async getFileInfo(){return this.fileInfo}async readBuffer(s,o){const a=this.normalizeOptions(s,o),l=a.position-this.position;if(l>0)return await this.ignore(l),this.readBuffer(s,o);if(l<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(a.length===0)return 0;const u=await this.streamReader.read(s,a.offset,a.length);if(this.position+=u,(!o||!o.mayBeLess)&&u<a.length)throw new t.EndOfStreamError;return u}async peekBuffer(s,o){const a=this.normalizeOptions(s,o);let l=0;if(a.position){const u=a.position-this.position;if(u>0){const c=new Uint8Array(a.length+u);return l=await this.peekBuffer(c,{mayBeLess:a.mayBeLess}),s.set(c.subarray(u),a.offset),l-u}else if(u<0)throw new Error("Cannot peek from a negative offset in a stream")}if(a.length>0){try{l=await this.streamReader.peek(s,a.offset,a.length)}catch(u){if(o&&o.mayBeLess&&u instanceof t.EndOfStreamError)return 0;throw u}if(!a.mayBeLess&&l<a.length)throw new t.EndOfStreamError}return l}async ignore(s){const o=Math.min(n,s),a=new Uint8Array(o);let l=0;for(;l<s;){const u=s-l,c=await this.readBuffer(a,{length:Math.min(o,u)});if(c<0)return c;l+=c}return l}};return ReadStreamTokenizer.ReadStreamTokenizer=r,ReadStreamTokenizer}var BufferTokenizer={},hasRequiredBufferTokenizer;function requireBufferTokenizer(){if(hasRequiredBufferTokenizer)return BufferTokenizer;hasRequiredBufferTokenizer=1,Object.defineProperty(BufferTokenizer,"__esModule",{value:!0}),BufferTokenizer.BufferTokenizer=void 0;const e=requireLib$3(),t=requireAbstractTokenizer();let n=class extends t.AbstractTokenizer{constructor(i,s){super(s),this.uint8Array=i,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:i.length}async readBuffer(i,s){if(s&&s.position){if(s.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=s.position}const o=await this.peekBuffer(i,s);return this.position+=o,o}async peekBuffer(i,s){const o=this.normalizeOptions(i,s),a=Math.min(this.uint8Array.length-o.position,o.length);if(!o.mayBeLess&&a<o.length)throw new e.EndOfStreamError;return i.set(this.uint8Array.subarray(o.position,o.position+a),o.offset),a}async close(){}};return BufferTokenizer.BufferTokenizer=n,BufferTokenizer}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const t=requireReadStreamTokenizer(),n=requireBufferTokenizer();var r=requireLib$3();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});function i(o,a){return a=a||{},new t.ReadStreamTokenizer(o,a)}e.fromStream=i;function s(o,a){return new n.BufferTokenizer(o,a)}e.fromBuffer=s}(core$1)),core$1}var ParserFactory={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(e,t,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,f=n?i-1:0,m=n?-1:1,d=e[t+f];for(f+=m,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=s*256+e[t+f],f+=m,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+e[t+f],f+=m,c-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(d?-1:1)*o*Math.pow(2,s-r)},ieee754.write=function(e,t,n,r,i,s){var o,a,l,u=s*8-i-1,c=(1<<u)-1,f=c>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,T=r?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?t+=m/l:t+=m*Math.pow(2,1-f),t*l>=2&&(o++,l/=2),o+f>=c?(a=0,o=c):o+f>=1?(a=(t*l-1)*Math.pow(2,i),o=o+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=a&255,d+=T,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[n+d]=o&255,d+=T,o/=256,u-=8);e[n+d-T]|=_*128}),ieee754}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AnsiStringType=e.StringType=e.BufferType=e.Uint8ArrayType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const t=requireIeee754();function n(l){return new DataView(l.buffer,l.byteOffset)}e.UINT8={len:1,get(l,u){return n(l).getUint8(u)},put(l,u,c){return n(l).setUint8(u,c),u+1}},e.UINT16_LE={len:2,get(l,u){return n(l).getUint16(u,!0)},put(l,u,c){return n(l).setUint16(u,c,!0),u+2}},e.UINT16_BE={len:2,get(l,u){return n(l).getUint16(u)},put(l,u,c){return n(l).setUint16(u,c),u+2}},e.UINT24_LE={len:3,get(l,u){const c=n(l);return c.getUint8(u)+(c.getUint16(u+1,!0)<<8)},put(l,u,c){const f=n(l);return f.setUint8(u,c&255),f.setUint16(u+1,c>>8,!0),u+3}},e.UINT24_BE={len:3,get(l,u){const c=n(l);return(c.getUint16(u)<<8)+c.getUint8(u+2)},put(l,u,c){const f=n(l);return f.setUint16(u,c>>8),f.setUint8(u+2,c&255),u+3}},e.UINT32_LE={len:4,get(l,u){return n(l).getUint32(u,!0)},put(l,u,c){return n(l).setUint32(u,c,!0),u+4}},e.UINT32_BE={len:4,get(l,u){return n(l).getUint32(u)},put(l,u,c){return n(l).setUint32(u,c),u+4}},e.INT8={len:1,get(l,u){return n(l).getInt8(u)},put(l,u,c){return n(l).setInt8(u,c),u+1}},e.INT16_BE={len:2,get(l,u){return n(l).getInt16(u)},put(l,u,c){return n(l).setInt16(u,c),u+2}},e.INT16_LE={len:2,get(l,u){return n(l).getInt16(u,!0)},put(l,u,c){return n(l).setInt16(u,c,!0),u+2}},e.INT24_LE={len:3,get(l,u){const c=e.UINT24_LE.get(l,u);return c>8388607?c-16777216:c},put(l,u,c){const f=n(l);return f.setUint8(u,c&255),f.setUint16(u+1,c>>8,!0),u+3}},e.INT24_BE={len:3,get(l,u){const c=e.UINT24_BE.get(l,u);return c>8388607?c-16777216:c},put(l,u,c){const f=n(l);return f.setUint16(u,c>>8),f.setUint8(u+2,c&255),u+3}},e.INT32_BE={len:4,get(l,u){return n(l).getInt32(u)},put(l,u,c){return n(l).setInt32(u,c),u+4}},e.INT32_LE={len:4,get(l,u){return n(l).getInt32(u,!0)},put(l,u,c){return n(l).setInt32(u,c,!0),u+4}},e.UINT64_LE={len:8,get(l,u){return n(l).getBigUint64(u,!0)},put(l,u,c){return n(l).setBigUint64(u,c,!0),u+8}},e.INT64_LE={len:8,get(l,u){return n(l).getBigInt64(u,!0)},put(l,u,c){return n(l).setBigInt64(u,c,!0),u+8}},e.UINT64_BE={len:8,get(l,u){return n(l).getBigUint64(u)},put(l,u,c){return n(l).setBigUint64(u,c),u+8}},e.INT64_BE={len:8,get(l,u){return n(l).getBigInt64(u)},put(l,u,c){return n(l).setBigInt64(u,c),u+8}},e.Float16_BE={len:2,get(l,u){return t.read(l,u,!1,10,this.len)},put(l,u,c){return t.write(l,c,u,!1,10,this.len),u+this.len}},e.Float16_LE={len:2,get(l,u){return t.read(l,u,!0,10,this.len)},put(l,u,c){return t.write(l,c,u,!0,10,this.len),u+this.len}},e.Float32_BE={len:4,get(l,u){return n(l).getFloat32(u)},put(l,u,c){return n(l).setFloat32(u,c),u+4}},e.Float32_LE={len:4,get(l,u){return n(l).getFloat32(u,!0)},put(l,u,c){return n(l).setFloat32(u,c,!0),u+4}},e.Float64_BE={len:8,get(l,u){return n(l).getFloat64(u)},put(l,u,c){return n(l).setFloat64(u,c),u+8}},e.Float64_LE={len:8,get(l,u){return n(l).getFloat64(u,!0)},put(l,u,c){return n(l).setFloat64(u,c,!0),u+8}},e.Float80_BE={len:10,get(l,u){return t.read(l,u,!1,63,this.len)},put(l,u,c){return t.write(l,c,u,!1,63,this.len),u+this.len}},e.Float80_LE={len:10,get(l,u){return t.read(l,u,!0,63,this.len)},put(l,u,c){return t.write(l,c,u,!0,63,this.len),u+this.len}};class r{constructor(u){this.len=u}get(u,c){}}e.IgnoreType=r;class i{constructor(u){this.len=u}get(u,c){return u.subarray(c,c+this.len)}}e.Uint8ArrayType=i;class s{constructor(u){this.len=u}get(u,c){return Buffer.from(u.subarray(c,c+this.len))}}e.BufferType=s;class o{constructor(u,c){this.len=u,this.encoding=c}get(u,c){return Buffer.from(u).toString(this.encoding,c,c+this.len)}}e.StringType=o;class a{constructor(u){this.len=u}static decode(u,c,f){let m="";for(let d=c;d<f;++d)m+=a.codePointToString(a.singleByteDecoder(u[d]));return m}static inRange(u,c,f){return c<=u&&u<=f}static codePointToString(u){return u<=65535?String.fromCharCode(u):(u-=65536,String.fromCharCode((u>>10)+55296,(u&1023)+56320))}static singleByteDecoder(u){if(a.inRange(u,0,127))return u;const c=a.windows1252[u-128];if(c===null)throw Error("invaliding encoding");return c}get(u,c=0){return a.decode(u,c,c+this.len)}}e.AnsiStringType=a,a.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}(lib$1)),lib$1}var util$1={},hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$1.stringToBytes=e=>[...e].map(t=>t.charCodeAt(0)),util$1.tarHeaderChecksumMatches=(e,t=0)=>{const n=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(n))return!1;let r=8*32;for(let i=t;i<t+148;i++)r+=e[i];for(let i=t+156;i<t+512;i++)r+=e[i];return n===r},util$1.uint32SyncSafeToken={get:(e,t)=>e[t+3]&127|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4}),util$1}var supported,hasRequiredSupported;function requireSupported(){return hasRequiredSupported||(hasRequiredSupported=1,supported={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}),supported}var core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;const Token=requireLib$2(),strtok3=requireCore$2(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=requireUtil$2(),supported=requireSupported(),minimumBytes=4100;async function fromStream(e){const t=await strtok3.fromStream(e);try{return await fromTokenizer(t)}finally{await t.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Buffer?e:Buffer.from(e);if(!(t&&t.length>1))return;const n=strtok3.fromBuffer(t);return fromTokenizer(n)}function _check(e,t,n){n={offset:0,...n};for(const[r,i]of t.entries())if(n.mask){if(i!==(n.mask[r]&e[r+n.offset]))return!1}else if(i!==e[r+n.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(t){if(!(t instanceof strtok3.EndOfStreamError))throw t}}async function _fromTokenizer(e){let t=Buffer.alloc(minimumBytes);const n=12,r=(s,o)=>_check(t,s,o),i=(s,o)=>r(stringToBytes(s),o);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(t,{length:n,mayBeLess:!0}),r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(r([37,33]))return await e.peekBuffer(t,{length:24,mayBeLess:!0}),i("PS-Adobe-",{offset:2})&&i(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(i("ID3")){await e.ignore(6);const s=await e.readToken(uint32SyncSafeToken);return e.position+s>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(s),fromTokenizer(e))}if(i("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((t[0]===67||t[0]===70)&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(i("FLIF"))return{ext:"flif",mime:"image/flif"};if(i("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(i("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(i("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(i("FORM"))return{ext:"aif",mime:"audio/aiff"};if(i("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(r([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(t,{length:30});const s={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(s.filename=await e.readToken(new Token.StringType(s.filenameLength,"utf-8")),await e.ignore(s.extraFieldLength),s.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(s.filename.endsWith(".rels")||s.filename.endsWith(".xml"))switch(s.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(s.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(s.filename.startsWith("3D/")&&s.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(s.filename==="mimetype"&&s.compressedSize===s.uncompressedSize)switch(await e.readToken(new Token.StringType(s.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(s.compressedSize===0){let o=-1;for(;o<0&&e.position<e.fileInfo.size;)await e.peekBuffer(t,{mayBeLess:!0}),o=t.indexOf("504B0304",0,"hex"),await e.ignore(o>=0?o:t.length)}else await e.ignore(s.compressedSize)}}catch(s){if(!(s instanceof strtok3.EndOfStreamError))throw s}return{ext:"zip",mime:"application/zip"}}if(i("OggS")){await e.ignore(28);const s=Buffer.alloc(8);return await e.readBuffer(s),_check(s,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(s,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(s,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(s,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(s,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(s,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(r([80,75])&&(t[2]===3||t[2]===5||t[2]===7)&&(t[3]===4||t[3]===6||t[3]===8))return{ext:"zip",mime:"application/zip"};if(i("ftyp",{offset:4})&&(t[8]&96)!==0){const s=t.toString("binary",8,12).replace("\0"," ").trim();switch(s){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return s.startsWith("3g")?s.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(i("MThd"))return{ext:"mid",mime:"audio/midi"};if(i("wOFF")&&(r([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(i("wOF2")&&(r([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([212,195,178,161])||r([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(i("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(i("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(i("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(i("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(i("%PDF")){await e.ignore(1350);const s=10*1024*1024,o=Buffer.alloc(Math.min(s,e.fileInfo.size));return await e.readBuffer(o,{mayBeLess:!0}),o.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([73,73,42,0]))return i("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:r([28,0,254,0],{offset:8})||r([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:r([8,0,0,0],{offset:4})&&(r([45,0,254,0],{offset:8})||r([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),await e.peekBuffer(t),(r([16,251,134,1],{offset:4})||r([8,0,0,0],{offset:4}))&&r([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(i("MAC "))return{ext:"ape",mime:"audio/ape"};if(r([26,69,223,163])){async function s(){const c=await e.peekNumber(Token.UINT8);let f=128,m=0;for(;(c&f)===0&&f!==0;)++m,f>>=1;const d=Buffer.alloc(m+1);return await e.readBuffer(d),d}async function o(){const c=await s(),f=await s();f[0]^=128>>f.length-1;const m=Math.min(6,f.length);return{id:c.readUIntBE(0,c.length),len:f.readUIntBE(f.length-m,m)}}async function a(c,f){for(;f>0;){const m=await o();if(m.id===17026)return e.readToken(new Token.StringType(m.len,"utf-8"));await e.ignore(m.len),--f}}const l=await o();switch(await a(1,l.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(i("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(i("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(i("MSCF")||i("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(r([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(i("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(i("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(i("IMPM"))return{ext:"it",mime:"audio/x-it"};if(i("-lh0-",{offset:2})||i("-lh1-",{offset:2})||i("-lh2-",{offset:2})||i("-lh3-",{offset:2})||i("-lh4-",{offset:2})||i("-lh5-",{offset:2})||i("-lh6-",{offset:2})||i("-lh7-",{offset:2})||i("-lzs-",{offset:2})||i("-lz4-",{offset:2})||i("-lz5-",{offset:2})||i("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(r([0,0,1,186])){if(r([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(r([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(i("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(i("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([82,97,114,33,26,7])&&(t[6]===0||t[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(i("solid "))return{ext:"stl",mime:"model/stl"};if(i("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(i("!<arch>"))return await e.ignore(8),await e.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(r([137,80,78,71,13,10,26,10])){await e.ignore(8);async function s(){return{length:await e.readToken(Token.INT32_BE),type:await e.readToken(new Token.StringType(4,"binary"))}}do{const o=await s();if(o.length<0)return;switch(o.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(o.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(r([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(r([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(r([102,114,101,101],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(i("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(r([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(r([48,38,178,117,142,102,207,17,166,217])){async function s(){const o=Buffer.alloc(16);return await e.readBuffer(o),{id:o,size:Number(await e.readToken(Token.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const o=await s();let a=o.size-24;if(_check(o.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const l=Buffer.alloc(16);if(a-=await e.readBuffer(l),_check(l,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(l,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(a)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((r([126,16,4])||r([126,24,4]))&&r([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(r([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(r([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(r([255,10])||r([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(t,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),i("BEGIN:")){if(i("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(i("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(i("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(i("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(i("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(r([4,0,0,0])&&t.length>=16){const s=t.readUInt32LE(12);if(s>12&&t.length>=s+16)try{const o=t.slice(16,s+16).toString();if(JSON.parse(o).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(i("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(r([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(r([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(t,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(r([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(i("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&r([255,224],{offset:0,mask:[255,224]})){if(r([16],{offset:1,mask:[22]}))return r([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(r([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const e=new stream.PassThrough;let t;stream.pipeline?t=stream.pipeline(readableStream,e,()=>{}):t=readableStream.pipe(e);const n=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const r=await fromBuffer(n);e.fileType=r}catch(r){reject(r)}resolve(t)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};return Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),core=fileType,core}var contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredContentType;function requireContentType(){if(hasRequiredContentType)return contentType;hasRequiredContentType=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=o,contentType.parse=a;function o(f){if(!f||typeof f!="object")throw new TypeError("argument obj is required");var m=f.parameters,d=f.type;if(!d||!s.test(d))throw new TypeError("invalid type");var T=d;if(m&&typeof m=="object")for(var _,x=Object.keys(m).sort(),v=0;v<x.length;v++){if(_=x[v],!n.test(_))throw new TypeError("invalid parameter name");T+="; "+_+"="+u(m[_])}return T}function a(f){if(!f)throw new TypeError("argument string is required");var m=typeof f=="object"?l(f):f;if(typeof m!="string")throw new TypeError("argument string is required to be a string");var d=m.indexOf(";"),T=d!==-1?m.slice(0,d).trim():m.trim();if(!s.test(T))throw new TypeError("invalid media type");var _=new c(T.toLowerCase());if(d!==-1){var x,v,A;for(e.lastIndex=d;v=e.exec(m);){if(v.index!==d)throw new TypeError("invalid parameter format");d+=v[0].length,x=v[1].toLowerCase(),A=v[2],A.charCodeAt(0)===34&&(A=A.slice(1,-1),A.indexOf("\\")!==-1&&(A=A.replace(r,"$1"))),_.parameters[x]=A}if(d!==m.length)throw new TypeError("invalid parameter format")}return _}function l(f){var m;if(typeof f.getHeader=="function"?m=f.getHeader("content-type"):typeof f.headers=="object"&&(m=f.headers&&f.headers["content-type"]),typeof m!="string")throw new TypeError("content-type header is missing from object");return m}function u(f){var m=String(f);if(n.test(m))return m;if(m.length>0&&!t.test(m))throw new TypeError("invalid parameter value");return'"'+m.replace(i,"\\$1")+'"'}function c(f){this.parameters=Object.create(null),this.type=f}return contentType}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMediaTyper;function requireMediaTyper(){if(hasRequiredMediaTyper)return mediaTyper;hasRequiredMediaTyper=1;var e=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,t=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,n=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=r,mediaTyper.parse=s,mediaTyper.test=i;function r(a){if(!a||typeof a!="object")throw new TypeError("argument obj is required");var l=a.subtype,u=a.suffix,c=a.type;if(!c||!t.test(c))throw new TypeError("invalid type");if(!l||!e.test(l))throw new TypeError("invalid subtype");var f=c+"/"+l;if(u){if(!t.test(u))throw new TypeError("invalid suffix");f+="+"+u}return f}function i(a){if(!a)throw new TypeError("argument string is required");if(typeof a!="string")throw new TypeError("argument string is required to be a string");return n.test(a.toLowerCase())}function s(a){if(!a)throw new TypeError("argument string is required");if(typeof a!="string")throw new TypeError("argument string is required to be a string");var l=n.exec(a.toLowerCase());if(!l)throw new TypeError("invalid media type");var u=l[1],c=l[2],f,m=c.lastIndexOf("+");return m!==-1&&(f=c.substr(m+1),c=c.substr(0,m)),new o(u,c,f)}function o(a,l,u){this.type=a,this.subtype=l,this.suffix=u}return mediaTyper}var MetadataCollector={},type={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=e.TargetType=e.DataType=void 0,function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"}(e.DataType||(e.DataType={})),function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"}(e.TargetType||(e.TargetType={})),function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"}(e.TrackType||(e.TrackType={}))}(types)),types}var hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=void 0;var t=requireTypes();Object.defineProperty(e,"TrackType",{enumerable:!0,get:function(){return t.TrackType}})}(type)),type}var GenericTagTypes={},hasRequiredGenericTagTypes;function requireGenericTagTypes(){return hasRequiredGenericTagTypes||(hasRequiredGenericTagTypes=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUnique=e.isSingleton=e.commonTags=void 0,e.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function t(r){return e.commonTags.hasOwnProperty(r)&&!e.commonTags[r].multiple}e.isSingleton=t;function n(r){return!e.commonTags[r].multiple||e.commonTags[r].unique}e.isUnique=n}(GenericTagTypes)),GenericTagTypes}var CombinedTagMapper={},ID3v1TagMap={},GenericTagMapper={},hasRequiredGenericTagMapper;function requireGenericTagMapper(){if(hasRequiredGenericTagMapper)return GenericTagMapper;hasRequiredGenericTagMapper=1,Object.defineProperty(GenericTagMapper,"__esModule",{value:!0}),GenericTagMapper.CommonTagMapper=void 0;class e{static toIntOrNull(n){const r=parseInt(n,10);return isNaN(r)?null:r}static normalizeTrack(n){const r=n.toString().split("/");return{no:parseInt(r[0],10)||null,of:parseInt(r[1],10)||null}}constructor(n,r){this.tagTypes=n,this.tagMap=r}mapGenericTag(n,r){n={id:n.id,value:n.value},this.postMap(n,r);const i=this.getCommonName(n.id);return i?{id:i,value:n.value}:null}getCommonName(n){return this.tagMap[n]}postMap(n,r){}}return e.maxRatingScore=1,GenericTagMapper.CommonTagMapper=e,GenericTagMapper}var hasRequiredID3v1TagMap;function requireID3v1TagMap(){if(hasRequiredID3v1TagMap)return ID3v1TagMap;hasRequiredID3v1TagMap=1,Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0}),ID3v1TagMap.ID3v1TagMapper=void 0;const e=requireGenericTagMapper(),t={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class n extends e.CommonTagMapper{constructor(){super(["ID3v1"],t)}}return ID3v1TagMap.ID3v1TagMapper=n,ID3v1TagMap}var ID3v24TagMapper={},CaseInsensitiveTagMap={},hasRequiredCaseInsensitiveTagMap;function requireCaseInsensitiveTagMap(){if(hasRequiredCaseInsensitiveTagMap)return CaseInsensitiveTagMap;hasRequiredCaseInsensitiveTagMap=1,Object.defineProperty(CaseInsensitiveTagMap,"__esModule",{value:!0}),CaseInsensitiveTagMap.CaseInsensitiveTagMap=void 0;const e=requireGenericTagMapper();let t=class extends e.CommonTagMapper{constructor(r,i){const s={};for(const o of Object.keys(i))s[o.toUpperCase()]=i[o];super(r,s)}getCommonName(r){return this.tagMap[r.toUpperCase()]}};return CaseInsensitiveTagMap.CaseInsensitiveTagMap=t,CaseInsensitiveTagMap}var Util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return Util;hasRequiredUtil$1=1,Object.defineProperty(Util,"__esModule",{value:!0}),Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function e(m,d,T){return(m[d]&1<<T)!==0}Util.getBit=e;function t(m,d,T,_){let x=d;if(_==="utf16le"){for(;m[x]!==0||m[x+1]!==0;){if(x>=T)return T;x+=2}return x}else{for(;m[x]!==0;){if(x>=T)return T;x++}return x}}Util.findZero=t;function n(m){const d=m.indexOf("\0");return d===-1?m:m.substr(0,d)}Util.trimRightNull=n;function r(m){const d=m.length;if((d&1)!==0)throw new Error("Buffer length must be even");for(let T=0;T<d;T+=2){const _=m[T];m[T]=m[T+1],m[T+1]=_}return m}function i(m,d){if(m[0]===255&&m[1]===254)return i(m.subarray(2),d);if(d==="utf16le"&&m[0]===254&&m[1]===255){if((m.length&1)!==0)throw new Error("Expected even number of octets for 16-bit unicode string");return i(r(m),d)}return Buffer.from(m).toString(d)}Util.decodeString=i;function s(m){return m=m.replace(/^\x00+/g,""),m=m.replace(/\x00+$/g,""),m}Util.stripNulls=s;function o(m,d,T,_){const x=d+~~(T/8),v=T%8;let A=m[x];A&=255>>v;const B=8-v,O=_-B;return O<0?A>>=8-v-_:O>0&&(A<<=O,A|=o(m,d,T+B,O)),A}Util.getBitAllignedNumber=o;function a(m,d,T){return o(m,d,T,1)===1}Util.isBitSet=a;function l(m){const d=[];for(let T=0,_=m.length;T<_;T++){const x=Number(m.charCodeAt(T)).toString(16);d.push(x.length===1?"0"+x:x)}return d.join(" ")}Util.a2hex=l;function u(m){return 10*Math.log10(m)}Util.ratioToDb=u;function c(m){return Math.pow(10,m/10)}Util.dbToRatio=c;function f(m){const d=m.split(" ").map(T=>T.trim().toLowerCase());if(d.length>=1){const T=parseFloat(d[0]);return d.length===2&&d[1]==="db"?{dB:T,ratio:c(T)}:{dB:u(T),ratio:T}}}return Util.toRatio=f,Util}var hasRequiredID3v24TagMapper;function requireID3v24TagMapper(){if(hasRequiredID3v24TagMapper)return ID3v24TagMapper;hasRequiredID3v24TagMapper=1,Object.defineProperty(ID3v24TagMapper,"__esModule",{value:!0}),ID3v24TagMapper.ID3v24TagMapper=void 0;const e=requireGenericTagMapper(),t=requireCaseInsensitiveTagMap(),n=requireUtil$1(),r={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};let i=class rt extends t.CaseInsensitiveTagMap{static toRating(o){return{source:o.email,rating:o.rating>0?(o.rating-1)/254*e.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],r)}postMap(o,a){switch(o.id){case"UFID":o.value.owner_identifier==="http://musicbrainz.org"&&(o.id+=":"+o.value.owner_identifier,o.value=n.decodeString(o.value.identifier,"latin1"));break;case"PRIV":switch(o.value.owner_identifier){case"AverageLevel":case"PeakValue":o.id+=":"+o.value.owner_identifier,o.value=o.value.data.length===4?o.value.data.readUInt32LE(0):null,o.value===null&&a.addWarning("Failed to parse PRIV:PeakValue");break;default:a.addWarning(`Unknown PRIV owner-identifier: ${o.value.owner_identifier}`)}break;case"COMM":o.value=o.value?o.value.text:null;break;case"POPM":o.value=rt.toRating(o.value);break}}};return ID3v24TagMapper.ID3v24TagMapper=i,ID3v24TagMapper}var AsfTagMapper={},hasRequiredAsfTagMapper;function requireAsfTagMapper(){if(hasRequiredAsfTagMapper)return AsfTagMapper;hasRequiredAsfTagMapper=1,Object.defineProperty(AsfTagMapper,"__esModule",{value:!0}),AsfTagMapper.AsfTagMapper=void 0;const e=requireGenericTagMapper(),t={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};let n=class nt extends e.CommonTagMapper{static toRating(i){return{rating:parseFloat(i+1)/5}}constructor(){super(["asf"],t)}postMap(i){switch(i.id){case"WM/SharedUserRating":const s=i.id.split(":");i.value=nt.toRating(i.value),i.id=s[0];break}}};return AsfTagMapper.AsfTagMapper=n,AsfTagMapper}var ID3v22TagMapper={},hasRequiredID3v22TagMapper;function requireID3v22TagMapper(){return hasRequiredID3v22TagMapper||(hasRequiredID3v22TagMapper=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ID3v22TagMapper=e.id3v22TagMap=void 0;const t=requireCaseInsensitiveTagMap();e.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class n extends t.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],e.id3v22TagMap)}}e.ID3v22TagMapper=n}(ID3v22TagMapper)),ID3v22TagMapper}var APEv2TagMapper={},hasRequiredAPEv2TagMapper;function requireAPEv2TagMapper(){if(hasRequiredAPEv2TagMapper)return APEv2TagMapper;hasRequiredAPEv2TagMapper=1,Object.defineProperty(APEv2TagMapper,"__esModule",{value:!0}),APEv2TagMapper.APEv2TagMapper=void 0;const e=requireCaseInsensitiveTagMap(),t={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};let n=class extends e.CaseInsensitiveTagMap{constructor(){super(["APEv2"],t)}};return APEv2TagMapper.APEv2TagMapper=n,APEv2TagMapper}var MP4TagMapper={},hasRequiredMP4TagMapper;function requireMP4TagMapper(){return hasRequiredMP4TagMapper||(hasRequiredMP4TagMapper=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MP4TagMapper=e.tagType=void 0;const t=requireCaseInsensitiveTagMap(),n={"©nam":"title","©ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","©alb":"album","©day":"date","©cmt":"comment","©com":"comment",trkn:"track",disk:"disk","©gen":"genre",covr:"picture","©wrt":"composer","©lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","©grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","©cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","©too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","©mvn":"movement","©mvi":"movementIndex","©mvc":"movementTotal","©wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};e.tagType="iTunes";class r extends t.CaseInsensitiveTagMap{constructor(){super([e.tagType],n)}postMap(s,o){switch(s.id){case"rate":s.value={source:void 0,rating:parseFloat(s.value)/100};break}}}e.MP4TagMapper=r}(MP4TagMapper)),MP4TagMapper}var VorbisTagMapper={},hasRequiredVorbisTagMapper;function requireVorbisTagMapper(){if(hasRequiredVorbisTagMapper)return VorbisTagMapper;hasRequiredVorbisTagMapper=1,Object.defineProperty(VorbisTagMapper,"__esModule",{value:!0}),VorbisTagMapper.VorbisTagMapper=void 0;const e=requireGenericTagMapper(),t={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};let n=class He extends e.CommonTagMapper{static toRating(i,s,o){return{source:i&&i.toLowerCase(),rating:parseFloat(s)/o*e.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],t)}postMap(i){if(i.id==="RATING")i.value=He.toRating(void 0,i.value,100);else if(i.id.indexOf("RATING:")===0){const s=i.id.split(":");i.value=He.toRating(s[1],i.value,1),i.id=s[0]}}};return VorbisTagMapper.VorbisTagMapper=n,VorbisTagMapper}var RiffInfoTagMap={},hasRequiredRiffInfoTagMap;function requireRiffInfoTagMap(){return hasRequiredRiffInfoTagMap||(hasRequiredRiffInfoTagMap=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RiffInfoTagMapper=e.riffInfoTagMap=void 0;const t=requireGenericTagMapper();e.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class n extends t.CommonTagMapper{constructor(){super(["exif"],e.riffInfoTagMap)}}e.RiffInfoTagMapper=n}(RiffInfoTagMap)),RiffInfoTagMap}var MatroskaTagMapper={},hasRequiredMatroskaTagMapper;function requireMatroskaTagMapper(){if(hasRequiredMatroskaTagMapper)return MatroskaTagMapper;hasRequiredMatroskaTagMapper=1,Object.defineProperty(MatroskaTagMapper,"__esModule",{value:!0}),MatroskaTagMapper.MatroskaTagMapper=void 0;const e=requireCaseInsensitiveTagMap(),t={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};let n=class extends e.CaseInsensitiveTagMap{constructor(){super(["matroska"],t)}};return MatroskaTagMapper.MatroskaTagMapper=n,MatroskaTagMapper}var AiffTagMap={},hasRequiredAiffTagMap;function requireAiffTagMap(){if(hasRequiredAiffTagMap)return AiffTagMap;hasRequiredAiffTagMap=1,Object.defineProperty(AiffTagMap,"__esModule",{value:!0}),AiffTagMap.AiffTagMapper=void 0;const e=requireGenericTagMapper(),t={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class n extends e.CommonTagMapper{constructor(){super(["AIFF"],t)}}return AiffTagMap.AiffTagMapper=n,AiffTagMap}var hasRequiredCombinedTagMapper;function requireCombinedTagMapper(){if(hasRequiredCombinedTagMapper)return CombinedTagMapper;hasRequiredCombinedTagMapper=1,Object.defineProperty(CombinedTagMapper,"__esModule",{value:!0}),CombinedTagMapper.CombinedTagMapper=void 0;const e=requireID3v1TagMap(),t=requireID3v24TagMapper(),n=requireAsfTagMapper(),r=requireID3v22TagMapper(),i=requireAPEv2TagMapper(),s=requireMP4TagMapper(),o=requireVorbisTagMapper(),a=requireRiffInfoTagMap(),l=requireMatroskaTagMapper(),u=requireAiffTagMap();let c=class{constructor(){this.tagMappers={},[new e.ID3v1TagMapper,new r.ID3v22TagMapper,new t.ID3v24TagMapper,new s.MP4TagMapper,new s.MP4TagMapper,new o.VorbisTagMapper,new i.APEv2TagMapper,new n.AsfTagMapper,new a.RiffInfoTagMapper,new l.MatroskaTagMapper,new u.AiffTagMapper].forEach(m=>{this.registerTagMapper(m)})}mapTag(m,d,T){if(this.tagMappers[m])return this.tagMappers[m].mapGenericTag(d,T);throw new Error("No generic tag mapper defined for tag-format: "+m)}registerTagMapper(m){for(const d of m.tagTypes)this.tagMappers[d]=m}};return CombinedTagMapper.CombinedTagMapper=c,CombinedTagMapper}var hasRequiredMetadataCollector;function requireMetadataCollector(){if(hasRequiredMetadataCollector)return MetadataCollector;hasRequiredMetadataCollector=1,Object.defineProperty(MetadataCollector,"__esModule",{value:!0}),MetadataCollector.joinArtists=MetadataCollector.MetadataCollector=void 0;const e=requireType(),t=requireBrowser$3(),n=requireGenericTagTypes(),r=requireCombinedTagMapper(),i=requireGenericTagMapper(),s=requireUtil$1(),o=requireCore$1(),a=(0,t.default)("music-metadata:collector"),l=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];let u=class{constructor(m){this.opts=m,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new r.CombinedTagMapper;let d=1;for(const T of l)this.originPriority[T]=d++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(m){a(`streamInfo: type=${e.TrackType[m.type]}, codec=${m.codecName}`),this.format.trackInfo.push(m)}setFormat(m,d){a(`format: ${m} = ${d}`),this.format[m]=d,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:m,value:d}})}addTag(m,d,T){a(`tag ${m}.${d} = ${T}`),this.native[m]||(this.format.tagTypes.push(m),this.native[m]=[]),this.native[m].push({id:d,value:T}),this.toCommon(m,d,T)}addWarning(m){this.quality.warnings.push({message:m})}postMap(m,d){switch(d.id){case"artist":if(this.commonOrigin.artist===this.originPriority[m])return this.postMap("artificial",{id:"artists",value:d.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:d.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(d.value)===-1)){const v=(this.common.artists||[]).concat([d.value]),B={id:"artist",value:c(v)};this.setGenericTag("artificial",B)}break;case"picture":this.postFixPicture(d.value).then(v=>{v!==null&&(d.value=v,this.setGenericTag(m,d))});return;case"totaltracks":this.common.track.of=i.CommonTagMapper.toIntOrNull(d.value);return;case"totaldiscs":this.common.disk.of=i.CommonTagMapper.toIntOrNull(d.value);return;case"movementTotal":this.common.movementIndex.of=i.CommonTagMapper.toIntOrNull(d.value);return;case"track":case"disk":case"movementIndex":const T=this.common[d.id].of;this.common[d.id]=i.CommonTagMapper.normalizeTrack(d.value),this.common[d.id].of=T??this.common[d.id].of;return;case"bpm":case"year":case"originalyear":d.value=parseInt(d.value,10);break;case"date":const _=parseInt(d.value.substr(0,4),10);isNaN(_)||(this.common.year=_);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":d.value=typeof d.value=="string"?parseInt(d.value,10):d.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":d.value=(0,s.toRatio)(d.value);break;case"replaygain_track_minmax":d.value=d.value.split(",").map(v=>parseInt(v,10));break;case"replaygain_undo":const x=d.value.split(",").map(v=>parseInt(v,10));d.value={leftChannel:x[0],rightChannel:x[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":d.value=d.value==="1"||d.value===1;break;case"isrc":if(this.common[d.id]&&this.common[d.id].indexOf(d.value)!==-1)return;break}d.value!==null&&this.setGenericTag(m,d)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(m){if(m.data&&m.data.length>0){if(!m.format){const d=await o.fromBuffer(m.data);if(d)m.format=d.mime;else return null}switch(m.format=m.format.toLocaleLowerCase(),m.format){case"image/jpg":m.format="image/jpeg"}return m}return this.addWarning("Empty picture tag found"),null}toCommon(m,d,T){const _={id:d,value:T},x=this.tagMapper.mapTag(m,_,this);x&&this.postMap(m,x)}setGenericTag(m,d){a(`common.${d.id} = ${d.value}`);const T=this.commonOrigin[d.id]||1e3,_=this.originPriority[m];if((0,n.isSingleton)(d.id))if(_<=T)this.common[d.id]=d.value,this.commonOrigin[d.id]=_;else return a(`Ignore native tag (singleton): ${m}.${d.id} = ${d.value}`);else if(_===T)!(0,n.isUnique)(d.id)||this.common[d.id].indexOf(d.value)===-1?this.common[d.id].push(d.value):a(`Ignore duplicate value: ${m}.${d.id} = ${d.value}`);else if(_<T)this.common[d.id]=[d.value],this.commonOrigin[d.id]=_;else return a(`Ignore native tag (list): ${m}.${d.id} = ${d.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:d.id,value:d.value}})}};MetadataCollector.MetadataCollector=u;function c(f){return f.length>2?f.slice(0,f.length-1).join(", ")+" & "+f[f.length-1]:f.join(" & ")}return MetadataCollector.joinArtists=c,MetadataCollector}var AiffParser={},ID3v2Parser={},FrameParser={},ID3v2Token={},hasRequiredID3v2Token;function requireID3v2Token(){return hasRequiredID3v2Token||(hasRequiredID3v2Token=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextEncodingToken=e.ExtendedHeader=e.ID3v2Header=e.UINT32SYNCSAFE=e.AttachedPictureType=void 0;const t=requireLib$2(),n=requireUtil$1();(function(r){r[r.Other=0]="Other",r[r["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",r[r["Other file icon"]=2]="Other file icon",r[r["Cover (front)"]=3]="Cover (front)",r[r["Cover (back)"]=4]="Cover (back)",r[r["Leaflet page"]=5]="Leaflet page",r[r["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",r[r["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",r[r["Artist/performer"]=8]="Artist/performer",r[r.Conductor=9]="Conductor",r[r["Band/Orchestra"]=10]="Band/Orchestra",r[r.Composer=11]="Composer",r[r["Lyricist/text writer"]=12]="Lyricist/text writer",r[r["Recording Location"]=13]="Recording Location",r[r["During recording"]=14]="During recording",r[r["During performance"]=15]="During performance",r[r["Movie/video screen capture"]=16]="Movie/video screen capture",r[r["A bright coloured fish"]=17]="A bright coloured fish",r[r.Illustration=18]="Illustration",r[r["Band/artist logotype"]=19]="Band/artist logotype",r[r["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(e.AttachedPictureType||(e.AttachedPictureType={})),e.UINT32SYNCSAFE={get:(r,i)=>r[i+3]&127|r[i+2]<<7|r[i+1]<<14|r[i]<<21,len:4},e.ID3v2Header={len:10,get:(r,i)=>({fileIdentifier:new t.StringType(3,"ascii").get(r,i),version:{major:t.INT8.get(r,i+3),revision:t.INT8.get(r,i+4)},flags:{unsynchronisation:n.getBit(r,i+5,7),isExtendedHeader:n.getBit(r,i+5,6),expIndicator:n.getBit(r,i+5,5),footer:n.getBit(r,i+5,4)},size:e.UINT32SYNCSAFE.get(r,i+6)})},e.ExtendedHeader={len:10,get:(r,i)=>({size:t.UINT32_BE.get(r,i),extendedFlags:t.UINT16_BE.get(r,i+4),sizeOfPadding:t.UINT32_BE.get(r,i+6),crcDataPresent:n.getBit(r,i+4,31)})},e.TextEncodingToken={len:1,get:(r,i)=>{switch(r[i]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}}(ID3v2Token)),ID3v2Token}var ID3v1Parser={},BasicParser={},hasRequiredBasicParser;function requireBasicParser(){if(hasRequiredBasicParser)return BasicParser;hasRequiredBasicParser=1,Object.defineProperty(BasicParser,"__esModule",{value:!0}),BasicParser.BasicParser=void 0;let e=class{init(n,r,i){return this.metadata=n,this.tokenizer=r,this.options=i,this}};return BasicParser.BasicParser=e,BasicParser}var APEv2Parser={},APEv2Token={},FourCC={},hasRequiredFourCC;function requireFourCC(){return hasRequiredFourCC||(hasRequiredFourCC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FourCcToken=void 0;const t=requireUtil$1(),n=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/;e.FourCcToken={len:4,get:(r,i)=>{const s=r.toString("binary",i,i+e.FourCcToken.len);if(!s.match(n))throw new Error(`FourCC contains invalid characters: ${t.a2hex(s)} "${s}"`);return s},put:(r,i,s)=>{const o=Buffer.from(s,"binary");if(o.length!==4)throw new Error("Invalid length");return o.copy(r,i)}}}(FourCC)),FourCC}var hasRequiredAPEv2Token;function requireAPEv2Token(){return hasRequiredAPEv2Token||(hasRequiredAPEv2Token=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isBitSet=e.parseTagFlags=e.TagField=e.TagItemHeader=e.TagFooter=e.Header=e.DescriptorParser=e.DataType=void 0;const t=requireLib$2(),n=requireFourCC();(function(o){o[o.text_utf8=0]="text_utf8",o[o.binary=1]="binary",o[o.external_info=2]="external_info",o[o.reserved=3]="reserved"})(e.DataType||(e.DataType={})),e.DescriptorParser={len:52,get:(o,a)=>({ID:n.FourCcToken.get(o,a),version:t.UINT32_LE.get(o,a+4)/1e3,descriptorBytes:t.UINT32_LE.get(o,a+8),headerBytes:t.UINT32_LE.get(o,a+12),seekTableBytes:t.UINT32_LE.get(o,a+16),headerDataBytes:t.UINT32_LE.get(o,a+20),apeFrameDataBytes:t.UINT32_LE.get(o,a+24),apeFrameDataBytesHigh:t.UINT32_LE.get(o,a+28),terminatingDataBytes:t.UINT32_LE.get(o,a+32),fileMD5:new t.Uint8ArrayType(16).get(o,a+36)})},e.Header={len:24,get:(o,a)=>({compressionLevel:t.UINT16_LE.get(o,a),formatFlags:t.UINT16_LE.get(o,a+2),blocksPerFrame:t.UINT32_LE.get(o,a+4),finalFrameBlocks:t.UINT32_LE.get(o,a+8),totalFrames:t.UINT32_LE.get(o,a+12),bitsPerSample:t.UINT16_LE.get(o,a+16),channel:t.UINT16_LE.get(o,a+18),sampleRate:t.UINT32_LE.get(o,a+20)})},e.TagFooter={len:32,get:(o,a)=>({ID:new t.StringType(8,"ascii").get(o,a),version:t.UINT32_LE.get(o,a+8),size:t.UINT32_LE.get(o,a+12),fields:t.UINT32_LE.get(o,a+16),flags:i(t.UINT32_LE.get(o,a+20))})},e.TagItemHeader={len:8,get:(o,a)=>({size:t.UINT32_LE.get(o,a),flags:i(t.UINT32_LE.get(o,a+4))})};const r=o=>new t.Uint8ArrayType(o.size-e.TagFooter.len);e.TagField=r;function i(o){return{containsHeader:s(o,31),containsFooter:s(o,30),isHeader:s(o,31),readOnly:s(o,0),dataType:(o&6)>>1}}e.parseTagFlags=i;function s(o,a){return(o&1<<a)!==0}e.isBitSet=s}(APEv2Token)),APEv2Token}var hasRequiredAPEv2Parser;function requireAPEv2Parser(){if(hasRequiredAPEv2Parser)return APEv2Parser;hasRequiredAPEv2Parser=1,Object.defineProperty(APEv2Parser,"__esModule",{value:!0}),APEv2Parser.APEv2Parser=void 0;const e=requireBrowser$3(),t=requireCore$2(),n=requireLib$2(),r=requireUtil$1(),i=requireBasicParser(),s=requireAPEv2Token(),o=(0,e.default)("music-metadata:parser:APEv2"),a="APEv2",l="APETAGEX";let u=class Ne extends i.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(f,m,d){const T=new Ne;return T.init(f,m,d),T.tryParseApeHeader()}static calculateDuration(f){let m=f.totalFrames>1?f.blocksPerFrame*(f.totalFrames-1):0;return m+=f.finalFrameBlocks,m/f.sampleRate}static async findApeFooterOffset(f,m){const d=Buffer.alloc(s.TagFooter.len);await f.randomRead(d,0,s.TagFooter.len,m-s.TagFooter.len);const T=s.TagFooter.get(d,0);if(T.ID==="APETAGEX")return o(`APE footer header at offset=${m}`),{footer:T,offset:m-T.size}}static parseTagFooter(f,m,d){const T=s.TagFooter.get(m,m.length-s.TagFooter.len);if(T.ID!==l)throw new Error("Unexpected APEv2 Footer ID preamble value.");t.fromBuffer(m);const _=new Ne;return _.init(f,t.fromBuffer(m),d),_.parseTags(T)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<s.TagFooter.len){o("No APEv2 header found, end-of-file reached");return}const f=await this.tokenizer.peekToken(s.TagFooter);if(f.ID===l)return await this.tokenizer.ignore(s.TagFooter.len),this.parseTags(f);if(o(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const m=this.tokenizer.fileInfo.size-this.tokenizer.position,d=Buffer.alloc(m);return await this.tokenizer.readBuffer(d),Ne.parseTagFooter(this.metadata,d,this.options)}}async parse(){const f=await this.tokenizer.readToken(s.DescriptorParser);if(f.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=f;const m=f.descriptorBytes-s.DescriptorParser.len,d=await(m>0?this.parseDescriptorExpansion(m):this.parseHeader());return await this.tokenizer.ignore(d.forwardBytes),this.tryParseApeHeader()}async parseTags(f){const m=Buffer.alloc(256);let d=f.size-s.TagFooter.len;o(`Parse APE tags at offset=${this.tokenizer.position}, size=${d}`);for(let T=0;T<f.fields;T++){if(d<s.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${f.fields-T} items remaining, but no more tag data to read.`);break}const _=await this.tokenizer.readToken(s.TagItemHeader);d-=s.TagItemHeader.len+_.size,await this.tokenizer.peekBuffer(m,{length:Math.min(m.length,d)});let x=r.findZero(m,0,m.length);const v=await this.tokenizer.readToken(new n.StringType(x,"ascii"));switch(await this.tokenizer.ignore(1),d-=v.length+1,_.flags.dataType){case s.DataType.text_utf8:{const B=(await this.tokenizer.readToken(new n.StringType(_.size,"utf8"))).split(/\x00/g);for(const O of B)this.metadata.addTag(a,v,O);break}case s.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(_.size);else{const A=Buffer.alloc(_.size);await this.tokenizer.readBuffer(A),x=r.findZero(A,0,A.length);const B=A.toString("utf8",0,x),O=Buffer.from(A.slice(x+1));this.metadata.addTag(a,v,{description:B,data:O})}break;case s.DataType.external_info:o(`Ignore external info ${v}`),await this.tokenizer.ignore(_.size);break;case s.DataType.reserved:o(`Ignore external info ${v}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${v}"`),await this.tokenizer.ignore(_.size);break}}}async parseDescriptorExpansion(f){return await this.tokenizer.ignore(f),this.parseHeader()}async parseHeader(){const f=await this.tokenizer.readToken(s.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",f.bitsPerSample),this.metadata.setFormat("sampleRate",f.sampleRate),this.metadata.setFormat("numberOfChannels",f.channel),this.metadata.setFormat("duration",Ne.calculateDuration(f)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}};return APEv2Parser.APEv2Parser=u,APEv2Parser}var hasRequiredID3v1Parser;function requireID3v1Parser(){return hasRequiredID3v1Parser||(hasRequiredID3v1Parser=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasID3v1Header=e.ID3v1Parser=e.Genres=void 0;const t=requireBrowser$3(),n=requireLib$2(),r=requireUtil$1(),i=requireBasicParser(),s=requireAPEv2Parser(),o=(0,t.default)("music-metadata:parser:ID3v1");e.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const a={len:128,get:(f,m)=>{const d=new l(3).get(f,m);return d==="TAG"?{header:d,title:new l(30).get(f,m+3),artist:new l(30).get(f,m+33),album:new l(30).get(f,m+63),year:new l(4).get(f,m+93),comment:new l(28).get(f,m+97),zeroByte:n.UINT8.get(f,m+127),track:n.UINT8.get(f,m+126),genre:n.UINT8.get(f,m+127)}:null}};class l extends n.StringType{constructor(m){super(m,"binary")}get(m,d){let T=super.get(m,d);return T=r.trimRightNull(T),T=T.trim(),T.length>0?T:void 0}}class u extends i.BasicParser{static getGenre(m){if(m<e.Genres.length)return e.Genres[m]}async parse(){if(!this.tokenizer.fileInfo.size){o("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const T=new s.APEv2Parser;T.init(this.metadata,this.tokenizer,this.options),await T.parseTags(this.options.apeHeader.footer)}const m=this.tokenizer.fileInfo.size-a.len;if(this.tokenizer.position>m){o("Already consumed the last 128 bytes");return}const d=await this.tokenizer.readToken(a,m);if(d){o("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-a.len);for(const _ of["title","artist","album","comment","track","year"])d[_]&&d[_]!==""&&this.addTag(_,d[_]);const T=u.getGenre(d.genre);T&&this.addTag("genre",T)}else o("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-a.len)}addTag(m,d){this.metadata.addTag("ID3v1",m,d)}}e.ID3v1Parser=u;async function c(f){if(f.fileSize>=128){const m=Buffer.alloc(3);return await f.randomRead(m,0,m.length,f.fileSize-128),m.toString("binary")==="TAG"}return!1}e.hasID3v1Header=c}(ID3v1Parser)),ID3v1Parser}var hasRequiredFrameParser;function requireFrameParser(){if(hasRequiredFrameParser)return FrameParser;hasRequiredFrameParser=1,Object.defineProperty(FrameParser,"__esModule",{value:!0}),FrameParser.FrameParser=FrameParser.parseGenre=void 0;const e=requireBrowser$3(),t=requireLib$2(),n=requireUtil$1(),r=requireID3v2Token(),i=requireID3v1Parser(),s=(0,e.default)("music-metadata:id3v2:frame-parser"),o="latin1";function a(c){const f=[];let m,d="";for(const T of c)if(typeof m=="string")if(T==="("&&m==="")d+="(",m=void 0;else if(T===")"){d!==""&&(f.push(d),d="");const _=l(m);_&&f.push(_),m=void 0}else m+=T;else T==="("?m="":d+=T;return d&&(f.length===0&&d.match(/^\d*$/)&&(d=i.Genres[d]),f.push(d)),f}FrameParser.parseGenre=a;function l(c){if(c==="RX")return"Remix";if(c==="CR")return"Cover";if(c.match(/^\d*$/))return i.Genres[c]}let u=class Ce{constructor(f,m){this.major=f,this.warningCollector=m}readData(f,m,d){if(f.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${m}`);return}const{encoding:T,bom:_}=r.TextEncodingToken.get(f,0),x=f.length;let v=0,A=[];const B=Ce.getNullTerminatorLength(T);let O;const L={};switch(s(`Parsing tag type=${m}, encoding=${T}, bom=${_}`),m!=="TXXX"&&m[0]==="T"?"T*":m){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let U;try{U=n.decodeString(f.slice(1),T).replace(/\x00+$/,"")}catch(ne){this.warningCollector.addWarning(`id3v2.${this.major} type=${m} header has invalid string value: ${ne.message}`)}switch(m){case"TMCL":case"TIPL":case"IPLS":A=this.splitValue(m,U),A=Ce.functionList(A);break;case"TRK":case"TRCK":case"TPOS":A=U;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":A=this.splitValue(m,U);break;case"TCO":case"TCON":A=this.splitValue(m,U).map(ne=>a(ne)).reduce((ne,W)=>ne.concat(W),[]);break;case"PCS":case"PCST":A=this.major>=4?this.splitValue(m,U):[U],A=Array.isArray(A)&&A[0]===""?1:0;break;default:A=this.major>=4?this.splitValue(m,U):[U]}break;case"TXXX":A=Ce.readIdentifierAndData(f,v+1,x,T),A={description:A.id,text:this.splitValue(m,n.decodeString(A.data,T).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(d){const ne={};switch(v+=1,this.major){case 2:ne.format=n.decodeString(f.slice(v,v+3),"latin1"),v+=3;break;case 3:case 4:O=n.findZero(f,v,x,o),ne.format=n.decodeString(f.slice(v,O),o),v=O+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}ne.format=Ce.fixPictureMimeType(ne.format),ne.type=r.AttachedPictureType[f[v]],v+=1,O=n.findZero(f,v,x,T),ne.description=n.decodeString(f.slice(v,O),T),v=O+B,ne.data=Buffer.from(f.slice(v,x)),A=ne}break;case"CNT":case"PCNT":A=t.UINT32_BE.get(f,0);break;case"SYLT":for(v+=7,A=[];v<x;){const ne=f.slice(v,v=n.findZero(f,v,x,T));v+=5,A.push(n.decodeString(ne,T))}break;case"ULT":case"USLT":case"COM":case"COMM":v+=1,L.language=n.decodeString(f.slice(v,v+3),o),v+=3,O=n.findZero(f,v,x,T),L.description=n.decodeString(f.slice(v,O),T),v=O+B,L.text=n.decodeString(f.slice(v,x),T).replace(/\x00+$/,""),A=[L];break;case"UFID":A=Ce.readIdentifierAndData(f,v,x,o),A={owner_identifier:A.id,identifier:A.data};break;case"PRIV":A=Ce.readIdentifierAndData(f,v,x,o),A={owner_identifier:A.id,data:A.data};break;case"POPM":O=n.findZero(f,v,x,o);const R=n.decodeString(f.slice(v,O),o);v=O+1;const M=x-v;A={email:R,rating:t.UINT8.get(f,v),counter:M>=5?t.UINT32_BE.get(f,v+1):void 0};break;case"GEOB":{O=n.findZero(f,v+1,x,T);const ne=n.decodeString(f.slice(v+1,O),o);v=O+1,O=n.findZero(f,v,x-v,T);const W=n.decodeString(f.slice(v,O),o);v=O+1,O=n.findZero(f,v,x-v,T);const G=n.decodeString(f.slice(v,O),o);A={type:ne,filename:W,description:G,data:f.slice(v+1,x)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":A=n.decodeString(f.slice(v,O),o);break;case"WXXX":{O=n.findZero(f,v+1,x,T);const ne=n.decodeString(f.slice(v+1,O),T);v=O+(T==="utf16le"?2:1),A={description:ne,url:n.decodeString(f.slice(v,x),o)};break}case"WFD":case"WFED":A=n.decodeString(f.slice(v+1,n.findZero(f,v+1,x,T)),T);break;case"MCDI":{A=f.slice(0,x);break}default:s("Warning: unsupported id3v2-tag-type: "+m);break}return A}static fixPictureMimeType(f){switch(f=f.toLocaleLowerCase(),f){case"jpg":return"image/jpeg";case"png":return"image/png"}return f}static functionList(f){const m={};for(let d=0;d+1<f.length;d+=2){const T=f[d+1].split(",");m[f[d]]=m.hasOwnProperty(f[d])?m[f[d]].concat(T):T}return m}splitValue(f,m){let d;return this.major<4?(d=m.split(/\x00/g),d.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${f} uses non standard null-separator.`):d=m.split(/\//g)):d=m.split(/\x00/g),Ce.trimArray(d)}static trimArray(f){return f.map(m=>m.replace(/\x00+$/,"").trim())}static readIdentifierAndData(f,m,d,T){const _=n.findZero(f,m,d,T),x=n.decodeString(f.slice(m,_),T);return m=_+Ce.getNullTerminatorLength(T),{id:x,data:f.slice(m,d)}}static getNullTerminatorLength(f){return f==="utf16le"?2:1}};return FrameParser.FrameParser=u,FrameParser}var hasRequiredID3v2Parser;function requireID3v2Parser(){if(hasRequiredID3v2Parser)return ID3v2Parser;hasRequiredID3v2Parser=1,Object.defineProperty(ID3v2Parser,"__esModule",{value:!0}),ID3v2Parser.ID3v2Parser=void 0;const e=requireLib$2(),t=requireUtil$1(),n=requireFrameParser(),r=requireID3v2Token();let i=class Me{static removeUnsyncBytes(o){let a=0,l=0;for(;a<o.length-1;)a!==l&&(o[l]=o[a]),a+=o[a]===255&&o[a+1]===0?2:1,l++;return a<o.length&&(o[l++]=o[a]),o.slice(0,l)}static getFrameHeaderLength(o){switch(o){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(o){return{status:{tag_alter_preservation:t.getBit(o,0,6),file_alter_preservation:t.getBit(o,0,5),read_only:t.getBit(o,0,4)},format:{grouping_identity:t.getBit(o,1,7),compression:t.getBit(o,1,3),encryption:t.getBit(o,1,2),unsynchronisation:t.getBit(o,1,1),data_length_indicator:t.getBit(o,1,0)}}}static readFrameData(o,a,l,u,c){const f=new n.FrameParser(l,c);switch(l){case 2:return f.readData(o,a.id,u);case 3:case 4:return a.flags.format.unsynchronisation&&(o=Me.removeUnsyncBytes(o)),a.flags.format.data_length_indicator&&(o=o.slice(4,o.length)),f.readData(o,a.id,u);default:throw new Error("Unexpected majorVer: "+l)}}static makeDescriptionTagName(o,a){return o+(a?":"+a:"")}async parse(o,a,l){this.tokenizer=a,this.metadata=o,this.options=l;const u=await this.tokenizer.readToken(r.ID3v2Header);if(u.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=u,this.headerType="ID3v2."+u.version.major,u.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(u.size)}async parseExtendedHeader(){const o=await this.tokenizer.readToken(r.ExtendedHeader),a=o.size-r.ExtendedHeader.len;return a>0?this.parseExtendedHeaderData(a,o.size):this.parseId3Data(this.id3Header.size-o.size)}async parseExtendedHeaderData(o,a){return await this.tokenizer.ignore(o),this.parseId3Data(this.id3Header.size-a)}async parseId3Data(o){const a=await this.tokenizer.readToken(new e.Uint8ArrayType(o));for(const l of this.parseMetadata(a))if(l.id==="TXXX"){if(l.value)for(const u of l.value.text)this.addTag(Me.makeDescriptionTagName(l.id,l.value.description),u)}else if(l.id==="COM")for(const u of l.value)this.addTag(Me.makeDescriptionTagName(l.id,u.description),u.text);else if(l.id==="COMM")for(const u of l.value)this.addTag(Me.makeDescriptionTagName(l.id,u.description),u);else if(Array.isArray(l.value))for(const u of l.value)this.addTag(l.id,u);else this.addTag(l.id,l.value)}addTag(o,a){this.metadata.addTag(this.headerType,o,a)}parseMetadata(o){let a=0;const l=[];for(;a!==o.length;){const u=Me.getFrameHeaderLength(this.id3Header.version.major);if(a+u>o.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const c=o.slice(a,a+=u),f=this.readFrameHeader(c,this.id3Header.version.major),m=o.slice(a,a+=f.length),d=Me.readFrameData(m,f,this.id3Header.version.major,!this.options.skipCovers,this.metadata);d&&l.push({id:f.id,value:d})}return l}readFrameHeader(o,a){let l;switch(a){case 2:l={id:Buffer.from(o.slice(0,3)).toString("ascii"),length:e.UINT24_BE.get(o,3)},l.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${l.id}`);break;case 3:case 4:l={id:Buffer.from(o.slice(0,4)).toString("ascii"),length:(a===4?r.UINT32SYNCSAFE:e.UINT32_BE).get(o,4),flags:Me.readFrameFlags(o.slice(8,10))},l.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${l.id}`);break;default:throw new Error("Unexpected majorVer: "+a)}return l}};return ID3v2Parser.ID3v2Parser=i,ID3v2Parser}var AiffToken={},hasRequiredAiffToken;function requireAiffToken(){if(hasRequiredAiffToken)return AiffToken;hasRequiredAiffToken=1,Object.defineProperty(AiffToken,"__esModule",{value:!0}),AiffToken.Common=void 0;const e=requireLib$2(),t=requireFourCC();class n{constructor(i,s){this.isAifc=s;const o=s?22:18;if(i.chunkSize<o)throw new Error(`COMMON CHUNK size should always be at least ${o}`);this.len=i.chunkSize}get(i,s){const o=i.readUInt16BE(s+8)-16398,a=i.readUInt16BE(s+8+2),l={numChannels:i.readUInt16BE(s),numSampleFrames:i.readUInt32BE(s+2),sampleSize:i.readUInt16BE(s+6),sampleRate:o<0?a>>Math.abs(o):a<<o};if(this.isAifc){if(l.compressionType=t.FourCcToken.get(i,s+18),this.len>22){const u=i.readInt8(s+22);if(u>0){const c=(u+1)%2;if(23+u+c===this.len)l.compressionName=new e.StringType(u,"binary").get(i,s+23);else throw new Error("Illegal pstring length")}else l.compressionName=void 0}}else l.compressionName="PCM";return l}}return AiffToken.Common=n,AiffToken}var iff={},hasRequiredIff;function requireIff(){if(hasRequiredIff)return iff;hasRequiredIff=1,Object.defineProperty(iff,"__esModule",{value:!0}),iff.Header=void 0;const e=requireLib$2(),t=requireFourCC();return iff.Header={len:8,get:(n,r)=>({chunkID:t.FourCcToken.get(n,r),chunkSize:Number(BigInt(e.UINT32_BE.get(n,r+4)))})},iff}var hasRequiredAiffParser;function requireAiffParser(){if(hasRequiredAiffParser)return AiffParser;hasRequiredAiffParser=1,Object.defineProperty(AiffParser,"__esModule",{value:!0}),AiffParser.AIFFParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),n=requireCore$2(),r=requireID3v2Parser(),i=requireFourCC(),s=requireBasicParser(),o=requireAiffToken(),a=requireIff(),l=(0,t.default)("music-metadata:parser:aiff"),u={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"µLaw 2:1	8-bit ITU-T G.711 µ-law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 µ-law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class c extends s.BasicParser{async parse(){if((await this.tokenizer.readToken(a.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const d=await this.tokenizer.readToken(i.FourCcToken);switch(d){case"AIFF":this.metadata.setFormat("container",d),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+d)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=a.Header.len;){l("Reading AIFF chunk at offset="+this.tokenizer.position);const T=await this.tokenizer.readToken(a.Header),_=2*Math.round(T.chunkSize/2),x=await this.readData(T);await this.tokenizer.ignore(_-x)}}catch(T){if(T instanceof n.EndOfStreamError)l("End-of-stream");else throw T}}async readData(m){var d;switch(m.chunkID){case"COMM":const T=await this.tokenizer.readToken(new o.Common(m,this.isCompressed));return this.metadata.setFormat("bitsPerSample",T.sampleSize),this.metadata.setFormat("sampleRate",T.sampleRate),this.metadata.setFormat("numberOfChannels",T.numChannels),this.metadata.setFormat("numberOfSamples",T.numSampleFrames),this.metadata.setFormat("duration",T.numSampleFrames/T.sampleRate),this.metadata.setFormat("codec",(d=T.compressionName)!==null&&d!==void 0?d:u[T.compressionType]),m.chunkSize;case"ID3 ":const _=await this.tokenizer.readToken(new e.Uint8ArrayType(m.chunkSize)),x=n.fromBuffer(_);return await new r.ID3v2Parser().parse(this.metadata,x,this.options),m.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*m.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(m);default:return l(`Ignore chunk id=${m.chunkID}, size=${m.chunkSize}`),0}}async readTextChunk(m){return(await this.tokenizer.readToken(new e.StringType(m.chunkSize,"ascii"))).split("\0").map(T=>T.trim()).filter(T=>T&&T.length>0).forEach(T=>{this.metadata.addTag("AIFF",m.chunkID,T.trim())}),m.chunkSize}}return AiffParser.AIFFParser=c,AiffParser}var AsfParser={},GUID={},hasRequiredGUID;function requireGUID(){if(hasRequiredGUID)return GUID;hasRequiredGUID=1,Object.defineProperty(GUID,"__esModule",{value:!0});let e=class Be{static fromBin(n,r=0){return new Be(this.decode(n,r))}static decode(n,r=0){return(n.readUInt32LE(r).toString(16)+"-"+n.readUInt16LE(r+4).toString(16)+"-"+n.readUInt16LE(r+6).toString(16)+"-"+n.readUInt16BE(r+8).toString(16)+"-"+n.slice(r+10,r+16).toString("hex")).toUpperCase()}static decodeMediaType(n){switch(n.str){case Be.AudioMedia.str:return"audio";case Be.VideoMedia.str:return"video";case Be.CommandMedia.str:return"command";case Be.Degradable_JPEG_Media.str:return"degradable-jpeg";case Be.FileTransferMedia.str:return"file-transfer";case Be.BinaryMedia.str:return"binary"}}static encode(n){const r=Buffer.alloc(16);return r.writeUInt32LE(parseInt(n.slice(0,8),16),0),r.writeUInt16LE(parseInt(n.slice(9,13),16),4),r.writeUInt16LE(parseInt(n.slice(14,18),16),6),Buffer.from(n.slice(19,23),"hex").copy(r,8),Buffer.from(n.slice(24),"hex").copy(r,10),r}constructor(n){this.str=n}equals(n){return this.str===n.str}toBin(){return Be.encode(this.str)}};return e.HeaderObject=new e("75B22630-668E-11CF-A6D9-00AA0062CE6C"),e.DataObject=new e("75B22636-668E-11CF-A6D9-00AA0062CE6C"),e.SimpleIndexObject=new e("33000890-E5B1-11CF-89F4-00A0C90349CB"),e.IndexObject=new e("D6E229D3-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexObject=new e("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),e.TimecodeIndexObject=new e("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),e.FilePropertiesObject=new e("8CABDCA1-A947-11CF-8EE4-00C00C205365"),e.StreamPropertiesObject=new e("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),e.HeaderExtensionObject=new e("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),e.CodecListObject=new e("86D15240-311D-11D0-A3A4-00A0C90348F6"),e.ScriptCommandObject=new e("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),e.MarkerObject=new e("F487CD01-A951-11CF-8EE6-00C00C205365"),e.BitrateMutualExclusionObject=new e("D6E229DC-35DA-11D1-9034-00A0C90349BE"),e.ErrorCorrectionObject=new e("75B22635-668E-11CF-A6D9-00AA0062CE6C"),e.ContentDescriptionObject=new e("75B22633-668E-11CF-A6D9-00AA0062CE6C"),e.ExtendedContentDescriptionObject=new e("D2D0A440-E307-11D2-97F0-00A0C95EA850"),e.ContentBrandingObject=new e("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),e.StreamBitratePropertiesObject=new e("7BF875CE-468D-11D1-8D82-006097C9A2B2"),e.ContentEncryptionObject=new e("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),e.ExtendedContentEncryptionObject=new e("298AE614-2622-4C17-B935-DAE07EE9289C"),e.DigitalSignatureObject=new e("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),e.PaddingObject=new e("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),e.ExtendedStreamPropertiesObject=new e("14E6A5CB-C672-4332-8399-A96952065B5A"),e.AdvancedMutualExclusionObject=new e("A08649CF-4775-4670-8A16-6E35357566CD"),e.GroupMutualExclusionObject=new e("D1465A40-5A79-4338-B71B-E36B8FD6C249"),e.StreamPrioritizationObject=new e("D4FED15B-88D3-454F-81F0-ED5C45999E24"),e.BandwidthSharingObject=new e("A69609E6-517B-11D2-B6AF-00C04FD908E9"),e.LanguageListObject=new e("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),e.MetadataObject=new e("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),e.MetadataLibraryObject=new e("44231C94-9498-49D1-A141-1D134E457054"),e.IndexParametersObject=new e("D6E229DF-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexParametersObject=new e("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),e.TimecodeIndexParametersObject=new e("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),e.CompatibilityObject=new e("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),e.AdvancedContentEncryptionObject=new e("43058533-6981-49E6-9B74-AD12CB86D58C"),e.AudioMedia=new e("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),e.VideoMedia=new e("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),e.CommandMedia=new e("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),e.JFIF_Media=new e("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),e.Degradable_JPEG_Media=new e("35907DE0-E415-11CF-A917-00805F5C442B"),e.FileTransferMedia=new e("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),e.BinaryMedia=new e("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),e.ASF_Index_Placeholder_Object=new e("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),GUID.default=e,GUID}var AsfObject={},AsfUtil={},hasRequiredAsfUtil;function requireAsfUtil(){if(hasRequiredAsfUtil)return AsfUtil;hasRequiredAsfUtil=1,Object.defineProperty(AsfUtil,"__esModule",{value:!0}),AsfUtil.AsfUtil=void 0;const e=requireLib$2(),t=requireUtil$1();let n=class We{static getParserForAttr(i){return We.attributeParsers[i]}static parseUnicodeAttr(i){return t.stripNulls(t.decodeString(i,"utf16le"))}static parseByteArrayAttr(i){return Buffer.from(i)}static parseBoolAttr(i,s=0){return We.parseWordAttr(i,s)===1}static parseDWordAttr(i,s=0){return i.readUInt32LE(s)}static parseQWordAttr(i,s=0){return e.UINT64_LE.get(i,s)}static parseWordAttr(i,s=0){return i.readUInt16LE(s)}};return n.attributeParsers=[n.parseUnicodeAttr,n.parseByteArrayAttr,n.parseBoolAttr,n.parseDWordAttr,n.parseQWordAttr,n.parseWordAttr,n.parseByteArrayAttr],AsfUtil.AsfUtil=n,AsfUtil}var hasRequiredAsfObject;function requireAsfObject(){return hasRequiredAsfObject||(hasRequiredAsfObject=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WmPictureToken=e.MetadataLibraryObjectState=e.MetadataObjectState=e.ExtendedStreamPropertiesObjectState=e.ExtendedContentDescriptionObjectState=e.ContentDescriptionObjectState=e.readCodecEntries=e.HeaderExtensionObject=e.StreamPropertiesObject=e.FilePropertiesObject=e.IgnoreObjectState=e.State=e.HeaderObjectToken=e.TopLevelHeaderObjectToken=e.DataType=void 0;const t=requireUtil$1(),n=requireLib$2(),r=requireGUID(),i=requireAsfUtil(),s=requireID3v2Token();(function(U){U[U.UnicodeString=0]="UnicodeString",U[U.ByteArray=1]="ByteArray",U[U.Bool=2]="Bool",U[U.DWord=3]="DWord",U[U.QWord=4]="QWord",U[U.Word=5]="Word"})(e.DataType||(e.DataType={})),e.TopLevelHeaderObjectToken={len:30,get:(U,R)=>({objectId:r.default.fromBin(new n.BufferType(16).get(U,R)),objectSize:Number(n.UINT64_LE.get(U,R+16)),numberOfHeaderObjects:n.UINT32_LE.get(U,R+24)})},e.HeaderObjectToken={len:24,get:(U,R)=>({objectId:r.default.fromBin(new n.BufferType(16).get(U,R)),objectSize:Number(n.UINT64_LE.get(U,R+16))})};class o{constructor(R){this.len=Number(R.objectSize)-e.HeaderObjectToken.len}postProcessTag(R,M,ne,W){if(M==="WM/Picture")R.push({id:M,value:L.fromBuffer(W)});else{const G=i.AsfUtil.getParserForAttr(ne);if(!G)throw new Error("unexpected value headerType: "+ne);R.push({id:M,value:G(W)})}}}e.State=o;class a extends o{constructor(R){super(R)}get(R,M){return null}}e.IgnoreObjectState=a;class l extends o{constructor(R){super(R)}get(R,M){return{fileId:r.default.fromBin(R,M),fileSize:n.UINT64_LE.get(R,M+16),creationDate:n.UINT64_LE.get(R,M+24),dataPacketsCount:n.UINT64_LE.get(R,M+32),playDuration:n.UINT64_LE.get(R,M+40),sendDuration:n.UINT64_LE.get(R,M+48),preroll:n.UINT64_LE.get(R,M+56),flags:{broadcast:t.getBit(R,M+64,24),seekable:t.getBit(R,M+64,25)},minimumDataPacketSize:n.UINT32_LE.get(R,M+68),maximumDataPacketSize:n.UINT32_LE.get(R,M+72),maximumBitrate:n.UINT32_LE.get(R,M+76)}}}l.guid=r.default.FilePropertiesObject,e.FilePropertiesObject=l;class u extends o{constructor(R){super(R)}get(R,M){return{streamType:r.default.decodeMediaType(r.default.fromBin(R,M)),errorCorrectionType:r.default.fromBin(R,M+8)}}}u.guid=r.default.StreamPropertiesObject,e.StreamPropertiesObject=u;class c{constructor(){this.len=22}get(R,M){return{reserved1:r.default.fromBin(R,M),reserved2:R.readUInt16LE(M+16),extensionDataSize:R.readUInt32LE(M+18)}}}c.guid=r.default.HeaderExtensionObject,e.HeaderExtensionObject=c;const f={len:20,get:(U,R)=>({entryCount:U.readUInt16LE(R+16)})};async function m(U){const R=await U.readNumber(n.UINT16_LE);return(await U.readToken(new n.StringType(R*2,"utf16le"))).replace("\0","")}async function d(U){const R=await U.readToken(f),M=[];for(let ne=0;ne<R.entryCount;++ne)M.push(await _(U));return M}e.readCodecEntries=d;async function T(U){const R=await U.readNumber(n.UINT16_LE),M=Buffer.alloc(R);return await U.readBuffer(M),M}async function _(U){const R=await U.readNumber(n.UINT16_LE);return{type:{videoCodec:(R&1)===1,audioCodec:(R&2)===2},codecName:await m(U),description:await m(U),information:await T(U)}}class x extends o{constructor(R){super(R)}get(R,M){const ne=[];let W=M+10;for(let G=0;G<x.contentDescTags.length;++G){const re=R.readUInt16LE(M+G*2);if(re>0){const Y=x.contentDescTags[G],ce=W+re;ne.push({id:Y,value:i.AsfUtil.parseUnicodeAttr(R.slice(W,ce))}),W=ce}}return ne}}x.guid=r.default.ContentDescriptionObject,x.contentDescTags=["Title","Author","Copyright","Description","Rating"],e.ContentDescriptionObjectState=x;class v extends o{constructor(R){super(R)}get(R,M){const ne=[],W=R.readUInt16LE(M);let G=M+2;for(let re=0;re<W;re+=1){const Y=R.readUInt16LE(G);G+=2;const ce=i.AsfUtil.parseUnicodeAttr(R.slice(G,G+Y));G+=Y;const me=R.readUInt16LE(G);G+=2;const de=R.readUInt16LE(G);G+=2;const ge=R.slice(G,G+de);G+=de,this.postProcessTag(ne,ce,me,ge)}return ne}}v.guid=r.default.ExtendedContentDescriptionObject,e.ExtendedContentDescriptionObjectState=v;class A extends o{constructor(R){super(R)}get(R,M){return{startTime:n.UINT64_LE.get(R,M),endTime:n.UINT64_LE.get(R,M+8),dataBitrate:R.readInt32LE(M+12),bufferSize:R.readInt32LE(M+16),initialBufferFullness:R.readInt32LE(M+20),alternateDataBitrate:R.readInt32LE(M+24),alternateBufferSize:R.readInt32LE(M+28),alternateInitialBufferFullness:R.readInt32LE(M+32),maximumObjectSize:R.readInt32LE(M+36),flags:{reliableFlag:t.getBit(R,M+40,0),seekableFlag:t.getBit(R,M+40,1),resendLiveCleanpointsFlag:t.getBit(R,M+40,2)},streamNumber:R.readInt16LE(M+42),streamLanguageId:R.readInt16LE(M+44),averageTimePerFrame:R.readInt32LE(M+52),streamNameCount:R.readInt32LE(M+54),payloadExtensionSystems:R.readInt32LE(M+56),streamNames:[],streamPropertiesObject:null}}}A.guid=r.default.ExtendedStreamPropertiesObject,e.ExtendedStreamPropertiesObjectState=A;class B extends o{constructor(R){super(R)}get(R,M){const ne=[],W=Buffer.from(R),G=W.readUInt16LE(M);let re=M+2;for(let Y=0;Y<G;Y+=1){re+=4;const ce=W.readUInt16LE(re);re+=2;const me=W.readUInt16LE(re);re+=2;const de=W.readUInt32LE(re);re+=4;const ge=i.AsfUtil.parseUnicodeAttr(W.slice(re,re+ce));re+=ce;const te=W.slice(re,re+de);re+=de,this.postProcessTag(ne,ge,me,te)}return ne}}B.guid=r.default.MetadataObject,e.MetadataObjectState=B;class O extends B{constructor(R){super(R)}}O.guid=r.default.MetadataLibraryObject,e.MetadataLibraryObjectState=O;class L{static fromBase64(R){return this.fromBuffer(Buffer.from(R,"base64"))}static fromBuffer(R){return new L(R.length).get(R,0)}constructor(R){this.len=R}get(R,M){const ne=R.readUInt8(M++),W=R.readInt32LE(M);let G=5;for(;R.readUInt16BE(G)!==0;)G+=2;const re=R.slice(5,G).toString("utf16le");for(;R.readUInt16BE(G)!==0;)G+=2;const Y=R.slice(5,G).toString("utf16le");return{type:s.AttachedPictureType[ne],format:re,description:Y,size:W,data:R.slice(G+4)}}}e.WmPictureToken=L}(AsfObject)),AsfObject}var hasRequiredAsfParser;function requireAsfParser(){if(hasRequiredAsfParser)return AsfParser;hasRequiredAsfParser=1,Object.defineProperty(AsfParser,"__esModule",{value:!0}),AsfParser.AsfParser=void 0;const e=requireBrowser$3(),t=requireType(),n=requireGUID(),r=requireAsfObject(),i=requireBasicParser(),s=(0,e.default)("music-metadata:parser:ASF"),o="asf";let a=class extends i.BasicParser{async parse(){const u=await this.tokenizer.readToken(r.TopLevelHeaderObjectToken);if(!u.objectId.equals(n.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+u.objectId.str);try{await this.parseObjectHeader(u.numberOfHeaderObjects)}catch(c){s("Error while parsing ASF: %s",c)}}async parseObjectHeader(u){let c;do{const f=await this.tokenizer.readToken(r.HeaderObjectToken);switch(s("header GUID=%s",f.objectId.str),f.objectId.str){case r.FilePropertiesObject.guid.str:const m=await this.tokenizer.readToken(new r.FilePropertiesObject(f));this.metadata.setFormat("duration",Number(m.playDuration/BigInt(1e3))/1e4-Number(m.preroll)/1e3),this.metadata.setFormat("bitrate",m.maximumBitrate);break;case r.StreamPropertiesObject.guid.str:const d=await this.tokenizer.readToken(new r.StreamPropertiesObject(f));this.metadata.setFormat("container","ASF/"+d.streamType);break;case r.HeaderExtensionObject.guid.str:const T=await this.tokenizer.readToken(new r.HeaderExtensionObject);await this.parseExtensionObject(T.extensionDataSize);break;case r.ContentDescriptionObjectState.guid.str:c=await this.tokenizer.readToken(new r.ContentDescriptionObjectState(f)),this.addTags(c);break;case r.ExtendedContentDescriptionObjectState.guid.str:c=await this.tokenizer.readToken(new r.ExtendedContentDescriptionObjectState(f)),this.addTags(c);break;case n.default.CodecListObject.str:const _=await r.readCodecEntries(this.tokenizer);_.forEach(v=>{this.metadata.addStreamInfo({type:v.type.videoCodec?t.TrackType.video:t.TrackType.audio,codecName:v.codecName})});const x=_.filter(v=>v.type.audioCodec).map(v=>v.codecName).join("/");this.metadata.setFormat("codec",x);break;case n.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(f.objectSize-r.HeaderObjectToken.len);break;case n.default.PaddingObject.str:s("Padding: %s bytes",f.objectSize-r.HeaderObjectToken.len),await this.tokenizer.ignore(f.objectSize-r.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+f.objectId.str),s("Ignore ASF-Object-GUID: %s",f.objectId.str),await this.tokenizer.readToken(new r.IgnoreObjectState(f))}}while(--u)}addTags(u){u.forEach(c=>{this.metadata.addTag(o,c.id,c.value)})}async parseExtensionObject(u){do{const c=await this.tokenizer.readToken(r.HeaderObjectToken),f=c.objectSize-r.HeaderObjectToken.len;switch(c.objectId.str){case r.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new r.ExtendedStreamPropertiesObjectState(c));break;case r.MetadataObjectState.guid.str:const m=await this.tokenizer.readToken(new r.MetadataObjectState(c));this.addTags(m);break;case r.MetadataLibraryObjectState.guid.str:const d=await this.tokenizer.readToken(new r.MetadataLibraryObjectState(c));this.addTags(d);break;case n.default.PaddingObject.str:await this.tokenizer.ignore(f);break;case n.default.CompatibilityObject.str:this.tokenizer.ignore(f);break;case n.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(f);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+c.objectId.str),await this.tokenizer.readToken(new r.IgnoreObjectState(c));break}u-=c.objectSize}while(u>0)}};return AsfParser.AsfParser=a,AsfParser}var FlacParser={},Vorbis={},hasRequiredVorbis;function requireVorbis(){if(hasRequiredVorbis)return Vorbis;hasRequiredVorbis=1,Object.defineProperty(Vorbis,"__esModule",{value:!0}),Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const e=requireLib$2(),t=requireID3v2Token();class n{static fromBase64(i){return this.fromBuffer(Buffer.from(i,"base64"))}static fromBuffer(i){return new n(i.length).get(i,0)}constructor(i){this.len=i}get(i,s){const o=t.AttachedPictureType[e.UINT32_BE.get(i,s)],a=e.UINT32_BE.get(i,s+=4),l=i.toString("utf-8",s+=4,s+a),u=e.UINT32_BE.get(i,s+=a),c=i.toString("utf-8",s+=4,s+u),f=e.UINT32_BE.get(i,s+=u),m=e.UINT32_BE.get(i,s+=4),d=e.UINT32_BE.get(i,s+=4),T=e.UINT32_BE.get(i,s+=4),_=e.UINT32_BE.get(i,s+=4),x=Buffer.from(i.slice(s+=4,s+_));return{type:o,format:l,description:c,width:f,height:m,colour_depth:d,indexed_color:T,data:x}}}return Vorbis.VorbisPictureToken=n,Vorbis.CommonHeader={len:7,get:(r,i)=>({packetType:r.readUInt8(i),vorbis:new e.StringType(6,"ascii").get(r,i+1)})},Vorbis.IdentificationHeader={len:23,get:(r,i)=>{const s=new DataView(r.buffer,r.byteOffset);return{version:s.getUint32(i+0,!0),channelMode:s.getUint8(i+4),sampleRate:s.getUint32(i+5,!0),bitrateMax:s.getUint32(i+9,!0),bitrateNominal:s.getUint32(i+13,!0),bitrateMin:s.getUint32(i+17,!0)}}},Vorbis}var AbstractID3Parser={},hasRequiredAbstractID3Parser;function requireAbstractID3Parser(){if(hasRequiredAbstractID3Parser)return AbstractID3Parser;hasRequiredAbstractID3Parser=1,Object.defineProperty(AbstractID3Parser,"__esModule",{value:!0}),AbstractID3Parser.AbstractID3Parser=void 0;const e=requireCore$2(),t=requireBrowser$3(),n=requireID3v2Token(),r=requireID3v2Parser(),i=requireID3v1Parser(),s=requireBasicParser(),o=(0,t.default)("music-metadata:parser:ID3");let a=class extends s.BasicParser{constructor(){super(...arguments),this.id3parser=new r.ID3v2Parser}static async startsWithID3v2Header(u){return(await u.peekToken(n.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(u){if(u instanceof e.EndOfStreamError)o("End-of-stream");else throw u}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),o("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new i.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(n.ID3v2Header)).fileIdentifier==="ID3")return o("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}};return AbstractID3Parser.AbstractID3Parser=a,AbstractID3Parser}var VorbisParser={},VorbisDecoder={},hasRequiredVorbisDecoder;function requireVorbisDecoder(){if(hasRequiredVorbisDecoder)return VorbisDecoder;hasRequiredVorbisDecoder=1,Object.defineProperty(VorbisDecoder,"__esModule",{value:!0}),VorbisDecoder.VorbisDecoder=void 0;const e=requireLib$2();let t=class{constructor(r,i){this.data=r,this.offset=i}readInt32(){const r=e.UINT32_LE.get(this.data,this.offset);return this.offset+=4,r}readStringUtf8(){const r=this.readInt32(),i=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+r);return this.offset+=r,i}parseUserComment(){const r=this.offset,i=this.readStringUtf8(),s=i.indexOf("=");return{key:i.slice(0,s).toUpperCase(),value:i.slice(s+1),len:this.offset-r}}};return VorbisDecoder.VorbisDecoder=t,VorbisDecoder}var hasRequiredVorbisParser;function requireVorbisParser(){if(hasRequiredVorbisParser)return VorbisParser;hasRequiredVorbisParser=1,Object.defineProperty(VorbisParser,"__esModule",{value:!0}),VorbisParser.VorbisParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),n=requireVorbisDecoder(),r=requireVorbis(),i=(0,t.default)("music-metadata:parser:ogg:vorbis1");let s=class{constructor(a,l){this.metadata=a,this.options=l,this.pageSegments=[]}parsePage(a,l){if(a.headerType.firstPage)this.parseFirstPage(a,l);else{if(a.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(l)}if(a.headerType.lastPage||!a.headerType.continued){if(this.pageSegments.length>0){const u=Buffer.concat(this.pageSegments);this.parseFullPage(u)}this.pageSegments=a.headerType.lastPage?[]:[l]}}a.headerType.lastPage&&this.calculateDuration(a)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(a,l){const c=new n.VorbisDecoder(a,l).parseUserComment();return this.addTag(c.key,c.value),c.len}addTag(a,l){if(a==="METADATA_BLOCK_PICTURE"&&typeof l=="string"){if(this.options.skipCovers){i("Ignore picture");return}l=r.VorbisPictureToken.fromBase64(l),i(`Push picture: id=${a}, format=${l.format}`)}else i(`Push tag: id=${a}, value=${l}`);this.metadata.addTag("vorbis",a,l)}calculateDuration(a){this.metadata.format.sampleRate&&a.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",a.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(a,l){this.metadata.setFormat("codec","Vorbis I"),i("Parse first page");const u=r.CommonHeader.get(l,0);if(u.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(u.packetType===1){const c=r.IdentificationHeader.get(l,r.CommonHeader.len);this.metadata.setFormat("sampleRate",c.sampleRate),this.metadata.setFormat("bitrate",c.bitrateNominal),this.metadata.setFormat("numberOfChannels",c.channelMode),i("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",c.sampleRate,c.bitrateNominal,c.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(a){const l=r.CommonHeader.get(a,0);switch(i("Parse full page: type=%s, byteLength=%s",l.packetType,a.byteLength),l.packetType){case 3:return this.parseUserCommentList(a,r.CommonHeader.len)}}parseUserCommentList(a,l){const u=e.UINT32_LE.get(a,l);l+=4,l+=u;let c=e.UINT32_LE.get(a,l);for(l+=4;c-- >0;)l+=this.parseUserComment(a,l)}};return VorbisParser.VorbisParser=s,VorbisParser}var hasRequiredFlacParser;function requireFlacParser(){if(hasRequiredFlacParser)return FlacParser;hasRequiredFlacParser=1,Object.defineProperty(FlacParser,"__esModule",{value:!0}),FlacParser.FlacParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),n=requireUtil$1(),r=requireVorbis(),i=requireAbstractID3Parser(),s=requireFourCC(),o=requireVorbisParser(),a=requireVorbisDecoder(),l=(0,t.default)("music-metadata:parser:FLAC");var u;(function(m){m[m.STREAMINFO=0]="STREAMINFO",m[m.PADDING=1]="PADDING",m[m.APPLICATION=2]="APPLICATION",m[m.SEEKTABLE=3]="SEEKTABLE",m[m.VORBIS_COMMENT=4]="VORBIS_COMMENT",m[m.CUESHEET=5]="CUESHEET",m[m.PICTURE=6]="PICTURE"})(u||(u={}));let c=class extends i.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(d,T,_){return super.init(d,T,_),this.vorbisParser=new o.VorbisParser(d,_),this}async postId3v2Parse(){if((await this.tokenizer.readToken(s.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let T;do T=await this.tokenizer.readToken(f.BlockHeader),await this.parseDataBlock(T);while(!T.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const _=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*_/this.metadata.format.duration)}}parseDataBlock(d){switch(l(`blockHeader type=${d.type}, length=${d.length}`),d.type){case u.STREAMINFO:return this.parseBlockStreamInfo(d.length);case u.PADDING:this.padding+=d.length;break;case u.APPLICATION:break;case u.SEEKTABLE:break;case u.VORBIS_COMMENT:return this.parseComment(d.length);case u.CUESHEET:break;case u.PICTURE:return this.parsePicture(d.length).then();default:this.metadata.addWarning("Unknown block type: "+d.type)}return this.tokenizer.ignore(d.length).then()}async parseBlockStreamInfo(d){if(d!==f.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const T=await this.tokenizer.readToken(f.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",T.channels),this.metadata.setFormat("bitsPerSample",T.bitsPerSample),this.metadata.setFormat("sampleRate",T.sampleRate),T.totalSamples>0&&this.metadata.setFormat("duration",T.totalSamples/T.sampleRate)}async parseComment(d){const T=await this.tokenizer.readToken(new e.Uint8ArrayType(d)),_=new a.VorbisDecoder(T,0);_.readStringUtf8();const x=_.readInt32();for(let v=0;v<x;v++){const A=_.parseUserComment();this.vorbisParser.addTag(A.key,A.value)}}async parsePicture(d){if(this.options.skipCovers)return this.tokenizer.ignore(d);{const T=await this.tokenizer.readToken(new r.VorbisPictureToken(d));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",T)}}};FlacParser.FlacParser=c;class f{}return f.BlockHeader={len:4,get:(m,d)=>({lastBlock:n.getBit(m,d,7),type:n.getBitAllignedNumber(m,d,1,7),length:e.UINT24_BE.get(m,d+1)})},f.BlockStreamInfo={len:34,get:(m,d)=>({minimumBlockSize:e.UINT16_BE.get(m,d),maximumBlockSize:e.UINT16_BE.get(m,d+2)/1e3,minimumFrameSize:e.UINT24_BE.get(m,d+4),maximumFrameSize:e.UINT24_BE.get(m,d+7),sampleRate:e.UINT24_BE.get(m,d+10)>>4,channels:n.getBitAllignedNumber(m,d+12,4,3)+1,bitsPerSample:n.getBitAllignedNumber(m,d+12,7,5)+1,totalSamples:n.getBitAllignedNumber(m,d+13,4,36),fileMD5:new e.Uint8ArrayType(16).get(m,d+18)})},FlacParser}var MP4Parser={},Atom={},AtomToken={},hasRequiredAtomToken;function requireAtomToken(){return hasRequiredAtomToken||(hasRequiredAtomToken=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ChapterText=e.StcoAtom=e.StszAtom=e.StscAtom=e.SampleToChunkToken=e.SttsAtom=e.TimeToSampleToken=e.SoundSampleDescriptionV0=e.SoundSampleDescriptionVersion=e.StsdAtom=e.TrackHeaderAtom=e.NameAtom=e.DataAtom=e.MvhdAtom=e.MdhdAtom=e.FixedLengthAtom=e.mhdr=e.tkhd=e.ftyp=e.ExtendedSize=e.Header=void 0;const t=requireLib$2(),n=requireBrowser$3(),r=requireFourCC(),i=(0,n.default)("music-metadata:parser:MP4:atom");e.Header={len:8,get:(U,R)=>{const M=t.UINT32_BE.get(U,R);if(M<0)throw new Error("Invalid atom header length");return{length:BigInt(M),name:new t.StringType(4,"binary").get(U,R+4)}},put:(U,R,M)=>(t.UINT32_BE.put(U,R,Number(M.length)),r.FourCcToken.put(U,R+4,M.name))},e.ExtendedSize=t.UINT64_BE,e.ftyp={len:4,get:(U,R)=>({type:new t.StringType(4,"ascii").get(U,R)})},e.tkhd={len:4,get:(U,R)=>({type:new t.StringType(4,"ascii").get(U,R)})},e.mhdr={len:8,get:(U,R)=>({version:t.UINT8.get(U,R),flags:t.UINT24_BE.get(U,R+1),nextItemID:t.UINT32_BE.get(U,R+4)})};class s{constructor(R,M,ne){if(this.len=R,R<M)throw new Error(`Atom ${ne} expected to be ${M}, but specifies ${R} bytes long.`);R>M&&i(`Warning: atom ${ne} expected to be ${M}, but was actually ${R} bytes long.`)}}e.FixedLengthAtom=s;const o={len:4,get:(U,R)=>{const M=t.UINT32_BE.get(U,R)-2082844800;return new Date(M*1e3)}};class a extends s{constructor(R){super(R,24,"mdhd"),this.len=R}get(R,M){return{version:t.UINT8.get(R,M+0),flags:t.UINT24_BE.get(R,M+1),creationTime:o.get(R,M+4),modificationTime:o.get(R,M+8),timeScale:t.UINT32_BE.get(R,M+12),duration:t.UINT32_BE.get(R,M+16),language:t.UINT16_BE.get(R,M+20),quality:t.UINT16_BE.get(R,M+22)}}}e.MdhdAtom=a;class l extends s{constructor(R){super(R,100,"mvhd"),this.len=R}get(R,M){return{version:t.UINT8.get(R,M),flags:t.UINT24_BE.get(R,M+1),creationTime:o.get(R,M+4),modificationTime:o.get(R,M+8),timeScale:t.UINT32_BE.get(R,M+12),duration:t.UINT32_BE.get(R,M+16),preferredRate:t.UINT32_BE.get(R,M+20),preferredVolume:t.UINT16_BE.get(R,M+24),previewTime:t.UINT32_BE.get(R,M+72),previewDuration:t.UINT32_BE.get(R,M+76),posterTime:t.UINT32_BE.get(R,M+80),selectionTime:t.UINT32_BE.get(R,M+84),selectionDuration:t.UINT32_BE.get(R,M+88),currentTime:t.UINT32_BE.get(R,M+92),nextTrackID:t.UINT32_BE.get(R,M+96)}}}e.MvhdAtom=l;class u{constructor(R){this.len=R}get(R,M){return{type:{set:t.UINT8.get(R,M+0),type:t.UINT24_BE.get(R,M+1)},locale:t.UINT24_BE.get(R,M+4),value:Buffer.from(new t.Uint8ArrayType(this.len-8).get(R,M+8))}}}e.DataAtom=u;class c{constructor(R){this.len=R}get(R,M){return{version:t.UINT8.get(R,M),flags:t.UINT24_BE.get(R,M+1),name:new t.StringType(this.len-4,"utf-8").get(R,M+4)}}}e.NameAtom=c;class f{constructor(R){this.len=R}get(R,M){return{version:t.UINT8.get(R,M),flags:t.UINT24_BE.get(R,M+1),creationTime:o.get(R,M+4),modificationTime:o.get(R,M+8),trackId:t.UINT32_BE.get(R,M+12),duration:t.UINT32_BE.get(R,M+20),layer:t.UINT16_BE.get(R,M+24),alternateGroup:t.UINT16_BE.get(R,M+26),volume:t.UINT16_BE.get(R,M+28)}}}e.TrackHeaderAtom=f;const m={len:8,get:(U,R)=>({version:t.UINT8.get(U,R),flags:t.UINT24_BE.get(U,R+1),numberOfEntries:t.UINT32_BE.get(U,R+4)})};class d{constructor(R){this.len=R}get(R,M){return{dataFormat:r.FourCcToken.get(R,M),dataReferenceIndex:t.UINT16_BE.get(R,M+10),description:new t.Uint8ArrayType(this.len-12).get(R,M+12)}}}class T{constructor(R){this.len=R}get(R,M){const ne=m.get(R,M);M+=m.len;const W=[];for(let G=0;G<ne.numberOfEntries;++G){const re=t.UINT32_BE.get(R,M);M+=t.UINT32_BE.len,W.push(new d(re).get(R,M)),M+=re}return{header:ne,table:W}}}e.StsdAtom=T,e.SoundSampleDescriptionVersion={len:8,get(U,R){return{version:t.INT16_BE.get(U,R),revision:t.INT16_BE.get(U,R+2),vendor:t.INT32_BE.get(U,R+4)}}},e.SoundSampleDescriptionV0={len:12,get(U,R){return{numAudioChannels:t.INT16_BE.get(U,R+0),sampleSize:t.INT16_BE.get(U,R+2),compressionId:t.INT16_BE.get(U,R+4),packetSize:t.INT16_BE.get(U,R+6),sampleRate:t.UINT16_BE.get(U,R+8)+t.UINT16_BE.get(U,R+10)/1e4}}};class _{constructor(R,M){this.len=R,this.token=M}get(R,M){const ne=t.INT32_BE.get(R,M+4);return{version:t.INT8.get(R,M+0),flags:t.INT24_BE.get(R,M+1),numberOfEntries:ne,entries:L(R,this.token,M+8,this.len-8,ne)}}}e.TimeToSampleToken={len:8,get(U,R){return{count:t.INT32_BE.get(U,R+0),duration:t.INT32_BE.get(U,R+4)}}};class x extends _{constructor(R){super(R,e.TimeToSampleToken),this.len=R}}e.SttsAtom=x,e.SampleToChunkToken={len:12,get(U,R){return{firstChunk:t.INT32_BE.get(U,R),samplesPerChunk:t.INT32_BE.get(U,R+4),sampleDescriptionId:t.INT32_BE.get(U,R+8)}}};class v extends _{constructor(R){super(R,e.SampleToChunkToken),this.len=R}}e.StscAtom=v;class A{constructor(R){this.len=R}get(R,M){const ne=t.INT32_BE.get(R,M+8);return{version:t.INT8.get(R,M),flags:t.INT24_BE.get(R,M+1),sampleSize:t.INT32_BE.get(R,M+4),numberOfEntries:ne,entries:L(R,t.INT32_BE,M+12,this.len-12,ne)}}}e.StszAtom=A;class B extends _{constructor(R){super(R,t.INT32_BE),this.len=R}}e.StcoAtom=B;class O{constructor(R){this.len=R}get(R,M){const ne=t.INT16_BE.get(R,M+0);return new t.StringType(ne,"utf-8").get(R,M+2)}}e.ChapterText=O;function L(U,R,M,ne,W){if(i(`remainingLen=${ne}, numberOfEntries=${W} * token-len=${R.len}`),ne===0)return[];if(ne!==W*R.len)throw new Error("mismatch number-of-entries with remaining atom-length");const G=[];for(let re=0;re<W;++re)G.push(R.get(U,M)),M+=R.len;return G}}(AtomToken)),AtomToken}var hasRequiredAtom;function requireAtom(){if(hasRequiredAtom)return Atom;hasRequiredAtom=1,Object.defineProperty(Atom,"__esModule",{value:!0}),Atom.Atom=void 0;const e=requireBrowser$3(),t=requireAtomToken(),n=(0,e.default)("music-metadata:parser:MP4:Atom");let r=class Ve{static async readAtom(s,o,a,l){const u=s.position,c=await s.readToken(t.Header);c.length===BigInt(1)&&(c.length=await s.readToken(t.ExtendedSize));const m=new Ve(c,c.length===BigInt(1),a),d=m.getPayloadLength(l);return n(`parse atom name=${m.atomPath}, extended=${m.extended}, offset=${u}, len=${m.header.length}`),await m.readData(s,o,d),m}constructor(s,o,a){this.header=s,this.extended=o,this.parent=a,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(s){return(this.header.length===BigInt(0)?s:Number(this.header.length))-this.getHeaderLength()}async readAtoms(s,o,a){for(;a>0;){const l=await Ve.readAtom(s,o,this,a);this.children.push(l),a-=l.header.length===BigInt(0)?a:Number(l.header.length)}}async readData(s,o,a){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(s,o,this.getPayloadLength(a));case"meta":const u=(await s.peekToken(t.Header)).name==="hdlr"?0:4;return await s.ignore(u),this.readAtoms(s,o,this.getPayloadLength(a)-u);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return o(this,a)}}};return Atom.Atom=r,Atom}var hasRequiredMP4Parser;function requireMP4Parser(){if(hasRequiredMP4Parser)return MP4Parser;hasRequiredMP4Parser=1,Object.defineProperty(MP4Parser,"__esModule",{value:!0}),MP4Parser.MP4Parser=void 0;const e=requireBrowser$3(),t=requireLib$2(),n=requireBasicParser(),r=requireID3v1Parser(),i=requireType(),s=requireAtom(),o=requireAtomToken(),a=(0,e.default)("music-metadata:parser:MP4"),l="iTunes",u={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function c(m,d,T){return T.indexOf(m)===d}let f=class Ge extends n.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async d=>{const T=await this.tokenizer.readToken(new o.MvhdAtom(d));this.metadata.setFormat("creationTime",T.creationTime),this.metadata.setFormat("modificationTime",T.modificationTime)},mdhd:async d=>{const T=await this.tokenizer.readToken(new o.MdhdAtom(d)),_=this.getTrackDescription();_.creationTime=T.creationTime,_.modificationTime=T.modificationTime,_.timeScale=T.timeScale,_.duration=T.duration},chap:async d=>{const T=this.getTrackDescription(),_=[];for(;d>=t.UINT32_BE.len;)_.push(await this.tokenizer.readNumber(t.UINT32_BE)),d-=t.UINT32_BE.len;T.chapterList=_},tkhd:async d=>{const T=await this.tokenizer.readToken(new o.TrackHeaderAtom(d));this.tracks.push(T)},mdat:async d=>{if(this.audioLengthInBytes=d,this.calculateBitRate(),this.options.includeChapters){const T=this.tracks.filter(_=>_.chapterList);if(T.length===1){const _=T[0].chapterList,x=this.tracks.filter(v=>_.indexOf(v.trackId)!==-1);if(x.length===1)return this.parseChapterTrack(x[0],T[0],d)}}await this.tokenizer.ignore(d)},ftyp:async d=>{const T=[];for(;d>0;){const x=await this.tokenizer.readToken(o.ftyp);d-=o.ftyp.len;const v=x.type.replace(/\W/g,"");v.length>0&&T.push(v)}a(`ftyp: ${T.join("/")}`);const _=T.filter(c).join("/");this.metadata.setFormat("container",_)},stsd:async d=>{const T=await this.tokenizer.readToken(new o.StsdAtom(d)),_=this.getTrackDescription();_.soundSampleDescription=T.table.map(x=>this.parseSoundSampleDescription(x))},stsc:async d=>{const T=await this.tokenizer.readToken(new o.StscAtom(d));this.getTrackDescription().sampleToChunkTable=T.entries},stts:async d=>{const T=await this.tokenizer.readToken(new o.SttsAtom(d));this.getTrackDescription().timeToSampleTable=T.entries},stsz:async d=>{const T=await this.tokenizer.readToken(new o.StszAtom(d)),_=this.getTrackDescription();_.sampleSize=T.sampleSize,_.sampleSizeTable=T.entries},stco:async d=>{const T=await this.tokenizer.readToken(new o.StcoAtom(d));this.getTrackDescription().chunkOffsetTable=T.entries},date:async d=>{const T=await this.tokenizer.readToken(new t.StringType(d,"utf-8"));this.addTag("date",T)}}}static read_BE_Integer(d,T){const _=(T?"INT":"UINT")+d.length*8+(d.length>1?"_BE":""),x=t[_];if(!x)throw new Error('Token for integer type not found: "'+_+'"');return Number(x.get(d,0))}async parse(){this.tracks=[];let d=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||d>0;){try{if((await this.tokenizer.peekToken(o.Header)).name==="\0\0\0\0"){const A=`Error at offset=${this.tokenizer.position}: box.id=0`;a(A),this.addWarning(A);break}}catch(v){const A=`Error at offset=${this.tokenizer.position}: ${v.message}`;a(A),this.addWarning(A);break}const x=await s.Atom.readAtom(this.tokenizer,(v,A)=>this.handleAtom(v,A),null,d);d-=x.header.length===BigInt(0)?d:Number(x.header.length)}const T=[];this.tracks.forEach(x=>{const v=[];x.soundSampleDescription.forEach(A=>{const B={},O=u[A.dataFormat];if(O?(v.push(O.format),B.codecName=O.format):B.codecName=`<${A.dataFormat}>`,A.description){const{description:L}=A;L.sampleRate>0&&(B.type=i.TrackType.audio,B.audio={samplingFrequency:L.sampleRate,bitDepth:L.sampleSize,channels:L.numAudioChannels})}this.metadata.addStreamInfo(B)}),v.length>=1&&T.push(v.join("/"))}),T.length>0&&this.metadata.setFormat("codec",T.filter(c).join("+"));const _=this.tracks.filter(x=>x.soundSampleDescription.length>=1&&x.soundSampleDescription[0].description&&x.soundSampleDescription[0].description.numAudioChannels>0);if(_.length>=1){const x=_[0];if(x.timeScale>0){const B=x.duration/x.timeScale;this.metadata.setFormat("duration",B)}const v=x.soundSampleDescription[0];if(v.description&&(this.metadata.setFormat("sampleRate",v.description.sampleRate),this.metadata.setFormat("bitsPerSample",v.description.sampleSize),this.metadata.setFormat("numberOfChannels",v.description.numAudioChannels),x.timeScale===0&&x.timeToSampleTable.length>0)){const O=x.timeToSampleTable.map(L=>L.count*L.duration).reduce((L,U)=>L+U)/v.description.sampleRate;this.metadata.setFormat("duration",O)}const A=u[v.dataFormat];A&&this.metadata.setFormat("lossless",!A.lossy),this.calculateBitRate()}}async handleAtom(d,T){if(d.parent)switch(d.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(d)}if(this.atomParsers[d.header.name])return this.atomParsers[d.header.name](T);a(`No parser for atom path=${d.atomPath}, payload-len=${T}, ignoring atom`),await this.tokenizer.ignore(T)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(d,T){this.metadata.addTag(l,d,T)}addWarning(d){a("Warning: "+d),this.metadata.addWarning(d)}parseMetadataItemData(d){let T=d.header.name;return d.readAtoms(this.tokenizer,async(_,x)=>{const v=_.getPayloadLength(x);switch(_.header.name){case"data":return this.parseValueAtom(T,_);case"name":case"mean":case"rate":const A=await this.tokenizer.readToken(new o.NameAtom(v));T+=":"+A.name;break;default:const B=await this.tokenizer.readToken(new t.BufferType(v));this.addWarning("Unsupported meta-item: "+T+"["+_.header.name+"] => value="+B.toString("hex")+" ascii="+B.toString("ascii"))}},d.getPayloadLength(0))}async parseValueAtom(d,T){const _=await this.tokenizer.readToken(new o.DataAtom(Number(T.header.length)-o.Header.len));if(_.type.set!==0)throw new Error("Unsupported type-set != 0: "+_.type.set);switch(_.type.type){case 0:switch(d){case"trkn":case"disk":const x=t.UINT8.get(_.value,3),v=t.UINT8.get(_.value,5);this.addTag(d,x+"/"+v);break;case"gnre":const A=t.UINT8.get(_.value,1),B=r.Genres[A-1];this.addTag(d,B);break;case"rate":const O=_.value.toString("ascii");this.addTag(d,O);break;default:a("unknown proprietary value type for: "+T.atomPath)}break;case 1:case 18:this.addTag(d,_.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(d,{format:"image/jpeg",data:Buffer.from(_.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(d,{format:"image/png",data:Buffer.from(_.value)});break;case 21:this.addTag(d,Ge.read_BE_Integer(_.value,!0));break;case 22:this.addTag(d,Ge.read_BE_Integer(_.value,!1));break;case 65:this.addTag(d,_.value.readInt8(0));break;case 66:this.addTag(d,_.value.readInt16BE(0));break;case 67:this.addTag(d,_.value.readInt32BE(0));break;default:this.addWarning(`atom key=${d}, has unknown well-known-type (data-type): ${_.type.type}`)}}parseSoundSampleDescription(d){const T={dataFormat:d.dataFormat,dataReferenceIndex:d.dataReferenceIndex};let _=0;const x=o.SoundSampleDescriptionVersion.get(d.description,_);return _+=o.SoundSampleDescriptionVersion.len,x.version===0||x.version===1?T.description=o.SoundSampleDescriptionV0.get(d.description,_):a(`Warning: sound-sample-description ${x} not implemented`),T}async parseChapterTrack(d,T,_){if(!d.sampleSize&&d.chunkOffsetTable.length!==d.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const x=[];for(let v=0;v<d.chunkOffsetTable.length&&_>0;++v){const B=d.chunkOffsetTable[v]-this.tokenizer.position,O=d.sampleSize>0?d.sampleSize:d.sampleSizeTable[v];if(_-=B+O,_<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(B);const L=await this.tokenizer.readToken(new o.ChapterText(O));a(`Chapter ${v+1}: ${L}`);const U={title:L,sampleOffset:this.findSampleOffset(T,this.tokenizer.position)};a(`Chapter title=${U.title}, offset=${U.sampleOffset}/${this.tracks[0].duration}`),x.push(U)}this.metadata.setFormat("chapters",x),await this.tokenizer.ignore(_)}findSampleOffset(d,T){let _=0;d.timeToSampleTable.forEach(v=>{_+=v.count*v.duration}),a(`Total duration=${_}`);let x=0;for(;x<d.chunkOffsetTable.length&&d.chunkOffsetTable[x]<T;)++x;return this.getChunkDuration(x+1,d)}getChunkDuration(d,T){let _=0,x=T.timeToSampleTable[_].count,v=T.timeToSampleTable[_].duration,A=1,B=this.getSamplesPerChunk(A,T.sampleToChunkTable),O=0;for(;A<d;){const L=Math.min(x,B);O+=L*v,x-=L,B-=L,B===0?(++A,B=this.getSamplesPerChunk(A,T.sampleToChunkTable)):(++_,x=T.timeToSampleTable[_].count,v=T.timeToSampleTable[_].duration)}return O}getSamplesPerChunk(d,T){for(let _=0;_<T.length-1;++_)if(d>=T[_].firstChunk&&d<T[_+1].firstChunk)return T[_].samplesPerChunk;return T[T.length-1].samplesPerChunk}};return MP4Parser.MP4Parser=f,MP4Parser}var MpegParser={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={},hasRequiredReplayGainDataFormat;function requireReplayGainDataFormat(){if(hasRequiredReplayGainDataFormat)return ReplayGainDataFormat;hasRequiredReplayGainDataFormat=1,Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0}),ReplayGainDataFormat.ReplayGain=void 0;const e=requireUtil$1();var t;(function(r){r[r.not_set=0]="not_set",r[r.radio=1]="radio",r[r.audiophile=2]="audiophile"})(t||(t={}));var n;return function(r){r[r.unspecified=0]="unspecified",r[r.engineer=1]="engineer",r[r.user=2]="user",r[r.automatic=3]="automatic",r[r.rms_average=4]="rms_average"}(n||(n={})),ReplayGainDataFormat.ReplayGain={len:2,get:(r,i)=>{const s=e.getBitAllignedNumber(r,i,0,3),o=e.getBitAllignedNumber(r,i,6,1),a=e.getBitAllignedNumber(r,i,7,9)/10;if(s>0)return{type:e.getBitAllignedNumber(r,i,0,3),origin:e.getBitAllignedNumber(r,i,3,3),adjustment:o?-a:a}}},ReplayGainDataFormat}var hasRequiredExtendedLameHeader;function requireExtendedLameHeader(){if(hasRequiredExtendedLameHeader)return ExtendedLameHeader;hasRequiredExtendedLameHeader=1,Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0}),ExtendedLameHeader.ExtendedLameHeader=void 0;const e=requireLib$2(),t=requireUtil$1(),n=requireReplayGainDataFormat();return ExtendedLameHeader.ExtendedLameHeader={len:27,get:(r,i)=>{const s=e.UINT32_BE.get(r,i+2);return{revision:t.getBitAllignedNumber(r,i,0,4),vbr_method:t.getBitAllignedNumber(r,i,4,4),lowpass_filter:100*e.UINT8.get(r,i+1),track_peak:s===0?void 0:s/Math.pow(2,23),track_gain:n.ReplayGain.get(r,6),album_gain:n.ReplayGain.get(r,8),music_length:e.UINT32_BE.get(r,i+20),music_crc:e.UINT8.get(r,i+24),header_crc:e.UINT16_BE.get(r,i+24)}}},ExtendedLameHeader}var hasRequiredXingTag;function requireXingTag(){return hasRequiredXingTag||(hasRequiredXingTag=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readXingHeader=e.XingHeaderFlags=e.LameEncoderVersion=e.InfoTagHeaderTag=void 0;const t=requireLib$2(),n=requireUtil$1(),r=requireExtendedLameHeader();e.InfoTagHeaderTag=new t.StringType(4,"ascii"),e.LameEncoderVersion=new t.StringType(6,"ascii"),e.XingHeaderFlags={len:4,get:(s,o)=>({frames:n.isBitSet(s,o,31),bytes:n.isBitSet(s,o,30),toc:n.isBitSet(s,o,29),vbrScale:n.isBitSet(s,o,28)})};async function i(s){const o=await s.readToken(e.XingHeaderFlags),a={};if(o.frames&&(a.numFrames=await s.readToken(t.UINT32_BE)),o.bytes&&(a.streamSize=await s.readToken(t.UINT32_BE)),o.toc&&(a.toc=Buffer.alloc(100),await s.readBuffer(a.toc)),o.vbrScale&&(a.vbrScale=await s.readToken(t.UINT32_BE)),await s.peekToken(new t.StringType(4,"ascii"))==="LAME"&&(await s.ignore(4),a.lame={version:await s.readToken(new t.StringType(5,"ascii"))},a.lame.version.match(/\d+.\d+/g))){const f=a.lame.version.match(/\d+.\d+/g)[0].split(".").map(m=>parseInt(m,10));f[0]>=3&&f[1]>=90&&(a.lame.extended=await s.readToken(r.ExtendedLameHeader))}return a}e.readXingHeader=i}(XingTag)),XingTag}var hasRequiredMpegParser;function requireMpegParser(){if(hasRequiredMpegParser)return MpegParser;hasRequiredMpegParser=1,Object.defineProperty(MpegParser,"__esModule",{value:!0}),MpegParser.MpegParser=void 0;const e=requireLib$2(),t=requireCore$2(),n=requireBrowser$3(),r=requireUtil$1(),i=requireAbstractID3Parser(),s=requireXingTag(),o=(0,n.default)("music-metadata:parser:mpeg"),a=1024,l={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},u=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class c{constructor(_,x){this.versionIndex=r.getBitAllignedNumber(_,x+1,3,2),this.layer=c.LayerDescription[r.getBitAllignedNumber(_,x+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(_,x):this.parseMpegHeader(_,x),this.isProtectedByCRC=!r.isBitSet(_,x+1,7)}calcDuration(_){return _*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return c.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(_,x){this.container="MPEG",this.bitrateIndex=r.getBitAllignedNumber(_,x+2,0,4),this.sampRateFreqIndex=r.getBitAllignedNumber(_,x+2,4,2),this.padding=r.isBitSet(_,x+2,6),this.privateBit=r.isBitSet(_,x+2,7),this.channelModeIndex=r.getBitAllignedNumber(_,x+3,0,2),this.modeExtension=r.getBitAllignedNumber(_,x+3,2,2),this.isCopyrighted=r.isBitSet(_,x+3,4),this.isOriginalMedia=r.isBitSet(_,x+3,5),this.emphasis=r.getBitAllignedNumber(_,x+3,7,2),this.version=c.VersionID[this.versionIndex],this.channelMode=c.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const v=this.calcBitrate();if(!v)throw new Error("Cannot determine bit-rate");if(this.bitrate=v*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(_,x){o("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const v=r.getBitAllignedNumber(_,x+2,0,2);this.codec="AAC",this.codecProfile=l.AudioObjectTypes[v],o(`MPEG-4 audio-codec=${this.codec}`);const A=r.getBitAllignedNumber(_,x+2,2,4);this.samplingRate=l.SamplingFrequencies[A],o(`sampling-rate=${this.samplingRate}`);const B=r.getBitAllignedNumber(_,x+2,7,3);this.mp4ChannelConfig=u[B],o(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=r.getBitAllignedNumber(_,x+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const _=`${Math.floor(this.version)}${this.layer}`;return c.bitrate_index[this.bitrateIndex][_]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:c.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}c.SyncByte1=255,c.SyncByte2=224,c.VersionID=[2.5,null,2,1],c.LayerDescription=[0,3,2,1],c.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],c.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},c.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},c.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const f={len:4,get:(T,_)=>new c(T,_)};function m(T){return"V"+Math.floor((100-T)/10)}let d=class extends i.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(a),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let _=!1;for(;!_;)await this.sync(),_=await this.parseCommonMpegHeader()}catch(_){if(_ instanceof t.EndOfStreamError){if(o("End-of-stream"),this.calculateEofDuration){const x=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",x);const v=x/this.metadata.format.sampleRate;o(`Calculate duration at EOF: ${v} sec.`,v),this.metadata.setFormat("duration",v)}}else throw _}}finalize(){const _=this.metadata.format,x=this.metadata.native.hasOwnProperty("ID3v1");if(_.duration&&this.tokenizer.fileInfo.size){const v=this.tokenizer.fileInfo.size-this.mpegOffset-(x?128:0);_.codecProfile&&_.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",v*8/_.duration)}else if(this.tokenizer.fileInfo.size&&_.codecProfile==="CBR"){const v=this.tokenizer.fileInfo.size-this.mpegOffset-(x?128:0),A=Math.round(v/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",A);const B=A/_.sampleRate;o("Calculate CBR duration based on file size: %s",B),this.metadata.setFormat("duration",B)}}async sync(){let _=!1;for(;;){let x=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:a,mayBeLess:!0}),this.syncPeek.len<=163)throw new t.EndOfStreamError;for(;;)if(_&&(this.syncPeek.buf[x]&224)===224){this.buf_frame_header[0]=c.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[x],await this.tokenizer.ignore(x),o(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(o(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(_=!1,x=this.syncPeek.buf.indexOf(c.SyncByte1,x),x===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new t.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++x,_=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let _;try{_=f.get(this.buf_frame_header,0)}catch(x){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+x.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",_.container),this.metadata.setFormat("codec",_.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",_.samplingRate),this.frameCount++,_.version>=2&&_.layer===0?this.parseAdts(_):this.parseAudioFrameHeader(_)}async parseAudioFrameHeader(_){this.metadata.setFormat("numberOfChannels",_.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",_.bitrate),this.frameCount<20*1e4&&o("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,_.layer,_.bitrate,_.samplingRate);const x=_.calcSlotSize();if(x===null)throw new Error("invalid slot_size");const v=_.calcSamplesPerFrame();o(`samples_per_frame=${v}`);const B=v/8*_.bitrate/_.samplingRate+(_.padding?x:0);if(this.frame_size=Math.floor(B),this.audioFrameHeader=_,this.bitrates.push(_.bitrate),this.frameCount===1)return this.offset=f.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=v,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=v,this.calculateEofDuration=!0),this.offset=4,_.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(_){const x=Buffer.alloc(3);await this.tokenizer.readBuffer(x),_.frameLength+=r.getBitAllignedNumber(x,0,0,11),this.totalDataLength+=_.frameLength,this.samplesPerFrame=1024;const v=_.samplingRate/this.samplesPerFrame,B=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*v+.5;if(this.metadata.setFormat("bitrate",B),o(`frame-count=${this.frameCount}, size=${_.frameLength} bytes, bit-rate=${B}`),await this.tokenizer.ignore(_.frameLength>7?_.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",_.codecProfile),_.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",_.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(e.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const _=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new e.Uint8ArrayType(_)),this.offset+=_,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const _=await this.tokenizer.readToken(s.InfoTagHeaderTag);switch(this.offset+=s.InfoTagHeaderTag.len,_){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const v=await this.readXingInfoHeader(),A=m(v.vbrScale);return this.metadata.setFormat("codecProfile",A),null;case"Xtra":break;case"LAME":const B=await this.tokenizer.readToken(s.LameEncoderVersion);if(this.frame_size>=this.offset+s.LameEncoderVersion.len)return this.offset+=s.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+B),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const x=this.frame_size-this.offset;return x<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(x),null}async readXingInfoHeader(){const _=this.tokenizer.position,x=await(0,s.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-_,x.lame&&(this.metadata.setFormat("tool","LAME "+r.stripNulls(x.lame.version)),x.lame.extended&&(this.metadata.setFormat("trackPeakLevel",x.lame.extended.track_peak),x.lame.extended.track_gain&&this.metadata.setFormat("trackGain",x.lame.extended.track_gain.adjustment),x.lame.extended.album_gain&&this.metadata.setFormat("albumGain",x.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",x.lame.extended.music_length/1e3))),x.streamSize){const A=this.audioFrameHeader.calcDuration(x.numFrames);return this.metadata.setFormat("duration",A),o("Get duration from Xing header: %s",this.metadata.format.duration),x}const v=this.frame_size-this.offset;return await this.skipFrameData(v),x}async skipFrameData(_){if(_<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(_),this.countSkipFrameData+=_}areAllSame(_){const x=_[0];return _.every(v=>v===x)}};return MpegParser.MpegParser=d,MpegParser}var musepack={},MpcSv8Parser={},StreamVersion8={},hasRequiredStreamVersion8;function requireStreamVersion8(){if(hasRequiredStreamVersion8)return StreamVersion8;hasRequiredStreamVersion8=1,Object.defineProperty(StreamVersion8,"__esModule",{value:!0}),StreamVersion8.StreamReader=void 0;const e=requireLib$2(),t=requireBrowser$3(),n=requireUtil$1(),r=(0,t.default)("music-metadata:parser:musepack:sv8"),i=new e.StringType(2,"binary"),s={len:5,get:(l,u)=>({crc:e.UINT32_LE.get(l,u),streamVersion:e.UINT8.get(l,u+4)})},o={len:2,get:(l,u)=>({sampleFrequency:[44100,48e3,37800,32e3][n.getBitAllignedNumber(l,u,0,3)],maxUsedBands:n.getBitAllignedNumber(l,u,3,5),channelCount:n.getBitAllignedNumber(l,u+1,0,4)+1,msUsed:n.isBitSet(l,u+1,4),audioBlockFrames:n.getBitAllignedNumber(l,u+1,5,3)})};class a{constructor(u){this.tokenizer=u}async readPacketHeader(){const u=await this.tokenizer.readToken(i),c=await this.readVariableSizeField();return{key:u,payloadLength:c.value-2-c.len}}async readStreamHeader(u){const c={};r(`Reading SH at offset=${this.tokenizer.position}`);const f=await this.tokenizer.readToken(s);u-=s.len,Object.assign(c,f),r(`SH.streamVersion = ${f.streamVersion}`);const m=await this.readVariableSizeField();u-=m.len,c.sampleCount=m.value;const d=await this.readVariableSizeField();u-=d.len,c.beginningOfSilence=d.value;const T=await this.tokenizer.readToken(o);return u-=o.len,Object.assign(c,T),await this.tokenizer.ignore(u),c}async readVariableSizeField(u=1,c=0){let f=await this.tokenizer.readNumber(e.UINT8);return(f&128)===0?{len:u,value:c+f}:(f&=127,f+=c,this.readVariableSizeField(u+1,f<<7))}}return StreamVersion8.StreamReader=a,StreamVersion8}var hasRequiredMpcSv8Parser;function requireMpcSv8Parser(){if(hasRequiredMpcSv8Parser)return MpcSv8Parser;hasRequiredMpcSv8Parser=1,Object.defineProperty(MpcSv8Parser,"__esModule",{value:!0}),MpcSv8Parser.MpcSv8Parser=void 0;const e=requireBrowser$3(),t=requireBasicParser(),n=requireAPEv2Parser(),r=requireFourCC(),i=requireStreamVersion8(),s=(0,e.default)("music-metadata:parser:musepack");let o=class extends t.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(r.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const l=new i.StreamReader(this.tokenizer);do{const u=await l.readPacketHeader();switch(s(`packet-header key=${u.key}, payloadLength=${u.payloadLength}`),u.key){case"SH":const c=await l.readStreamHeader(u.payloadLength);this.metadata.setFormat("numberOfSamples",c.sampleCount),this.metadata.setFormat("sampleRate",c.sampleFrequency),this.metadata.setFormat("duration",c.sampleCount/c.sampleFrequency),this.metadata.setFormat("numberOfChannels",c.channelCount);break;case"AP":this.audioLength+=u.payloadLength,await this.tokenizer.ignore(u.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(u.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),n.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${u.key}`)}}while(!0)}};return MpcSv8Parser.MpcSv8Parser=o,MpcSv8Parser}var MpcSv7Parser={},BitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return BitReader;hasRequiredBitReader=1,Object.defineProperty(BitReader,"__esModule",{value:!0}),BitReader.BitReader=void 0;const e=requireLib$2();let t=class{constructor(r){this.tokenizer=r,this.pos=0,this.dword=void 0}async read(r){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(e.UINT32_LE);let i=this.dword;return this.pos+=r,this.pos<32?(i>>>=32-this.pos,i&(1<<r)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,i&(1<<r)-1):(this.dword=await this.tokenizer.readToken(e.UINT32_LE),this.pos&&(i<<=this.pos,i|=this.dword>>>32-this.pos),i&(1<<r)-1))}async ignore(r){if(this.pos>0){const o=32-this.pos;this.dword=void 0,r-=o,this.pos=0}const i=r%32,s=(r-i)/32;return await this.tokenizer.ignore(s*4),this.read(i)}};return BitReader.BitReader=t,BitReader}var StreamVersion7={},hasRequiredStreamVersion7;function requireStreamVersion7(){if(hasRequiredStreamVersion7)return StreamVersion7;hasRequiredStreamVersion7=1,Object.defineProperty(StreamVersion7,"__esModule",{value:!0}),StreamVersion7.Header=void 0;const e=requireLib$2(),t=requireUtil$1();return StreamVersion7.Header={len:6*4,get:(n,r)=>{const i={signature:Buffer.from(n).toString("latin1",r,r+3),streamMinorVersion:t.getBitAllignedNumber(n,r+3,0,4),streamMajorVersion:t.getBitAllignedNumber(n,r+3,4,4),frameCount:e.UINT32_LE.get(n,r+4),maxLevel:e.UINT16_LE.get(n,r+8),sampleFrequency:[44100,48e3,37800,32e3][t.getBitAllignedNumber(n,r+10,0,2)],link:t.getBitAllignedNumber(n,r+10,2,2),profile:t.getBitAllignedNumber(n,r+10,4,4),maxBand:t.getBitAllignedNumber(n,r+11,0,6),intensityStereo:t.isBitSet(n,r+11,6),midSideStereo:t.isBitSet(n,r+11,7),titlePeak:e.UINT16_LE.get(n,r+12),titleGain:e.UINT16_LE.get(n,r+14),albumPeak:e.UINT16_LE.get(n,r+16),albumGain:e.UINT16_LE.get(n,r+18),lastFrameLength:e.UINT32_LE.get(n,r+20)>>>20&2047,trueGapless:t.isBitSet(n,r+23,0)};return i.lastFrameLength=i.trueGapless?e.UINT32_LE.get(n,20)>>>20&2047:0,i}},StreamVersion7}var hasRequiredMpcSv7Parser;function requireMpcSv7Parser(){if(hasRequiredMpcSv7Parser)return MpcSv7Parser;hasRequiredMpcSv7Parser=1,Object.defineProperty(MpcSv7Parser,"__esModule",{value:!0}),MpcSv7Parser.MpcSv7Parser=void 0;const e=requireBrowser$3(),t=requireBasicParser(),n=requireAPEv2Parser(),r=requireBitReader(),i=requireStreamVersion7(),s=(0,e.default)("music-metadata:parser:musepack");let o=class extends t.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const l=await this.tokenizer.readToken(i.Header);if(l.signature!=="MP+")throw new Error("Unexpected magic number");s(`stream-version=${l.streamMajorVersion}.${l.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",l.sampleFrequency);const u=1152*(l.frameCount-1)+l.lastFrameLength;this.metadata.setFormat("numberOfSamples",u),this.duration=u/l.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new r.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",l.midSideStereo||l.intensityStereo?2:1);const c=await this.bitreader.read(8);return this.metadata.setFormat("codec",(c/100).toFixed(2)),await this.skipAudioData(l.frameCount),s(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),n.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(l){for(;l-- >0;){const c=await this.bitreader.read(20);this.audioLength+=20+c,await this.bitreader.ignore(c)}const u=await this.bitreader.read(11);this.audioLength+=u,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}};return MpcSv7Parser.MpcSv7Parser=o,MpcSv7Parser}var hasRequiredMusepack;function requireMusepack(){if(hasRequiredMusepack)return musepack;hasRequiredMusepack=1,Object.defineProperty(musepack,"__esModule",{value:!0});const e=requireBrowser$3(),t=requireLib$2(),n=requireAbstractID3Parser(),r=requireMpcSv8Parser(),i=requireMpcSv7Parser(),s=(0,e.default)("music-metadata:parser:musepack");class o extends n.AbstractID3Parser{async postId3v2Parse(){const l=await this.tokenizer.peekToken(new t.StringType(3,"binary"));let u;switch(l){case"MP+":{s("Musepack stream-version 7"),u=new i.MpcSv7Parser;break}case"MPC":{s("Musepack stream-version 8"),u=new r.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return u.init(this.metadata,this.tokenizer,this.options),u.parse()}}return musepack.default=o,musepack}var OggParser={},OpusParser={},Opus={},hasRequiredOpus;function requireOpus(){if(hasRequiredOpus)return Opus;hasRequiredOpus=1,Object.defineProperty(Opus,"__esModule",{value:!0}),Opus.IdHeader=void 0;const e=requireLib$2();class t{constructor(r){if(this.len=r,r<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(r,i){return{magicSignature:new e.StringType(8,"ascii").get(r,i+0),version:r.readUInt8(i+8),channelCount:r.readUInt8(i+9),preSkip:r.readInt16LE(i+10),inputSampleRate:r.readInt32LE(i+12),outputGain:r.readInt16LE(i+16),channelMapping:r.readUInt8(i+18)}}}return Opus.IdHeader=t,Opus}var hasRequiredOpusParser;function requireOpusParser(){if(hasRequiredOpusParser)return OpusParser;hasRequiredOpusParser=1,Object.defineProperty(OpusParser,"__esModule",{value:!0}),OpusParser.OpusParser=void 0;const e=requireLib$2(),t=requireVorbisParser(),n=requireOpus();let r=class extends t.VorbisParser{constructor(s,o,a){super(s,o),this.tokenizer=a,this.lastPos=-1}parseFirstPage(s,o){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new n.IdHeader(o.length).get(o,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(s){switch(new e.StringType(8,"ascii").get(s,0)){case"OpusTags":this.parseUserCommentList(s,8),this.lastPos=this.tokenizer.position-s.length;break}}calculateDuration(s){if(this.metadata.format.sampleRate&&s.absoluteGranulePosition>=0){const o=s.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",o),this.metadata.setFormat("duration",o/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const a=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*a/this.metadata.format.duration)}}}};return OpusParser.OpusParser=r,OpusParser}var SpeexParser={},Speex={},hasRequiredSpeex;function requireSpeex(){if(hasRequiredSpeex)return Speex;hasRequiredSpeex=1,Object.defineProperty(Speex,"__esModule",{value:!0}),Speex.Header=void 0;const e=requireLib$2(),t=requireUtil$1();return Speex.Header={len:80,get:(n,r)=>({speex:new e.StringType(8,"ascii").get(n,r+0),version:t.trimRightNull(new e.StringType(20,"ascii").get(n,r+8)),version_id:n.readInt32LE(r+28),header_size:n.readInt32LE(r+32),rate:n.readInt32LE(r+36),mode:n.readInt32LE(r+40),mode_bitstream_version:n.readInt32LE(r+44),nb_channels:n.readInt32LE(r+48),bitrate:n.readInt32LE(r+52),frame_size:n.readInt32LE(r+56),vbr:n.readInt32LE(r+60),frames_per_packet:n.readInt32LE(r+64),extra_headers:n.readInt32LE(r+68),reserved1:n.readInt32LE(r+72),reserved2:n.readInt32LE(r+76)})},Speex}var hasRequiredSpeexParser;function requireSpeexParser(){if(hasRequiredSpeexParser)return SpeexParser;hasRequiredSpeexParser=1,Object.defineProperty(SpeexParser,"__esModule",{value:!0}),SpeexParser.SpeexParser=void 0;const e=requireBrowser$3(),t=requireVorbisParser(),n=requireSpeex(),r=(0,e.default)("music-metadata:parser:ogg:speex");let i=class extends t.VorbisParser{constructor(o,a,l){super(o,a),this.tokenizer=l}parseFirstPage(o,a){r("First Ogg/Speex page");const l=n.Header.get(a,0);this.metadata.setFormat("codec",`Speex ${l.version}`),this.metadata.setFormat("numberOfChannels",l.nb_channels),this.metadata.setFormat("sampleRate",l.rate),l.bitrate!==-1&&this.metadata.setFormat("bitrate",l.bitrate)}};return SpeexParser.SpeexParser=i,SpeexParser}var TheoraParser={},Theora={},hasRequiredTheora;function requireTheora(){if(hasRequiredTheora)return Theora;hasRequiredTheora=1,Object.defineProperty(Theora,"__esModule",{value:!0}),Theora.IdentificationHeader=void 0;const e=requireLib$2();return Theora.IdentificationHeader={len:42,get:(t,n)=>({id:new e.StringType(7,"ascii").get(t,n),vmaj:t.readUInt8(n+7),vmin:t.readUInt8(n+8),vrev:t.readUInt8(n+9),vmbw:t.readUInt16BE(n+10),vmbh:t.readUInt16BE(n+17),nombr:e.UINT24_BE.get(t,n+37),nqual:t.readUInt8(n+40)})},Theora}var hasRequiredTheoraParser;function requireTheoraParser(){if(hasRequiredTheoraParser)return TheoraParser;hasRequiredTheoraParser=1,Object.defineProperty(TheoraParser,"__esModule",{value:!0}),TheoraParser.TheoraParser=void 0;const e=requireBrowser$3(),t=requireTheora(),n=(0,e.default)("music-metadata:parser:ogg:theora");let r=class{constructor(s,o,a){this.metadata=s,this.tokenizer=a}parsePage(s,o){s.headerType.firstPage&&this.parseFirstPage(s,o)}flush(){n("flush")}calculateDuration(s){n("duration calculation not implemented")}parseFirstPage(s,o){n("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const a=t.IdentificationHeader.get(o,0);this.metadata.setFormat("bitrate",a.nombr)}};return TheoraParser.TheoraParser=r,TheoraParser}var hasRequiredOggParser;function requireOggParser(){if(hasRequiredOggParser)return OggParser;hasRequiredOggParser=1,Object.defineProperty(OggParser,"__esModule",{value:!0}),OggParser.OggParser=OggParser.SegmentTable=void 0;const e=requireLib$2(),t=requireCore$2(),n=requireBrowser$3(),r=requireUtil$1(),i=requireFourCC(),s=requireBasicParser(),o=requireVorbisParser(),a=requireOpusParser(),l=requireSpeexParser(),u=requireTheoraParser(),c=(0,n.default)("music-metadata:parser:ogg");class f{static sum(T,_,x){let v=0;for(let A=_;A<_+x;++A)v+=T[A];return v}constructor(T){this.len=T.page_segments}get(T,_){return{totalPageSize:f.sum(T,_,this.len)}}}OggParser.SegmentTable=f;let m=class it extends s.BasicParser{async parse(){c("pos=%s, parsePage()",this.tokenizer.position);try{let T;do{if(T=await this.tokenizer.readToken(it.Header),T.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=T,this.pageNumber=T.pageSequenceNo,c("page#=%s, Ogg.id=%s",T.pageSequenceNo,T.capturePattern);const _=await this.tokenizer.readToken(new f(T));c("totalPageSize=%s",_.totalPageSize);const x=await this.tokenizer.readToken(new e.Uint8ArrayType(_.totalPageSize));if(c("firstPage=%s, lastPage=%s, continued=%s",T.headerType.firstPage,T.headerType.lastPage,T.headerType.continued),T.headerType.firstPage){const v=new e.StringType(7,"ascii").get(Buffer.from(x),0);switch(v){case"vorbis":c("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new o.VorbisParser(this.metadata,this.options);break;case"OpusHea":c("Set page consumer to Ogg/Opus"),this.pageConsumer=new a.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":c("Set page consumer to Ogg/Speex"),this.pageConsumer=new l.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":c("Set page consumer to Ogg/Theora"),this.pageConsumer=new u.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+v+")")}}this.pageConsumer.parsePage(T,x)}while(!T.headerType.lastPage)}catch(T){if(T instanceof t.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),c("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(T.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw T}}};return m.Header={len:27,get:(d,T)=>({capturePattern:i.FourCcToken.get(d,T),version:e.UINT8.get(d,T+4),headerType:{continued:r.getBit(d,T+5,0),firstPage:r.getBit(d,T+5,1),lastPage:r.getBit(d,T+5,2)},absoluteGranulePosition:Number(e.UINT64_LE.get(d,T+6)),streamSerialNumber:e.UINT32_LE.get(d,T+14),pageSequenceNo:e.UINT32_LE.get(d,T+18),pageChecksum:e.UINT32_LE.get(d,T+22),page_segments:e.UINT8.get(d,T+26)})},OggParser.OggParser=m,OggParser}var WaveParser={},RiffChunk={},hasRequiredRiffChunk;function requireRiffChunk(){if(hasRequiredRiffChunk)return RiffChunk;hasRequiredRiffChunk=1,Object.defineProperty(RiffChunk,"__esModule",{value:!0}),RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const e=requireLib$2();RiffChunk.Header={len:8,get:(n,r)=>({chunkID:n.toString("binary",r,r+4),chunkSize:e.UINT32_LE.get(n,4)})};class t{constructor(r){this.tagHeader=r,this.len=r.chunkSize,this.len+=this.len&1}get(r,i){return new e.StringType(this.tagHeader.chunkSize,"ascii").get(r,i)}}return RiffChunk.ListInfoTagValue=t,RiffChunk}var WaveChunk={},hasRequiredWaveChunk;function requireWaveChunk(){return hasRequiredWaveChunk||(hasRequiredWaveChunk=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FactChunk=e.Format=e.WaveFormat=void 0,function(r){r[r.PCM=1]="PCM",r[r.ADPCM=2]="ADPCM",r[r.IEEE_FLOAT=3]="IEEE_FLOAT",r[r.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",r[r.MPEG_LOAS=5634]="MPEG_LOAS",r[r.RAW_AAC1=255]="RAW_AAC1",r[r.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",r[r.DVM=8192]="DVM",r[r.RAW_SPORT=576]="RAW_SPORT",r[r.ESST_AC3=577]="ESST_AC3",r[r.DRM=9]="DRM",r[r.DTS2=8193]="DTS2",r[r.MPEG=80]="MPEG"}(e.WaveFormat||(e.WaveFormat={}));class t{constructor(i){if(i.chunkSize<16)throw new Error("Invalid chunk size");this.len=i.chunkSize}get(i,s){return{wFormatTag:i.readUInt16LE(s),nChannels:i.readUInt16LE(s+2),nSamplesPerSec:i.readUInt32LE(s+4),nAvgBytesPerSec:i.readUInt32LE(s+8),nBlockAlign:i.readUInt16LE(s+12),wBitsPerSample:i.readUInt16LE(s+14)}}}e.Format=t;class n{constructor(i){if(i.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=i.chunkSize}get(i,s){return{dwSampleLength:i.readUInt32LE(s)}}}e.FactChunk=n}(WaveChunk)),WaveChunk}var BwfChunk={},hasRequiredBwfChunk;function requireBwfChunk(){if(hasRequiredBwfChunk)return BwfChunk;hasRequiredBwfChunk=1,Object.defineProperty(BwfChunk,"__esModule",{value:!0}),BwfChunk.BroadcastAudioExtensionChunk=void 0;const e=requireLib$2(),t=requireUtil$1();return BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(n,r)=>({description:(0,t.stripNulls)(new e.StringType(256,"ascii").get(n,r)).trim(),originator:(0,t.stripNulls)(new e.StringType(32,"ascii").get(n,r+256)).trim(),originatorReference:(0,t.stripNulls)(new e.StringType(32,"ascii").get(n,r+288)).trim(),originationDate:(0,t.stripNulls)(new e.StringType(10,"ascii").get(n,r+320)).trim(),originationTime:(0,t.stripNulls)(new e.StringType(8,"ascii").get(n,r+330)).trim(),timeReferenceLow:e.UINT32_LE.get(n,r+338),timeReferenceHigh:e.UINT32_LE.get(n,r+342),version:e.UINT16_LE.get(n,r+346),umid:new e.Uint8ArrayType(64).get(n,r+348),loudnessValue:e.UINT16_LE.get(n,r+412),maxTruePeakLevel:e.UINT16_LE.get(n,r+414),maxMomentaryLoudness:e.UINT16_LE.get(n,r+416),maxShortTermLoudness:e.UINT16_LE.get(n,r+418)})},BwfChunk}var hasRequiredWaveParser;function requireWaveParser(){if(hasRequiredWaveParser)return WaveParser;hasRequiredWaveParser=1,Object.defineProperty(WaveParser,"__esModule",{value:!0}),WaveParser.WaveParser=void 0;const e=requireCore$2(),t=requireLib$2(),n=requireBrowser$3(),r=requireRiffChunk(),i=requireWaveChunk(),s=requireID3v2Parser(),o=requireUtil$1(),a=requireFourCC(),l=requireBasicParser(),u=requireBwfChunk(),c=(0,n.default)("music-metadata:parser:RIFF");let f=class extends l.BasicParser{async parse(){const d=await this.tokenizer.readToken(r.Header);if(c(`pos=${this.tokenizer.position}, parse: chunkID=${d.chunkID}`),d.chunkID==="RIFF")return this.parseRiffChunk(d.chunkSize).catch(T=>{if(!(T instanceof e.EndOfStreamError))throw T})}async parseRiffChunk(d){const T=await this.tokenizer.readToken(a.FourCcToken);switch(this.metadata.setFormat("container",T),T){case"WAVE":return this.readWaveChunk(d-a.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${T}`)}}async readWaveChunk(d){for(;d>=r.Header.len;){const T=await this.tokenizer.readToken(r.Header);switch(d-=r.Header.len+T.chunkSize,T.chunkSize>d&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=T,c(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${T.chunkID}`),T.chunkID){case"LIST":await this.parseListTag(T);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new i.FactChunk(T));break;case"fmt ":const _=await this.tokenizer.readToken(new i.Format(T));let x=i.WaveFormat[_.wFormatTag];x||(c("WAVE/non-PCM format="+_.wFormatTag),x="non-PCM ("+_.wFormatTag+")"),this.metadata.setFormat("codec",x),this.metadata.setFormat("bitsPerSample",_.wBitsPerSample),this.metadata.setFormat("sampleRate",_.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",_.nChannels),this.metadata.setFormat("bitrate",_.nBlockAlign*_.nSamplesPerSec*8),this.blockAlign=_.nBlockAlign;break;case"id3 ":case"ID3 ":const v=await this.tokenizer.readToken(new t.Uint8ArrayType(T.chunkSize)),A=e.fromBuffer(v);await new s.ID3v2Parser().parse(this.metadata,A,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let B=T.chunkSize;if(this.tokenizer.fileInfo.size){const R=this.tokenizer.fileInfo.size-this.tokenizer.position;R<B&&(this.metadata.addWarning("data chunk length exceeding file length"),B=R)}const O=this.fact?this.fact.dwSampleLength:B===4294967295?void 0:B/this.blockAlign;O&&(this.metadata.setFormat("numberOfSamples",O),this.metadata.setFormat("duration",O/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(T.chunkSize);break;case"bext":const L=await this.tokenizer.readToken(u.BroadcastAudioExtensionChunk);Object.keys(L).forEach(R=>{this.metadata.addTag("exif","bext."+R,L[R])});const U=T.chunkSize-u.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(U);break;case"\0\0\0\0":c(`Ignore padding chunk: RIFF/${T.chunkID} of ${T.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+T.chunkID),await this.tokenizer.ignore(T.chunkSize);break;default:c(`Ignore chunk: RIFF/${T.chunkID} of ${T.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+T.chunkID),await this.tokenizer.ignore(T.chunkSize)}this.header.chunkSize%2===1&&(c("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(d){const T=await this.tokenizer.readToken(new t.StringType(4,"binary"));switch(c("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,T),T){case"INFO":return this.parseRiffInfoTags(d.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+T),c("Ignoring chunkID=RIFF/WAVE/LIST/"+T),this.tokenizer.ignore(d.chunkSize-4).then()}}async parseRiffInfoTags(d){for(;d>=8;){const T=await this.tokenizer.readToken(r.Header),_=new r.ListInfoTagValue(T),x=await this.tokenizer.readToken(_);this.addTag(T.chunkID,o.stripNulls(x)),d-=8+_.len}if(d!==0)throw Error("Illegal remaining size: "+d)}addTag(d,T){this.metadata.addTag("exif",d,T)}};return WaveParser.WaveParser=f,WaveParser}var WavPackParser={},WavPackToken={},hasRequiredWavPackToken;function requireWavPackToken(){if(hasRequiredWavPackToken)return WavPackToken;hasRequiredWavPackToken=1,Object.defineProperty(WavPackToken,"__esModule",{value:!0}),WavPackToken.WavPack=void 0;const e=requireLib$2(),t=requireFourCC(),n=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class r{static isBitSet(s,o){return r.getBitAllignedNumber(s,o,1)===1}static getBitAllignedNumber(s,o,a){return s>>>o&4294967295>>>32-a}}return r.BlockHeaderToken={len:32,get:(i,s)=>{const o=e.UINT32_LE.get(i,s+24),a={BlockID:t.FourCcToken.get(i,s),blockSize:e.UINT32_LE.get(i,s+4),version:e.UINT16_LE.get(i,s+8),totalSamples:e.UINT32_LE.get(i,s+12),blockIndex:e.UINT32_LE.get(i,s+16),blockSamples:e.UINT32_LE.get(i,s+20),flags:{bitsPerSample:(1+r.getBitAllignedNumber(o,0,2))*8,isMono:r.isBitSet(o,2),isHybrid:r.isBitSet(o,3),isJointStereo:r.isBitSet(o,4),crossChannel:r.isBitSet(o,5),hybridNoiseShaping:r.isBitSet(o,6),floatingPoint:r.isBitSet(o,7),samplingRate:n[r.getBitAllignedNumber(o,23,4)],isDSD:r.isBitSet(o,31)},crc:new e.Uint8ArrayType(4).get(i,s+28)};return a.flags.isDSD&&(a.totalSamples*=8),a}},r.MetadataIdToken={len:1,get:(i,s)=>({functionId:r.getBitAllignedNumber(i[s],0,6),isOptional:r.isBitSet(i[s],5),isOddSize:r.isBitSet(i[s],6),largeBlock:r.isBitSet(i[s],7)})},WavPackToken.WavPack=r,WavPackToken}var hasRequiredWavPackParser;function requireWavPackParser(){if(hasRequiredWavPackParser)return WavPackParser;hasRequiredWavPackParser=1,Object.defineProperty(WavPackParser,"__esModule",{value:!0}),WavPackParser.WavPackParser=void 0;const e=requireLib$2(),t=requireAPEv2Parser(),n=requireFourCC(),r=requireBasicParser(),i=requireWavPackToken(),o=(0,requireBrowser$3().default)("music-metadata:parser:WavPack");let a=class extends r.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),t.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(n.FourCcToken)!=="wvpk")break;const c=await this.tokenizer.readToken(i.WavPack.BlockHeaderToken);if(c.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");o(`WavPack header blockIndex=${c.blockIndex}, len=${i.WavPack.BlockHeaderToken.len}`),c.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!c.flags.isHybrid),this.metadata.setFormat("bitsPerSample",c.flags.bitsPerSample),c.flags.isDSD||(this.metadata.setFormat("sampleRate",c.flags.samplingRate),this.metadata.setFormat("duration",c.totalSamples/c.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",c.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",c.totalSamples),this.metadata.setFormat("codec",c.flags.isDSD?"DSD":"PCM"));const f=c.blockSize-(i.WavPack.BlockHeaderToken.len-8);await(c.blockIndex===0?this.parseMetadataSubBlock(c,f):this.tokenizer.ignore(f)),c.blockSamples>0&&(this.audioDataSize+=c.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=i.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(u,c){for(;c>i.WavPack.MetadataIdToken.len;){const f=await this.tokenizer.readToken(i.WavPack.MetadataIdToken),m=await this.tokenizer.readNumber(f.largeBlock?e.UINT24_LE:e.UINT8),d=Buffer.alloc(m*2-(f.isOddSize?1:0));switch(await this.tokenizer.readBuffer(d),o(`Metadata Sub-Blocks functionId=0x${f.functionId.toString(16)}, id.largeBlock=${f.largeBlock},data-size=${d.length}`),f.functionId){case 0:break;case 14:o("ID_DSD_BLOCK");const T=1<<d.readUInt8(0),_=u.flags.samplingRate*T*8;if(!u.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",_),this.metadata.setFormat("duration",u.totalSamples/_);break;case 36:o("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",d);break;case 47:o(`ID_BLOCK_CHECKSUM: checksum=${d.toString("hex")}`);break;default:o(`Ignore unsupported meta-sub-block-id functionId=0x${f.functionId.toString(16)}`);break}c-=i.WavPack.MetadataIdToken.len+(f.largeBlock?e.UINT24_LE.len:e.UINT8.len)+m*2,o(`remainingLength=${c}`),f.isOddSize&&this.tokenizer.ignore(1)}if(c!==0)throw new Error("metadata-sub-block should fit it remaining length")}};return WavPackParser.WavPackParser=a,WavPackParser}var DsfParser={},DsfChunk={},hasRequiredDsfChunk;function requireDsfChunk(){return hasRequiredDsfChunk||(hasRequiredDsfChunk=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FormatChunk=e.ChannelType=e.DsdChunk=e.ChunkHeader=void 0;const t=requireLib$2(),n=requireFourCC();e.ChunkHeader={len:12,get:(r,i)=>({id:n.FourCcToken.get(r,i),size:t.UINT64_LE.get(r,i+4)})},e.DsdChunk={len:16,get:(r,i)=>({fileSize:t.INT64_LE.get(r,i),metadataPointer:t.INT64_LE.get(r,i+8)})},function(r){r[r.mono=1]="mono",r[r.stereo=2]="stereo",r[r.channels=3]="channels",r[r.quad=4]="quad",r[r["4 channels"]=5]="4 channels",r[r["5 channels"]=6]="5 channels",r[r["5.1 channels"]=7]="5.1 channels"}(e.ChannelType||(e.ChannelType={})),e.FormatChunk={len:40,get:(r,i)=>({formatVersion:t.INT32_LE.get(r,i),formatID:t.INT32_LE.get(r,i+4),channelType:t.INT32_LE.get(r,i+8),channelNum:t.INT32_LE.get(r,i+12),samplingFrequency:t.INT32_LE.get(r,i+16),bitsPerSample:t.INT32_LE.get(r,i+20),sampleCount:t.INT64_LE.get(r,i+24),blockSizePerChannel:t.INT32_LE.get(r,i+32)})}}(DsfChunk)),DsfChunk}var hasRequiredDsfParser;function requireDsfParser(){if(hasRequiredDsfParser)return DsfParser;hasRequiredDsfParser=1,Object.defineProperty(DsfParser,"__esModule",{value:!0}),DsfParser.DsfParser=void 0;const e=requireBrowser$3(),t=requireAbstractID3Parser(),n=requireDsfChunk(),r=requireID3v2Parser(),i=(0,e.default)("music-metadata:parser:DSF");let s=class extends t.AbstractID3Parser{async postId3v2Parse(){const a=this.tokenizer.position,l=await this.tokenizer.readToken(n.ChunkHeader);if(l.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const u=await this.tokenizer.readToken(n.DsdChunk);if(u.metadataPointer===BigInt(0))i("No ID3v2 tag present");else return i(`expect ID3v2 at offset=${u.metadataPointer}`),await this.parseChunks(u.fileSize-l.size),await this.tokenizer.ignore(Number(u.metadataPointer)-this.tokenizer.position-a),new r.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(a){for(;a>=n.ChunkHeader.len;){const l=await this.tokenizer.readToken(n.ChunkHeader);switch(i(`Parsing chunk name=${l.id} size=${l.size}`),l.id){case"fmt ":const u=await this.tokenizer.readToken(n.FormatChunk);this.metadata.setFormat("numberOfChannels",u.channelNum),this.metadata.setFormat("sampleRate",u.samplingFrequency),this.metadata.setFormat("bitsPerSample",u.bitsPerSample),this.metadata.setFormat("numberOfSamples",u.sampleCount),this.metadata.setFormat("duration",Number(u.sampleCount)/u.samplingFrequency);const c=u.bitsPerSample*u.samplingFrequency*u.channelNum;this.metadata.setFormat("bitrate",c);return;default:this.tokenizer.ignore(Number(l.size)-n.ChunkHeader.len);break}a-=l.size}}};return DsfParser.DsfParser=s,DsfParser}var DsdiffParser={},DsdiffToken={},hasRequiredDsdiffToken;function requireDsdiffToken(){if(hasRequiredDsdiffToken)return DsdiffToken;hasRequiredDsdiffToken=1,Object.defineProperty(DsdiffToken,"__esModule",{value:!0}),DsdiffToken.ChunkHeader64=void 0;const e=requireLib$2(),t=requireFourCC();return DsdiffToken.ChunkHeader64={len:12,get:(n,r)=>({chunkID:t.FourCcToken.get(n,r),chunkSize:e.INT64_BE.get(n,r+4)})},DsdiffToken}var hasRequiredDsdiffParser;function requireDsdiffParser(){if(hasRequiredDsdiffParser)return DsdiffParser;hasRequiredDsdiffParser=1,Object.defineProperty(DsdiffParser,"__esModule",{value:!0}),DsdiffParser.DsdiffParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),n=requireCore$2(),r=requireFourCC(),i=requireBasicParser(),s=requireID3v2Parser(),o=requireDsdiffToken(),a=(0,t.default)("music-metadata:parser:aiff");let l=class extends i.BasicParser{async parse(){const c=await this.tokenizer.readToken(o.ChunkHeader64);if(c.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const f=(await this.tokenizer.readToken(r.FourCcToken)).trim();switch(f){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${f}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(c.chunkSize-BigInt(r.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${f}`)}}async readFmt8Chunks(c){for(;c>=o.ChunkHeader64.len;){const f=await this.tokenizer.readToken(o.ChunkHeader64);a(`Chunk id=${f.chunkID}`),await this.readData(f),c-=BigInt(o.ChunkHeader64.len)+f.chunkSize}}async readData(c){a(`Reading data of chunk[ID=${c.chunkID}, size=${c.chunkSize}]`);const f=this.tokenizer.position;switch(c.chunkID.trim()){case"FVER":const d=await this.tokenizer.readToken(e.UINT32_LE);a(`DSDIFF version=${d}`);break;case"PROP":if(await this.tokenizer.readToken(r.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(c.chunkSize-BigInt(r.FourCcToken.len));break;case"ID3":const _=await this.tokenizer.readToken(new e.Uint8ArrayType(Number(c.chunkSize))),x=n.fromBuffer(_);await new s.ID3v2Parser().parse(this.metadata,x,this.options);break;default:a(`Ignore chunk[ID=${c.chunkID}, size=${c.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(c.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const m=c.chunkSize-BigInt(this.tokenizer.position-f);m>0&&(a(`After Parsing chunk, remaining ${m} bytes`),await this.tokenizer.ignore(Number(m)))}async handleSoundPropertyChunks(c){for(a(`Parsing sound-property-chunks, remainingSize=${c}`);c>0;){const f=await this.tokenizer.readToken(o.ChunkHeader64);a(`Sound-property-chunk[ID=${f.chunkID}, size=${f.chunkSize}]`);const m=this.tokenizer.position;switch(f.chunkID.trim()){case"FS":const T=await this.tokenizer.readToken(e.UINT32_BE);this.metadata.setFormat("sampleRate",T);break;case"CHNL":const _=await this.tokenizer.readToken(e.UINT16_BE);this.metadata.setFormat("numberOfChannels",_),await this.handleChannelChunks(f.chunkSize-BigInt(e.UINT16_BE.len));break;case"CMPR":const x=(await this.tokenizer.readToken(r.FourCcToken)).trim(),v=await this.tokenizer.readToken(e.UINT8),A=await this.tokenizer.readToken(new e.StringType(v,"ascii"));x==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${x} (${A})`);break;case"ABSS":const B=await this.tokenizer.readToken(e.UINT16_BE),O=await this.tokenizer.readToken(e.UINT8),L=await this.tokenizer.readToken(e.UINT8),U=await this.tokenizer.readToken(e.UINT32_BE);a(`ABSS ${B}:${O}:${L}.${U}`);break;case"LSCO":const R=await this.tokenizer.readToken(e.UINT16_BE);a(`LSCO lsConfig=${R}`);break;case"COMT":default:a(`Unknown sound-property-chunk[ID=${f.chunkID}, size=${f.chunkSize}]`),await this.tokenizer.ignore(Number(f.chunkSize))}const d=f.chunkSize-BigInt(this.tokenizer.position-m);d>0&&(a(`After Parsing sound-property-chunk ${f.chunkSize}, remaining ${d} bytes`),await this.tokenizer.ignore(Number(d))),c-=BigInt(o.ChunkHeader64.len)+f.chunkSize,a(`Parsing sound-property-chunks, remainingSize=${c}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const f=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",f)}}async handleChannelChunks(c){a(`Parsing channel-chunks, remainingSize=${c}`);const f=[];for(;c>=r.FourCcToken.len;){const m=await this.tokenizer.readToken(r.FourCcToken);a(`Channel[ID=${m}]`),f.push(m),c-=BigInt(r.FourCcToken.len)}return a(`Channels: ${f.join(", ")}`),f}};return DsdiffParser.DsdiffParser=l,DsdiffParser}var MatroskaParser={},MatroskaDtd={},hasRequiredMatroskaDtd;function requireMatroskaDtd(){if(hasRequiredMatroskaDtd)return MatroskaDtd;hasRequiredMatroskaDtd=1,Object.defineProperty(MatroskaDtd,"__esModule",{value:!0}),MatroskaDtd.elements=void 0;const e=requireTypes();return MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:e.DataType.uint},17143:{name:"ebmlReadVersion",value:e.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:e.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:e.DataType.uint},17026:{name:"docType",value:e.DataType.string},17031:{name:"docTypeVersion",value:e.DataType.uint},17029:{name:"docTypeReadVersion",value:e.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:e.DataType.binary},21420:{name:"seekPosition",value:e.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:e.DataType.uid},29572:{name:"filename",value:e.DataType.string},3979555:{name:"prevUID",value:e.DataType.uid},3965867:{name:"prevFilename",value:e.DataType.string},4110627:{name:"nextUID",value:e.DataType.uid},4096955:{name:"nextFilename",value:e.DataType.string},2807729:{name:"timecodeScale",value:e.DataType.uint},17545:{name:"duration",value:e.DataType.float},17505:{name:"dateUTC",value:e.DataType.uint},31657:{name:"title",value:e.DataType.string},19840:{name:"muxingApp",value:e.DataType.string},22337:{name:"writingApp",value:e.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:e.DataType.uid},163:{name:"unknown",value:e.DataType.binary},167:{name:"position",value:e.DataType.uid},171:{name:"prevSize",value:e.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:e.DataType.uint},29637:{name:"uid",value:e.DataType.uid},131:{name:"trackType",value:e.DataType.uint},185:{name:"flagEnabled",value:e.DataType.bool},136:{name:"flagDefault",value:e.DataType.bool},21930:{name:"flagForced",value:e.DataType.bool},156:{name:"flagLacing",value:e.DataType.bool},28135:{name:"minCache",value:e.DataType.uint},28136:{name:"maxCache",value:e.DataType.uint},2352003:{name:"defaultDuration",value:e.DataType.uint},2306383:{name:"timecodeScale",value:e.DataType.float},21358:{name:"name",value:e.DataType.string},2274716:{name:"language",value:e.DataType.string},134:{name:"codecID",value:e.DataType.string},25506:{name:"codecPrivate",value:e.DataType.binary},2459272:{name:"codecName",value:e.DataType.string},3839639:{name:"codecSettings",value:e.DataType.string},3883072:{name:"codecInfoUrl",value:e.DataType.string},2536e3:{name:"codecDownloadUrl",value:e.DataType.string},170:{name:"codecDecodeAll",value:e.DataType.bool},28587:{name:"trackOverlay",value:e.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:e.DataType.bool},21432:{name:"stereoMode",value:e.DataType.uint},176:{name:"pixelWidth",value:e.DataType.uint},186:{name:"pixelHeight",value:e.DataType.uint},21680:{name:"displayWidth",value:e.DataType.uint},21690:{name:"displayHeight",value:e.DataType.uint},21683:{name:"aspectRatioType",value:e.DataType.uint},3061028:{name:"colourSpace",value:e.DataType.uint},3126563:{name:"gammaValue",value:e.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:e.DataType.float},30901:{name:"outputSamplingFrequency",value:e.DataType.float},159:{name:"channels",value:e.DataType.uint},148:{name:"channels",value:e.DataType.uint},32123:{name:"channelPositions",value:e.DataType.binary},25188:{name:"bitDepth",value:e.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:e.DataType.uint},20530:{name:"scope",value:e.DataType.bool},20531:{name:"type",value:e.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:e.DataType.uint},16981:{name:"contentCompSettings",value:e.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:e.DataType.uint},18402:{name:"contentEncKeyID",value:e.DataType.binary},18403:{name:"contentSignature ",value:e.DataType.binary},18404:{name:"ContentSigKeyID  ",value:e.DataType.binary},18405:{name:"contentSigAlgo ",value:e.DataType.uint},18406:{name:"contentSigHashAlgo ",value:e.DataType.uint}}},25188:{name:"bitDepth",value:e.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:e.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:e.DataType.uint},241:{name:"clusterPosition",value:e.DataType.uint},21368:{name:"blockNumber",value:e.DataType.uint},234:{name:"codecState",value:e.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:e.DataType.uint},151:{name:"cluster",value:e.DataType.uint},21343:{name:"number",value:e.DataType.uint},235:{name:"codecState",value:e.DataType.uint}}},240:{name:"relativePosition",value:e.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:e.DataType.string},18030:{name:"name",value:e.DataType.string},18016:{name:"mimeType",value:e.DataType.string},18012:{name:"data",value:e.DataType.binary},18094:{name:"uid",value:e.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:e.DataType.uid},145:{name:"timeStart",value:e.DataType.uint},146:{name:"timeEnd",value:e.DataType.uid},152:{name:"hidden",value:e.DataType.bool},17816:{name:"enabled",value:e.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:e.DataType.uid},128:{name:"display",container:{133:{name:"string",value:e.DataType.string},17276:{name:"language ",value:e.DataType.string},17278:{name:"country ",value:e.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:e.DataType.uid},25540:{name:"tagChapterUID",value:e.DataType.uint},25542:{name:"tagAttachmentUID",value:e.DataType.uid},25546:{name:"targetType",value:e.DataType.string},26826:{name:"targetTypeValue",value:e.DataType.uint},25545:{name:"tagEditionUID",value:e.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:e.DataType.string},17543:{name:"string",value:e.DataType.string},17541:{name:"binary",value:e.DataType.binary},17530:{name:"language",value:e.DataType.string},17531:{name:"languageIETF",value:e.DataType.string},17540:{name:"default",value:e.DataType.bool}}}}}}}}}},MatroskaDtd}var hasRequiredMatroskaParser;function requireMatroskaParser(){if(hasRequiredMatroskaParser)return MatroskaParser;hasRequiredMatroskaParser=1,Object.defineProperty(MatroskaParser,"__esModule",{value:!0}),MatroskaParser.MatroskaParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),n=requireBasicParser(),r=requireTypes(),i=requireMatroskaDtd(),s=(0,t.default)("music-metadata:parser:matroska");let o=class extends n.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(r.DataType.uint,l=>this.readUint(l)),this.parserMap.set(r.DataType.string,l=>this.readString(l)),this.parserMap.set(r.DataType.binary,l=>this.readBuffer(l)),this.parserMap.set(r.DataType.uid,async l=>await this.readUint(l)===1),this.parserMap.set(r.DataType.bool,l=>this.readFlag(l)),this.parserMap.set(r.DataType.float,l=>this.readFloat(l))}init(l,u,c){return super.init(l,u,c),this}async parse(){const l=await this.parseContainer(i.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${l.ebml.docType}`),l.segment){const u=l.segment.info;if(u){const f=u.timecodeScale?u.timecodeScale:1e6;if(typeof u.duration=="number"){const m=u.duration*f/1e9;this.addTag("segment:title",u.title),this.metadata.setFormat("duration",m)}}const c=l.segment.tracks;if(c&&c.entries){c.entries.forEach(m=>{const d={codecName:m.codecID.replace("A_","").replace("V_",""),codecSettings:m.codecSettings,flagDefault:m.flagDefault,flagLacing:m.flagLacing,flagEnabled:m.flagEnabled,language:m.language,name:m.name,type:m.trackType,audio:m.audio,video:m.video};this.metadata.addStreamInfo(d)});const f=c.entries.filter(m=>m.trackType===r.TrackType.audio.valueOf()).reduce((m,d)=>!m||!m.flagDefault&&d.flagDefault||d.trackNumber&&d.trackNumber<m.trackNumber?d:m,null);f&&(this.metadata.setFormat("codec",f.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",f.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",f.audio.channels)),l.segment.tags&&l.segment.tags.tag.forEach(m=>{const d=m.target,T=d!=null&&d.targetTypeValue?r.TargetType[d.targetTypeValue]:d!=null&&d.targetType?d.targetType:"track";m.simpleTags.forEach(_=>{const x=_.string?_.string:_.binary;this.addTag(`${T}:${_.name}`,x)})}),l.segment.attachments&&l.segment.attachments.attachedFiles.filter(m=>m.mimeType.startsWith("image/")).map(m=>({data:m.data,format:m.mimeType,description:m.description,name:m.name})).forEach(m=>{this.addTag("picture",m)})}}}async parseContainer(l,u,c){const f={};for(;this.tokenizer.position<u;){let m;try{m=await this.readElement()}catch(T){if(T.message==="End-Of-Stream")break;throw T}const d=l[m.id];if(d)if(s(`Element: name=${d.name}, container=${!!d.container}`),d.container){const T=await this.parseContainer(d.container,m.len>=0?this.tokenizer.position+m.len:-1,c.concat([d.name]));d.multiple?(f[d.name]||(f[d.name]=[]),f[d.name].push(T)):f[d.name]=T}else f[d.name]=await this.parserMap.get(d.value)(m);else switch(m.id){case 236:this.padding+=m.len,await this.tokenizer.ignore(m.len);break;default:s(`parseEbml: path=${c.join("/")}, unknown element: id=${m.id.toString(16)}`),this.padding+=m.len,await this.tokenizer.ignore(m.len)}}return f}async readVintData(l){const u=await this.tokenizer.peekNumber(e.UINT8);let c=128,f=1;for(;(u&c)===0;){if(f>l)throw new Error("VINT value exceeding maximum size");++f,c>>=1}const m=Buffer.alloc(f);return await this.tokenizer.readBuffer(m),m}async readElement(){const l=await this.readVintData(this.ebmlMaxIDLength),u=await this.readVintData(this.ebmlMaxSizeLength);u[0]^=128>>u.length-1;const c=Math.min(6,u.length);return{id:l.readUIntBE(0,l.length),len:u.readUIntBE(u.length-c,c)}}isMaxValue(l){if(l.length===this.ebmlMaxSizeLength){for(let u=1;u<this.ebmlMaxSizeLength;++u)if(l[u]!==255)return!1;return!0}return!1}async readFloat(l){switch(l.len){case 0:return 0;case 4:return this.tokenizer.readNumber(e.Float32_BE);case 8:return this.tokenizer.readNumber(e.Float64_BE);case 10:return this.tokenizer.readNumber(e.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${l.len}`)}}async readFlag(l){return await this.readUint(l)===1}async readUint(l){const u=await this.readBuffer(l),c=Math.min(6,l.len);return u.readUIntBE(l.len-c,c)}async readString(l){return(await this.tokenizer.readToken(new e.StringType(l.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(l){const u=Buffer.alloc(l.len);return await this.tokenizer.readBuffer(u),u}addTag(l,u){this.metadata.addTag("matroska",l,u)}};return MatroskaParser.MatroskaParser=o,MatroskaParser}var hasRequiredParserFactory;function requireParserFactory(){if(hasRequiredParserFactory)return ParserFactory;hasRequiredParserFactory=1,Object.defineProperty(ParserFactory,"__esModule",{value:!0}),ParserFactory.ParserFactory=ParserFactory.parseHttpContentType=void 0;const e=requireCore$1(),t=requireContentType(),n=requireMediaTyper(),r=requireBrowser$3(),i=requireMetadataCollector(),s=requireAiffParser(),o=requireAPEv2Parser(),a=requireAsfParser(),l=requireFlacParser(),u=requireMP4Parser(),c=requireMpegParser(),f=requireMusepack(),m=requireOggParser(),d=requireWaveParser(),T=requireWavPackParser(),_=requireDsfParser(),x=requireDsdiffParser(),v=requireMatroskaParser(),A=(0,r.default)("music-metadata:parser:factory");function B(U){const R=t.parse(U),M=n.parse(R.type);return{type:M.type,subtype:M.subtype,suffix:M.suffix,parameters:R.parameters}}ParserFactory.parseHttpContentType=B;async function O(U,R,M={}){const ne=await L.loadParser(R),W=new i.MetadataCollector(M);return await ne.init(W,U,M).parse(),W.toCommonMetadata()}let L=class Le{static async parseOnContentType(R,M){const{mimeType:ne,path:W,url:G}=await R.fileInfo,re=Le.getParserIdForMimeType(ne)||Le.getParserIdForExtension(W)||Le.getParserIdForExtension(G);return re||A("No parser found for MIME-type / extension: "+ne),this.parse(R,re,M)}static async parse(R,M,ne){if(!M){A("Guess parser on content...");const W=Buffer.alloc(4100);if(await R.peekBuffer(W,{mayBeLess:!0}),R.fileInfo.path&&(M=this.getParserIdForExtension(R.fileInfo.path)),!M){const G=await e.fromBuffer(W);if(!G)throw new Error("Failed to determine audio format");if(A(`Guessed file type is mime=${G.mime}, extension=${G.ext}`),M=Le.getParserIdForMimeType(G.mime),!M)throw new Error("Guessed MIME-type not supported: "+G.mime)}}return O(R,M,ne)}static getParserIdForExtension(R){if(!R)return;switch(this.getExtension(R).toLocaleLowerCase()||R){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(R){switch(R){case"aiff":return new s.AIFFParser;case"adts":case"mpeg":return new c.MpegParser;case"apev2":return new o.APEv2Parser;case"asf":return new a.AsfParser;case"dsf":return new _.DsfParser;case"dsdiff":return new x.DsdiffParser;case"flac":return new l.FlacParser;case"mp4":return new u.MP4Parser;case"musepack":return new f.default;case"ogg":return new m.OggParser;case"riff":return new d.WaveParser;case"wavpack":return new T.WavPackParser;case"matroska":return new v.MatroskaParser;default:throw new Error(`Unknown parser type: ${R}`)}}static getExtension(R){const M=R.lastIndexOf(".");return M===-1?"":R.slice(M)}static getParserIdForMimeType(R){let M;try{M=B(R)}catch{A(`Invalid HTTP Content-Type header value: ${R}`);return}const ne=M.subtype.indexOf("x-")===0?M.subtype.substring(2):M.subtype;switch(M.type){case"audio":switch(ne){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(ne){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(ne){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};return ParserFactory.ParserFactory=L,ParserFactory}var RandomUint8ArrayReader={},hasRequiredRandomUint8ArrayReader;function requireRandomUint8ArrayReader(){if(hasRequiredRandomUint8ArrayReader)return RandomUint8ArrayReader;hasRequiredRandomUint8ArrayReader=1,Object.defineProperty(RandomUint8ArrayReader,"__esModule",{value:!0}),RandomUint8ArrayReader.RandomUint8ArrayReader=void 0;let e=class{constructor(n){this.uint8Array=n,this.fileSize=n.length}async randomRead(n,r,i,s){return n.set(this.uint8Array.subarray(s,s+i),r),i}};return RandomUint8ArrayReader.RandomUint8ArrayReader=e,RandomUint8ArrayReader}var Lyrics3={},hasRequiredLyrics3;function requireLyrics3(){return hasRequiredLyrics3||(hasRequiredLyrics3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLyricsHeaderLength=e.endTag2=void 0,e.endTag2="LYRICS200";async function t(n){if(n.fileSize>=143){const r=Buffer.alloc(15);await n.randomRead(r,0,r.length,n.fileSize-143);const i=r.toString("binary");if(i.substr(6)===e.endTag2)return parseInt(i.substr(0,6),10)+15}return 0}e.getLyricsHeaderLength=t}(Lyrics3)),Lyrics3}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$2;hasRequiredCore=1,Object.defineProperty(core$2,"__esModule",{value:!0}),core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const e=requireCore$2(),t=requireParserFactory(),n=requireRandomUint8ArrayReader(),r=requireAPEv2Parser(),i=requireID3v1Parser(),s=requireLyrics3();function o(d,T,_={}){return l(e.fromStream(d,typeof T=="string"?{mimeType:T}:T),_)}core$2.parseStream=o;async function a(d,T,_={}){const x=new n.RandomUint8ArrayReader(d);await m(x,_);const v=e.fromBuffer(d,typeof T=="string"?{mimeType:T}:T);return l(v,_)}core$2.parseBuffer=a;function l(d,T){return t.ParserFactory.parseOnContentType(d,T)}core$2.parseFromTokenizer=l;function u(d){const T={};for(const _ of d)(T[_.id]=T[_.id]||[]).push(_.value);return T}core$2.orderTags=u;function c(d){return d===void 0?0:1+Math.round(d*4)}core$2.ratingToStars=c;function f(d){return d?d.reduce((T,_)=>_.name&&_.name.toLowerCase()in["front","cover","cover (front)"]?_:T):null}core$2.selectCover=f;async function m(d,T={}){let _=d.fileSize;if(await(0,i.hasID3v1Header)(d)){_-=128;const x=await(0,s.getLyricsHeaderLength)(d);_-=x}T.apeHeader=await r.APEv2Parser.findApeFooterOffset(d,_)}return core$2.scanAppendingHeaders=m,core$2}var lib={},browser$2={exports:{}},stream={exports:{}},buffer$1={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=a,base64Js.toByteArray=u,base64Js.fromByteArray=m;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function o(d){var T=d.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=d.indexOf("=");_===-1&&(_=T);var x=_===T?0:4-_%4;return[_,x]}function a(d){var T=o(d),_=T[0],x=T[1];return(_+x)*3/4-x}function l(d,T,_){return(T+_)*3/4-_}function u(d){var T,_=o(d),x=_[0],v=_[1],A=new n(l(d,x,v)),B=0,O=v>0?x-4:x,L;for(L=0;L<O;L+=4)T=t[d.charCodeAt(L)]<<18|t[d.charCodeAt(L+1)]<<12|t[d.charCodeAt(L+2)]<<6|t[d.charCodeAt(L+3)],A[B++]=T>>16&255,A[B++]=T>>8&255,A[B++]=T&255;return v===2&&(T=t[d.charCodeAt(L)]<<2|t[d.charCodeAt(L+1)]>>4,A[B++]=T&255),v===1&&(T=t[d.charCodeAt(L)]<<10|t[d.charCodeAt(L+1)]<<4|t[d.charCodeAt(L+2)]>>2,A[B++]=T>>8&255,A[B++]=T&255),A}function c(d){return e[d>>18&63]+e[d>>12&63]+e[d>>6&63]+e[d&63]}function f(d,T,_){for(var x,v=[],A=T;A<_;A+=3)x=(d[A]<<16&16711680)+(d[A+1]<<8&65280)+(d[A+2]&255),v.push(c(x));return v.join("")}function m(d){for(var T,_=d.length,x=_%3,v=[],A=16383,B=0,O=_-x;B<O;B+=A)v.push(f(d,B,B+A>O?O:B+A));return x===1?(T=d[_-1],v.push(e[T>>2]+e[T<<4&63]+"==")):x===2&&(T=(d[_-2]<<8)+d[_-1],v.push(e[T>>10]+e[T>>4&63]+e[T<<2&63]+"=")),v.join("")}return base64Js}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer$1;function requireBuffer$1(){return hasRequiredBuffer$1||(hasRequiredBuffer$1=1,function(e){const t=requireBase64Js(),n=requireIeee754(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const k=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(k,y),k.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(k){if(k>i)throw new RangeError('The value "'+k+'" is invalid for option "size"');const y=new Uint8Array(k);return Object.setPrototypeOf(y,a.prototype),y}function a(k,y,w){if(typeof k=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(k)}return l(k,y,w)}a.poolSize=8192;function l(k,y,w){if(typeof k=="string")return m(k,y);if(ArrayBuffer.isView(k))return T(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(z(k,ArrayBuffer)||k&&z(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(z(k,SharedArrayBuffer)||k&&z(k.buffer,SharedArrayBuffer)))return _(k,y,w);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=k.valueOf&&k.valueOf();if(D!=null&&D!==k)return a.from(D,y,w);const V=x(k);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return a.from(k[Symbol.toPrimitive]("string"),y,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}a.from=function(k,y,w){return l(k,y,w)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function c(k,y,w){return u(k),k<=0?o(k):y!==void 0?typeof w=="string"?o(k).fill(y,w):o(k).fill(y):o(k)}a.alloc=function(k,y,w){return c(k,y,w)};function f(k){return u(k),o(k<0?0:v(k)|0)}a.allocUnsafe=function(k){return f(k)},a.allocUnsafeSlow=function(k){return f(k)};function m(k,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const w=B(k,y)|0;let D=o(w);const V=D.write(k,y);return V!==w&&(D=D.slice(0,V)),D}function d(k){const y=k.length<0?0:v(k.length)|0,w=o(y);for(let D=0;D<y;D+=1)w[D]=k[D]&255;return w}function T(k){if(z(k,Uint8Array)){const y=new Uint8Array(k);return _(y.buffer,y.byteOffset,y.byteLength)}return d(k)}function _(k,y,w){if(y<0||k.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<y+(w||0))throw new RangeError('"length" is outside of buffer bounds');let D;return y===void 0&&w===void 0?D=new Uint8Array(k):w===void 0?D=new Uint8Array(k,y):D=new Uint8Array(k,y,w),Object.setPrototypeOf(D,a.prototype),D}function x(k){if(a.isBuffer(k)){const y=v(k.length)|0,w=o(y);return w.length===0||k.copy(w,0,0,y),w}if(k.length!==void 0)return typeof k.length!="number"||J(k.length)?o(0):d(k);if(k.type==="Buffer"&&Array.isArray(k.data))return d(k.data)}function v(k){if(k>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return k|0}function A(k){return+k!=k&&(k=0),a.alloc(+k)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,w){if(z(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),z(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(y)||!a.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===w)return 0;let D=y.length,V=w.length;for(let Z=0,se=Math.min(D,V);Z<se;++Z)if(y[Z]!==w[Z]){D=y[Z],V=w[Z];break}return D<V?-1:V<D?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,w){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let D;if(w===void 0)for(w=0,D=0;D<y.length;++D)w+=y[D].length;const V=a.allocUnsafe(w);let Z=0;for(D=0;D<y.length;++D){let se=y[D];if(z(se,Uint8Array))Z+se.length>V.length?(a.isBuffer(se)||(se=a.from(se)),se.copy(V,Z)):Uint8Array.prototype.set.call(V,se,Z);else if(a.isBuffer(se))se.copy(V,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=se.length}return V};function B(k,y){if(a.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||z(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const w=k.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&w===0)return 0;let V=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return g(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return P(k).length;default:if(V)return D?-1:g(k).length;y=(""+y).toLowerCase(),V=!0}}a.byteLength=B;function O(k,y,w){let D=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,y>>>=0,w<=y))return"";for(k||(k="utf8");;)switch(k){case"hex":return ye(this,y,w);case"utf8":case"utf-8":return ce(this,y,w);case"ascii":return ge(this,y,w);case"latin1":case"binary":return te(this,y,w);case"base64":return Y(this,y,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,y,w);default:if(D)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),D=!0}}a.prototype._isBuffer=!0;function L(k,y,w){const D=k[y];k[y]=k[w],k[w]=D}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<y;w+=2)L(this,w,w+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<y;w+=4)L(this,w,w+3),L(this,w+1,w+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<y;w+=8)L(this,w,w+7),L(this,w+1,w+6),L(this,w+2,w+5),L(this,w+3,w+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?ce(this,0,y):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const w=e.INSPECT_MAX_BYTES;return y=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,w,D,V,Z){if(z(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(w===void 0&&(w=0),D===void 0&&(D=y?y.length:0),V===void 0&&(V=0),Z===void 0&&(Z=this.length),w<0||D>y.length||V<0||Z>this.length)throw new RangeError("out of range index");if(V>=Z&&w>=D)return 0;if(V>=Z)return-1;if(w>=D)return 1;if(w>>>=0,D>>>=0,V>>>=0,Z>>>=0,this===y)return 0;let se=Z-V,ve=D-w;const Se=Math.min(se,ve),xe=this.slice(V,Z),Re=y.slice(w,D);for(let Ie=0;Ie<Se;++Ie)if(xe[Ie]!==Re[Ie]){se=xe[Ie],ve=Re[Ie];break}return se<ve?-1:ve<se?1:0};function U(k,y,w,D,V){if(k.length===0)return-1;if(typeof w=="string"?(D=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,J(w)&&(w=V?0:k.length-1),w<0&&(w=k.length+w),w>=k.length){if(V)return-1;w=k.length-1}else if(w<0)if(V)w=0;else return-1;if(typeof y=="string"&&(y=a.from(y,D)),a.isBuffer(y))return y.length===0?-1:R(k,y,w,D,V);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(k,y,w):Uint8Array.prototype.lastIndexOf.call(k,y,w):R(k,[y],w,D,V);throw new TypeError("val must be string, number or Buffer")}function R(k,y,w,D,V){let Z=1,se=k.length,ve=y.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(k.length<2||y.length<2)return-1;Z=2,se/=2,ve/=2,w/=2}function Se(Re,Ie){return Z===1?Re[Ie]:Re.readUInt16BE(Ie*Z)}let xe;if(V){let Re=-1;for(xe=w;xe<se;xe++)if(Se(k,xe)===Se(y,Re===-1?0:xe-Re)){if(Re===-1&&(Re=xe),xe-Re+1===ve)return Re*Z}else Re!==-1&&(xe-=xe-Re),Re=-1}else for(w+ve>se&&(w=se-ve),xe=w;xe>=0;xe--){let Re=!0;for(let Ie=0;Ie<ve;Ie++)if(Se(k,xe+Ie)!==Se(y,Ie)){Re=!1;break}if(Re)return xe}return-1}a.prototype.includes=function(y,w,D){return this.indexOf(y,w,D)!==-1},a.prototype.indexOf=function(y,w,D){return U(this,y,w,D,!0)},a.prototype.lastIndexOf=function(y,w,D){return U(this,y,w,D,!1)};function M(k,y,w,D){w=Number(w)||0;const V=k.length-w;D?(D=Number(D),D>V&&(D=V)):D=V;const Z=y.length;D>Z/2&&(D=Z/2);let se;for(se=0;se<D;++se){const ve=parseInt(y.substr(se*2,2),16);if(J(ve))return se;k[w+se]=ve}return se}function ne(k,y,w,D){return q(g(y,k.length-w),k,w,D)}function W(k,y,w,D){return q(b(y),k,w,D)}function G(k,y,w,D){return q(P(y),k,w,D)}function re(k,y,w,D){return q(E(y,k.length-w),k,w,D)}a.prototype.write=function(y,w,D,V){if(w===void 0)V="utf8",D=this.length,w=0;else if(D===void 0&&typeof w=="string")V=w,D=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(D)?(D=D>>>0,V===void 0&&(V="utf8")):(V=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-w;if((D===void 0||D>Z)&&(D=Z),y.length>0&&(D<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");let se=!1;for(;;)switch(V){case"hex":return M(this,y,w,D);case"utf8":case"utf-8":return ne(this,y,w,D);case"ascii":case"latin1":case"binary":return W(this,y,w,D);case"base64":return G(this,y,w,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,y,w,D);default:if(se)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),se=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(k,y,w){return y===0&&w===k.length?t.fromByteArray(k):t.fromByteArray(k.slice(y,w))}function ce(k,y,w){w=Math.min(k.length,w);const D=[];let V=y;for(;V<w;){const Z=k[V];let se=null,ve=Z>239?4:Z>223?3:Z>191?2:1;if(V+ve<=w){let Se,xe,Re,Ie;switch(ve){case 1:Z<128&&(se=Z);break;case 2:Se=k[V+1],(Se&192)===128&&(Ie=(Z&31)<<6|Se&63,Ie>127&&(se=Ie));break;case 3:Se=k[V+1],xe=k[V+2],(Se&192)===128&&(xe&192)===128&&(Ie=(Z&15)<<12|(Se&63)<<6|xe&63,Ie>2047&&(Ie<55296||Ie>57343)&&(se=Ie));break;case 4:Se=k[V+1],xe=k[V+2],Re=k[V+3],(Se&192)===128&&(xe&192)===128&&(Re&192)===128&&(Ie=(Z&15)<<18|(Se&63)<<12|(xe&63)<<6|Re&63,Ie>65535&&Ie<1114112&&(se=Ie))}}se===null?(se=65533,ve=1):se>65535&&(se-=65536,D.push(se>>>10&1023|55296),se=56320|se&1023),D.push(se),V+=ve}return de(D)}const me=4096;function de(k){const y=k.length;if(y<=me)return String.fromCharCode.apply(String,k);let w="",D=0;for(;D<y;)w+=String.fromCharCode.apply(String,k.slice(D,D+=me));return w}function ge(k,y,w){let D="";w=Math.min(k.length,w);for(let V=y;V<w;++V)D+=String.fromCharCode(k[V]&127);return D}function te(k,y,w){let D="";w=Math.min(k.length,w);for(let V=y;V<w;++V)D+=String.fromCharCode(k[V]);return D}function ye(k,y,w){const D=k.length;(!y||y<0)&&(y=0),(!w||w<0||w>D)&&(w=D);let V="";for(let Z=y;Z<w;++Z)V+=le[k[Z]];return V}function H(k,y,w){const D=k.slice(y,w);let V="";for(let Z=0;Z<D.length-1;Z+=2)V+=String.fromCharCode(D[Z]+D[Z+1]*256);return V}a.prototype.slice=function(y,w){const D=this.length;y=~~y,w=w===void 0?D:~~w,y<0?(y+=D,y<0&&(y=0)):y>D&&(y=D),w<0?(w+=D,w<0&&(w=0)):w>D&&(w=D),w<y&&(w=y);const V=this.subarray(y,w);return Object.setPrototypeOf(V,a.prototype),V};function ee(k,y,w){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+y>w)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,w,D){y=y>>>0,w=w>>>0,D||ee(y,w,this.length);let V=this[y],Z=1,se=0;for(;++se<w&&(Z*=256);)V+=this[y+se]*Z;return V},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,w,D){y=y>>>0,w=w>>>0,D||ee(y,w,this.length);let V=this[y+--w],Z=1;for(;w>0&&(Z*=256);)V+=this[y+--w]*Z;return V},a.prototype.readUint8=a.prototype.readUInt8=function(y,w){return y=y>>>0,w||ee(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,w){return y=y>>>0,w||ee(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,w){return y=y>>>0,w||ee(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,w){return y=y>>>0,w||ee(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,w){return y=y>>>0,w||ee(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=ue(function(y){y=y>>>0,I(y,"offset");const w=this[y],D=this[y+7];(w===void 0||D===void 0)&&C(y,this.length-8);const V=w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,Z=this[++y]+this[++y]*2**8+this[++y]*2**16+D*2**24;return BigInt(V)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=ue(function(y){y=y>>>0,I(y,"offset");const w=this[y],D=this[y+7];(w===void 0||D===void 0)&&C(y,this.length-8);const V=w*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],Z=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+D;return(BigInt(V)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(y,w,D){y=y>>>0,w=w>>>0,D||ee(y,w,this.length);let V=this[y],Z=1,se=0;for(;++se<w&&(Z*=256);)V+=this[y+se]*Z;return Z*=128,V>=Z&&(V-=Math.pow(2,8*w)),V},a.prototype.readIntBE=function(y,w,D){y=y>>>0,w=w>>>0,D||ee(y,w,this.length);let V=w,Z=1,se=this[y+--V];for(;V>0&&(Z*=256);)se+=this[y+--V]*Z;return Z*=128,se>=Z&&(se-=Math.pow(2,8*w)),se},a.prototype.readInt8=function(y,w){return y=y>>>0,w||ee(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,w){y=y>>>0,w||ee(y,2,this.length);const D=this[y]|this[y+1]<<8;return D&32768?D|4294901760:D},a.prototype.readInt16BE=function(y,w){y=y>>>0,w||ee(y,2,this.length);const D=this[y+1]|this[y]<<8;return D&32768?D|4294901760:D},a.prototype.readInt32LE=function(y,w){return y=y>>>0,w||ee(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,w){return y=y>>>0,w||ee(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=ue(function(y){y=y>>>0,I(y,"offset");const w=this[y],D=this[y+7];(w===void 0||D===void 0)&&C(y,this.length-8);const V=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(D<<24);return(BigInt(V)<<BigInt(32))+BigInt(w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=ue(function(y){y=y>>>0,I(y,"offset");const w=this[y],D=this[y+7];(w===void 0||D===void 0)&&C(y,this.length-8);const V=(w<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(V)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+D)}),a.prototype.readFloatLE=function(y,w){return y=y>>>0,w||ee(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,w){return y=y>>>0,w||ee(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,w){return y=y>>>0,w||ee(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,w){return y=y>>>0,w||ee(y,8,this.length),n.read(this,y,!1,52,8)};function oe(k,y,w,D,V,Z){if(!a.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>V||y<Z)throw new RangeError('"value" argument is out of bounds');if(w+D>k.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,w,D,V){if(y=+y,w=w>>>0,D=D>>>0,!V){const ve=Math.pow(2,8*D)-1;oe(this,y,w,D,ve,0)}let Z=1,se=0;for(this[w]=y&255;++se<D&&(Z*=256);)this[w+se]=y/Z&255;return w+D},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,w,D,V){if(y=+y,w=w>>>0,D=D>>>0,!V){const ve=Math.pow(2,8*D)-1;oe(this,y,w,D,ve,0)}let Z=D-1,se=1;for(this[w+Z]=y&255;--Z>=0&&(se*=256);)this[w+Z]=y/se&255;return w+D},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,1,255,0),this[w]=y&255,w+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,2,65535,0),this[w]=y&255,this[w+1]=y>>>8,w+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,2,65535,0),this[w]=y>>>8,this[w+1]=y&255,w+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,4,4294967295,0),this[w+3]=y>>>24,this[w+2]=y>>>16,this[w+1]=y>>>8,this[w]=y&255,w+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,4,4294967295,0),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4};function ae(k,y,w,D,V){F(y,D,V,k,w,7);let Z=Number(y&BigInt(4294967295));k[w++]=Z,Z=Z>>8,k[w++]=Z,Z=Z>>8,k[w++]=Z,Z=Z>>8,k[w++]=Z;let se=Number(y>>BigInt(32)&BigInt(4294967295));return k[w++]=se,se=se>>8,k[w++]=se,se=se>>8,k[w++]=se,se=se>>8,k[w++]=se,w}function be(k,y,w,D,V){F(y,D,V,k,w,7);let Z=Number(y&BigInt(4294967295));k[w+7]=Z,Z=Z>>8,k[w+6]=Z,Z=Z>>8,k[w+5]=Z,Z=Z>>8,k[w+4]=Z;let se=Number(y>>BigInt(32)&BigInt(4294967295));return k[w+3]=se,se=se>>8,k[w+2]=se,se=se>>8,k[w+1]=se,se=se>>8,k[w]=se,w+8}a.prototype.writeBigUInt64LE=ue(function(y,w=0){return ae(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ue(function(y,w=0){return be(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,w,D,V){if(y=+y,w=w>>>0,!V){const Se=Math.pow(2,8*D-1);oe(this,y,w,D,Se-1,-Se)}let Z=0,se=1,ve=0;for(this[w]=y&255;++Z<D&&(se*=256);)y<0&&ve===0&&this[w+Z-1]!==0&&(ve=1),this[w+Z]=(y/se>>0)-ve&255;return w+D},a.prototype.writeIntBE=function(y,w,D,V){if(y=+y,w=w>>>0,!V){const Se=Math.pow(2,8*D-1);oe(this,y,w,D,Se-1,-Se)}let Z=D-1,se=1,ve=0;for(this[w+Z]=y&255;--Z>=0&&(se*=256);)y<0&&ve===0&&this[w+Z+1]!==0&&(ve=1),this[w+Z]=(y/se>>0)-ve&255;return w+D},a.prototype.writeInt8=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,1,127,-128),y<0&&(y=255+y+1),this[w]=y&255,w+1},a.prototype.writeInt16LE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,2,32767,-32768),this[w]=y&255,this[w+1]=y>>>8,w+2},a.prototype.writeInt16BE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,2,32767,-32768),this[w]=y>>>8,this[w+1]=y&255,w+2},a.prototype.writeInt32LE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,4,2147483647,-2147483648),this[w]=y&255,this[w+1]=y>>>8,this[w+2]=y>>>16,this[w+3]=y>>>24,w+4},a.prototype.writeInt32BE=function(y,w,D){return y=+y,w=w>>>0,D||oe(this,y,w,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4},a.prototype.writeBigInt64LE=ue(function(y,w=0){return ae(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ue(function(y,w=0){return be(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function we(k,y,w,D,V,Z){if(w+D>k.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function Ee(k,y,w,D,V){return y=+y,w=w>>>0,V||we(k,y,w,4),n.write(k,y,w,D,23,4),w+4}a.prototype.writeFloatLE=function(y,w,D){return Ee(this,y,w,!0,D)},a.prototype.writeFloatBE=function(y,w,D){return Ee(this,y,w,!1,D)};function Q(k,y,w,D,V){return y=+y,w=w>>>0,V||we(k,y,w,8),n.write(k,y,w,D,52,8),w+8}a.prototype.writeDoubleLE=function(y,w,D){return Q(this,y,w,!0,D)},a.prototype.writeDoubleBE=function(y,w,D){return Q(this,y,w,!1,D)},a.prototype.copy=function(y,w,D,V){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(D||(D=0),!V&&V!==0&&(V=this.length),w>=y.length&&(w=y.length),w||(w=0),V>0&&V<D&&(V=D),V===D||y.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),y.length-w<V-D&&(V=y.length-w+D);const Z=V-D;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,D,V):Uint8Array.prototype.set.call(y,this.subarray(D,V),w),Z},a.prototype.fill=function(y,w,D,V){if(typeof y=="string"){if(typeof w=="string"?(V=w,w=0,D=this.length):typeof D=="string"&&(V=D,D=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!a.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(y.length===1){const se=y.charCodeAt(0);(V==="utf8"&&se<128||V==="latin1")&&(y=se)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(w<0||this.length<w||this.length<D)throw new RangeError("Out of range index");if(D<=w)return this;w=w>>>0,D=D===void 0?this.length:D>>>0,y||(y=0);let Z;if(typeof y=="number")for(Z=w;Z<D;++Z)this[Z]=y;else{const se=a.isBuffer(y)?y:a.from(y,V),ve=se.length;if(ve===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(Z=0;Z<D-w;++Z)this[Z+w]=se[Z%ve]}return this};const X={};function K(k,y,w){X[k]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}K("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(k,y){return`The "${k}" argument must be of type number. Received type ${typeof y}`},TypeError),K("ERR_OUT_OF_RANGE",function(k,y,w){let D=`The value of "${k}" is out of range.`,V=w;return Number.isInteger(w)&&Math.abs(w)>2**32?V=ie(String(w)):typeof w=="bigint"&&(V=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(V=ie(V)),V+="n"),D+=` It must be ${y}. Received ${V}`,D},RangeError);function ie(k){let y="",w=k.length;const D=k[0]==="-"?1:0;for(;w>=D+4;w-=3)y=`_${k.slice(w-3,w)}${y}`;return`${k.slice(0,w)}${y}`}function fe(k,y,w){I(y,"offset"),(k[y]===void 0||k[y+w]===void 0)&&C(y,k.length-(w+1))}function F(k,y,w,D,V,Z){if(k>w||k<y){const se=typeof y=="bigint"?"n":"";let ve;throw y===0||y===BigInt(0)?ve=`>= 0${se} and < 2${se} ** ${(Z+1)*8}${se}`:ve=`>= -(2${se} ** ${(Z+1)*8-1}${se}) and < 2 ** ${(Z+1)*8-1}${se}`,new X.ERR_OUT_OF_RANGE("value",ve,k)}fe(D,V,Z)}function I(k,y){if(typeof k!="number")throw new X.ERR_INVALID_ARG_TYPE(y,"number",k)}function C(k,y,w){throw Math.floor(k)!==k?(I(k,w),new X.ERR_OUT_OF_RANGE("offset","an integer",k)):y<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,k)}const $=/[^+/0-9A-Za-z-_]/g;function S(k){if(k=k.split("=")[0],k=k.trim().replace($,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function g(k,y){y=y||1/0;let w;const D=k.length;let V=null;const Z=[];for(let se=0;se<D;++se){if(w=k.charCodeAt(se),w>55295&&w<57344){if(!V){if(w>56319){(y-=3)>-1&&Z.push(239,191,189);continue}else if(se+1===D){(y-=3)>-1&&Z.push(239,191,189);continue}V=w;continue}if(w<56320){(y-=3)>-1&&Z.push(239,191,189),V=w;continue}w=(V-55296<<10|w-56320)+65536}else V&&(y-=3)>-1&&Z.push(239,191,189);if(V=null,w<128){if((y-=1)<0)break;Z.push(w)}else if(w<2048){if((y-=2)<0)break;Z.push(w>>6|192,w&63|128)}else if(w<65536){if((y-=3)<0)break;Z.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((y-=4)<0)break;Z.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return Z}function b(k){const y=[];for(let w=0;w<k.length;++w)y.push(k.charCodeAt(w)&255);return y}function E(k,y){let w,D,V;const Z=[];for(let se=0;se<k.length&&!((y-=2)<0);++se)w=k.charCodeAt(se),D=w>>8,V=w%256,Z.push(V),Z.push(D);return Z}function P(k){return t.toByteArray(S(k))}function q(k,y,w,D){let V;for(V=0;V<D&&!(V+w>=y.length||V>=k.length);++V)y[V+w]=k[V];return V}function z(k,y){return k instanceof y||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===y.name}function J(k){return k!==k}const le=function(){const k="0123456789abcdef",y=new Array(256);for(let w=0;w<16;++w){const D=w*16;for(let V=0;V<16;++V)y[D+V]=k[w]+k[V]}return y}();function ue(k){return typeof BigInt>"u"?Te:k}function Te(){throw new Error("BigInt not supported")}}(buffer$1)),buffer$1}var primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let i=0;i<n.length;i++)r+=`    ${n[i].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return primordials={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},primordials}var util={exports:{}},inspect,hasRequiredInspect;function requireInspect(){return hasRequiredInspect||(hasRequiredInspect=1,inspect={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),inspect}var errors,hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:e,inspect:t}=requireInspect(),{AggregateError:n}=requirePrimordials(),r=globalThis.AggregateError||n,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",l={};function u(x,v){if(!x)throw new l.ERR_INTERNAL_ASSERTION(v)}function c(x){let v="",A=x.length;const B=x[0]==="-"?1:0;for(;A>=B+4;A-=3)v=`_${x.slice(A-3,A)}${v}`;return`${x.slice(0,A)}${v}`}function f(x,v,A){if(typeof v=="function")return u(v.length<=A.length,`Code: ${x}; The provided arguments length (${A.length}) does not match the required ones (${v.length}).`),v(...A);const B=(v.match(/%[dfijoOs]/g)||[]).length;return u(B===A.length,`Code: ${x}; The provided arguments length (${A.length}) does not match the required ones (${B}).`),A.length===0?v:e(v,...A)}function m(x,v,A){A||(A=Error);class B extends A{constructor(...L){super(f(x,v,L))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(B.prototype,{name:{value:A.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),B.prototype.code=x,B.prototype[i]=!0,l[x]=B}function d(x){const v=a+x.name;return Object.defineProperty(x,"name",{value:v}),x}function T(x,v){if(x&&v&&x!==v){if(Array.isArray(v.errors))return v.errors.push(x),v;const A=new r([v,x],v.message);return A.code=v.code,A}return x||v}class _ extends Error{constructor(v="The operation was aborted",A=void 0){if(A!==void 0&&typeof A!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",A);super(v,A),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(x,v,A)=>{u(typeof x=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let B="The ";x.endsWith(" argument")?B+=`${x} `:B+=`"${x}" ${x.includes(".")?"property":"argument"} `,B+="must be ";const O=[],L=[],U=[];for(const M of v)u(typeof M=="string","All expected entries have to be of type string"),s.includes(M)?O.push(M.toLowerCase()):o.test(M)?L.push(M):(u(M!=="object",'The value "object" should be written as "Object"'),U.push(M));if(L.length>0){const M=O.indexOf("object");M!==-1&&(O.splice(O,M,1),L.push("Object"))}if(O.length>0){switch(O.length){case 1:B+=`of type ${O[0]}`;break;case 2:B+=`one of type ${O[0]} or ${O[1]}`;break;default:{const M=O.pop();B+=`one of type ${O.join(", ")}, or ${M}`}}(L.length>0||U.length>0)&&(B+=" or ")}if(L.length>0){switch(L.length){case 1:B+=`an instance of ${L[0]}`;break;case 2:B+=`an instance of ${L[0]} or ${L[1]}`;break;default:{const M=L.pop();B+=`an instance of ${L.join(", ")}, or ${M}`}}U.length>0&&(B+=" or ")}switch(U.length){case 0:break;case 1:U[0].toLowerCase()!==U[0]&&(B+="an "),B+=`${U[0]}`;break;case 2:B+=`one of ${U[0]} or ${U[1]}`;break;default:{const M=U.pop();B+=`one of ${U.join(", ")}, or ${M}`}}if(A==null)B+=`. Received ${A}`;else if(typeof A=="function"&&A.name)B+=`. Received function ${A.name}`;else if(typeof A=="object"){var R;if((R=A.constructor)!==null&&R!==void 0&&R.name)B+=`. Received an instance of ${A.constructor.name}`;else{const M=t(A,{depth:-1});B+=`. Received ${M}`}}else{let M=t(A,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),B+=`. Received type ${typeof A} (${M})`}return B},TypeError),m("ERR_INVALID_ARG_VALUE",(x,v,A="is invalid")=>{let B=t(v);return B.length>128&&(B=B.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${A}. Received ${B}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(x,v,A)=>{var B;const O=A!=null&&(B=A.constructor)!==null&&B!==void 0&&B.name?`instance of ${A.constructor.name}`:`type ${typeof A}`;return`Expected ${x} to be returned from the "${v}" function but got ${O}.`},TypeError),m("ERR_MISSING_ARGS",(...x)=>{u(x.length>0,"At least one arg needs to be specified");let v;const A=x.length;switch(x=(Array.isArray(x)?x:[x]).map(B=>`"${B}"`).join(" or "),A){case 1:v+=`The ${x[0]} argument`;break;case 2:v+=`The ${x[0]} and ${x[1]} arguments`;break;default:{const B=x.pop();v+=`The ${x.join(", ")}, and ${B} arguments`}break}return`${v} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(x,v,A)=>{u(v,'Missing "range" argument');let B;if(Number.isInteger(A)&&Math.abs(A)>2**32)B=c(String(A));else if(typeof A=="bigint"){B=String(A);const O=BigInt(2)**BigInt(32);(A>O||A<-O)&&(B=c(B)),B+="n"}else B=t(A);return`The value of "${x}" is out of range. It must be ${v}. Received ${B}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:_,aggregateTwoErrors:d(T),hideStackFrames:d,codes:l},errors}var browser$1={exports:{}},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=e,browser$1.exports.AbortSignal=t,browser$1.exports.default=e,browser$1.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(L,U,R){return Function.prototype.apply.call(L,U,R)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:n=function(L){return Object.getOwnPropertyNames(L)};function r(O){console&&console.warn&&console.warn(O)}var i=Number.isNaN||function(L){return L!==L};function s(){s.init.call(this)}events.exports=s,events.exports.once=v,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(O){if(typeof O!="number"||O<0||i(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");o=O}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||i(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function l(O){return O._maxListeners===void 0?s.defaultMaxListeners:O._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(L){for(var U=[],R=1;R<arguments.length;R++)U.push(arguments[R]);var M=L==="error",ne=this._events;if(ne!==void 0)M=M&&ne.error===void 0;else if(!M)return!1;if(M){var W;if(U.length>0&&(W=U[0]),W instanceof Error)throw W;var G=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw G.context=W,G}var re=ne[L];if(re===void 0)return!1;if(typeof re=="function")t(re,this,U);else for(var Y=re.length,ce=T(re,Y),R=0;R<Y;++R)t(ce[R],this,U);return!0};function u(O,L,U,R){var M,ne,W;if(a(U),ne=O._events,ne===void 0?(ne=O._events=Object.create(null),O._eventsCount=0):(ne.newListener!==void 0&&(O.emit("newListener",L,U.listener?U.listener:U),ne=O._events),W=ne[L]),W===void 0)W=ne[L]=U,++O._eventsCount;else if(typeof W=="function"?W=ne[L]=R?[U,W]:[W,U]:R?W.unshift(U):W.push(U),M=l(O),M>0&&W.length>M&&!W.warned){W.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=O,G.type=L,G.count=W.length,r(G)}return O}s.prototype.addListener=function(L,U){return u(this,L,U,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(L,U){return u(this,L,U,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(O,L,U){var R={fired:!1,wrapFn:void 0,target:O,type:L,listener:U},M=c.bind(R);return M.listener=U,R.wrapFn=M,M}s.prototype.once=function(L,U){return a(U),this.on(L,f(this,L,U)),this},s.prototype.prependOnceListener=function(L,U){return a(U),this.prependListener(L,f(this,L,U)),this},s.prototype.removeListener=function(L,U){var R,M,ne,W,G;if(a(U),M=this._events,M===void 0)return this;if(R=M[L],R===void 0)return this;if(R===U||R.listener===U)--this._eventsCount===0?this._events=Object.create(null):(delete M[L],M.removeListener&&this.emit("removeListener",L,R.listener||U));else if(typeof R!="function"){for(ne=-1,W=R.length-1;W>=0;W--)if(R[W]===U||R[W].listener===U){G=R[W].listener,ne=W;break}if(ne<0)return this;ne===0?R.shift():_(R,ne),R.length===1&&(M[L]=R[0]),M.removeListener!==void 0&&this.emit("removeListener",L,G||U)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(L){var U,R,M;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[L]),this;if(arguments.length===0){var ne=Object.keys(R),W;for(M=0;M<ne.length;++M)W=ne[M],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=R[L],typeof U=="function")this.removeListener(L,U);else if(U!==void 0)for(M=U.length-1;M>=0;M--)this.removeListener(L,U[M]);return this};function m(O,L,U){var R=O._events;if(R===void 0)return[];var M=R[L];return M===void 0?[]:typeof M=="function"?U?[M.listener||M]:[M]:U?x(M):T(M,M.length)}s.prototype.listeners=function(L){return m(this,L,!0)},s.prototype.rawListeners=function(L){return m(this,L,!1)},s.listenerCount=function(O,L){return typeof O.listenerCount=="function"?O.listenerCount(L):d.call(O,L)},s.prototype.listenerCount=d;function d(O){var L=this._events;if(L!==void 0){var U=L[O];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function T(O,L){for(var U=new Array(L),R=0;R<L;++R)U[R]=O[R];return U}function _(O,L){for(;L+1<O.length;L++)O[L]=O[L+1];O.pop()}function x(O){for(var L=new Array(O.length),U=0;U<L.length;++U)L[U]=O[U].listener||O[U];return L}function v(O,L){return new Promise(function(U,R){function M(W){O.removeListener(L,ne),R(W)}function ne(){typeof O.removeListener=="function"&&O.removeListener("error",M),U([].slice.call(arguments))}B(O,L,ne,{once:!0}),L!=="error"&&A(O,M,{once:!0})})}function A(O,L,U){typeof O.on=="function"&&B(O,"error",L,U)}function B(O,L,U,R){if(typeof O.on=="function")R.once?O.once(L,U):O.on(L,U);else if(typeof O.addEventListener=="function")O.addEventListener(L,function M(ne){R.once&&O.removeEventListener(L,M),U(ne)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}return events.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(e){const t=requireBuffer$1(),{format:n,inspect:r}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:i}}=requireErrors(),{kResistStopPropagation:s,AggregateError:o,SymbolDispose:a}=requirePrimordials(),l=globalThis.AbortSignal||requireBrowser$2().AbortSignal,u=globalThis.AbortController||requireBrowser$2().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||t.Blob,m=typeof f<"u"?function(x){return x instanceof f}:function(x){return!1},d=(_,x)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new i(x,"AbortSignal",_)},T=(_,x)=>{if(typeof _!="function")throw new i(x,"Function",_)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(_){let x=!1;return function(...v){x||(x=!0,_.apply(this,v))}},createDeferredPromise:function(){let _,x;return{promise:new Promise((A,B)=>{_=A,x=B}),resolve:_,reject:x}},promisify(_){return new Promise((x,v)=>{_((A,...B)=>A?v(A):x(...B))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(_){return _ instanceof c},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:m,deprecate(_,x){return _},addAbortListener:requireEvents().addAbortListener||function(x,v){if(x===void 0)throw new i("signal","AbortSignal",x);d(x,"signal"),T(v,"listener");let A;return x.aborted?queueMicrotask(()=>v()):(x.addEventListener("abort",v,{__proto__:null,once:!0,[s]:!0}),A=()=>{x.removeEventListener("abort",v)}),{__proto__:null,[a](){var B;(B=A)===null||B===void 0||B()}}},AbortSignalAny:l.any||function(x){if(x.length===1)return x[0];const v=new u,A=()=>v.abort();return x.forEach(B=>{d(B,"signals"),B.addEventListener("abort",A,{once:!0})}),v.signal.addEventListener("abort",()=>{x.forEach(B=>B.removeEventListener("abort",A))},{once:!0}),v.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:a,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:c,String:f,StringPrototypeToUpperCase:m,StringPrototypeTrim:d}=requirePrimordials(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:_,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:B}}=requireErrors(),{normalizeEncoding:O}=requireUtil(),{isAsyncFunction:L,isArrayBufferView:U}=requireUtil().types,R={};function M(E){return E===(E|0)}function ne(E){return E===E>>>0}const W=/^[0-7]+$/,G="must be a 32-bit unsigned integer or an octal string";function re(E,P,q){if(typeof E>"u"&&(E=q),typeof E=="string"){if(c(W,E)===null)throw new v(P,E,G);E=l(E,8)}return me(E,P),E}const Y=T((E,P,q=a,z=o)=>{if(typeof E!="number")throw new x(P,"number",E);if(!i(E))throw new A(P,"an integer",E);if(E<q||E>z)throw new A(P,`>= ${q} && <= ${z}`,E)}),ce=T((E,P,q=-2147483648,z=2147483647)=>{if(typeof E!="number")throw new x(P,"number",E);if(!i(E))throw new A(P,"an integer",E);if(E<q||E>z)throw new A(P,`>= ${q} && <= ${z}`,E)}),me=T((E,P,q=!1)=>{if(typeof E!="number")throw new x(P,"number",E);if(!i(E))throw new A(P,"an integer",E);const z=q?1:0,J=4294967295;if(E<z||E>J)throw new A(P,`>= ${z} && <= ${J}`,E)});function de(E,P){if(typeof E!="string")throw new x(P,"string",E)}function ge(E,P,q=void 0,z){if(typeof E!="number")throw new x(P,"number",E);if(q!=null&&E<q||z!=null&&E>z||(q!=null||z!=null)&&s(E))throw new A(P,`${q!=null?`>= ${q}`:""}${q!=null&&z!=null?" && ":""}${z!=null?`<= ${z}`:""}`,E)}const te=T((E,P,q)=>{if(!t(q,E)){const J="must be one of: "+n(r(q,le=>typeof le=="string"?`'${le}'`:f(le)),", ");throw new v(P,E,J)}});function ye(E,P){if(typeof E!="boolean")throw new x(P,"boolean",E)}function H(E,P,q){return E==null||!u(E,P)?q:E[P]}const ee=T((E,P,q=null)=>{const z=H(q,"allowArray",!1),J=H(q,"allowFunction",!1);if(!H(q,"nullable",!1)&&E===null||!z&&e(E)||typeof E!="object"&&(!J||typeof E!="function"))throw new x(P,"Object",E)}),oe=T((E,P)=>{if(E!=null&&typeof E!="object"&&typeof E!="function")throw new x(P,"a dictionary",E)}),ae=T((E,P,q=0)=>{if(!e(E))throw new x(P,"Array",E);if(E.length<q){const z=`must be longer than ${q}`;throw new v(P,E,z)}});function be(E,P){ae(E,P);for(let q=0;q<E.length;q++)de(E[q],`${P}[${q}]`)}function we(E,P){ae(E,P);for(let q=0;q<E.length;q++)ye(E[q],`${P}[${q}]`)}function Ee(E,P){ae(E,P);for(let q=0;q<E.length;q++){const z=E[q],J=`${P}[${q}]`;if(z==null)throw new x(J,"AbortSignal",z);fe(z,J)}}function Q(E,P="signal"){if(de(E,P),R[E]===void 0)throw R[m(E)]!==void 0?new B(E+" (signals must use all capital letters)"):new B(E)}const X=T((E,P="buffer")=>{if(!U(E))throw new x(P,["Buffer","TypedArray","DataView"],E)});function K(E,P){const q=O(P),z=E.length;if(q==="hex"&&z%2!==0)throw new v("encoding",P,`is invalid for data of length ${z}`)}function ie(E,P="Port",q=!0){if(typeof E!="number"&&typeof E!="string"||typeof E=="string"&&d(E).length===0||+E!==+E>>>0||E>65535||E===0&&!q)throw new _(P,E,q);return E|0}const fe=T((E,P)=>{if(E!==void 0&&(E===null||typeof E!="object"||!("aborted"in E)))throw new x(P,"AbortSignal",E)}),F=T((E,P)=>{if(typeof E!="function")throw new x(P,"Function",E)}),I=T((E,P)=>{if(typeof E!="function"||L(E))throw new x(P,"Function",E)}),C=T((E,P)=>{if(E!==void 0)throw new x(P,"undefined",E)});function $(E,P,q){if(!t(q,E))throw new x(P,`('${n(q,"|")}')`,E)}const S=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function g(E,P){if(typeof E>"u"||!c(S,E))throw new v(P,E,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function b(E){if(typeof E=="string")return g(E,"hints"),E;if(e(E)){const P=E.length;let q="";if(P===0)return q;for(let z=0;z<P;z++){const J=E[z];g(J,"hints"),q+=J,z!==P-1&&(q+=", ")}return q}throw new v("hints",E,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:M,isUint32:ne,parseFileMode:re,validateArray:ae,validateStringArray:be,validateBooleanArray:we,validateAbortSignalArray:Ee,validateBoolean:ye,validateBuffer:X,validateDictionary:oe,validateEncoding:K,validateFunction:F,validateInt32:ce,validateInteger:Y,validateNumber:ge,validateObject:ee,validateOneOf:te,validatePlainFunction:I,validatePort:ie,validateSignalName:Q,validateString:de,validateUint32:me,validateUndefined:C,validateUnion:$,validateAbortSignal:fe,validateLinkHeaderValue:b},validators}var endOfStream={exports:{}},browser={exports:{}},hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser.exports;hasRequiredBrowser$1=1;var e=browser.exports={},t,n;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch{t=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=i}catch{n=i}})();function s(_){if(t===setTimeout)return setTimeout(_,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(_,0);try{return t(_,0)}catch{try{return t.call(null,_,0)}catch{return t.call(this,_,0)}}}function o(_){if(n===clearTimeout)return clearTimeout(_);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(_);try{return n(_)}catch{try{return n.call(null,_)}catch{return n.call(this,_)}}}var a=[],l=!1,u,c=-1;function f(){!l||!u||(l=!1,u.length?a=u.concat(a):c=-1,a.length&&m())}function m(){if(!l){var _=s(f);l=!0;for(var x=a.length;x;){for(u=a,a=[];++c<x;)u&&u[c].run();c=-1,x=a.length}u=null,l=!1,o(_)}}e.nextTick=function(_){var x=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)x[v-1]=arguments[v];a.push(new d(_,x)),a.length===1&&!l&&s(m)};function d(_,x){this.fun=_,this.array=x}d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function T(){}return e.on=T,e.addListener=T,e.once=T,e.off=T,e.removeListener=T,e.removeAllListeners=T,e.emit=T,e.prependListener=T,e.prependOnceListener=T,e.listeners=function(_){return[]},e.binding=function(_){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(_){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},browser.exports}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=requirePrimordials(),r=n("nodejs.stream.destroyed"),i=n("nodejs.stream.errored"),s=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),a=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function c(H,ee=!1){var oe;return!!(H&&typeof H.pipe=="function"&&typeof H.on=="function"&&(!ee||typeof H.pause=="function"&&typeof H.resume=="function")&&(!H._writableState||((oe=H._readableState)===null||oe===void 0?void 0:oe.readable)!==!1)&&(!H._writableState||H._readableState))}function f(H){var ee;return!!(H&&typeof H.write=="function"&&typeof H.on=="function"&&(!H._readableState||((ee=H._writableState)===null||ee===void 0?void 0:ee.writable)!==!1))}function m(H){return!!(H&&typeof H.pipe=="function"&&H._readableState&&typeof H.on=="function"&&typeof H.write=="function")}function d(H){return H&&(H._readableState||H._writableState||typeof H.write=="function"&&typeof H.on=="function"||typeof H.pipe=="function"&&typeof H.on=="function")}function T(H){return!!(H&&!d(H)&&typeof H.pipeThrough=="function"&&typeof H.getReader=="function"&&typeof H.cancel=="function")}function _(H){return!!(H&&!d(H)&&typeof H.getWriter=="function"&&typeof H.abort=="function")}function x(H){return!!(H&&!d(H)&&typeof H.readable=="object"&&typeof H.writable=="object")}function v(H){return T(H)||_(H)||x(H)}function A(H,ee){return H==null?!1:ee===!0?typeof H[e]=="function":ee===!1?typeof H[t]=="function":typeof H[e]=="function"||typeof H[t]=="function"}function B(H){if(!d(H))return null;const ee=H._writableState,oe=H._readableState,ae=ee||oe;return!!(H.destroyed||H[r]||ae!=null&&ae.destroyed)}function O(H){if(!f(H))return null;if(H.writableEnded===!0)return!0;const ee=H._writableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.ended)!="boolean"?null:ee.ended}function L(H,ee){if(!f(H))return null;if(H.writableFinished===!0)return!0;const oe=H._writableState;return oe!=null&&oe.errored?!1:typeof(oe==null?void 0:oe.finished)!="boolean"?null:!!(oe.finished||ee===!1&&oe.ended===!0&&oe.length===0)}function U(H){if(!c(H))return null;if(H.readableEnded===!0)return!0;const ee=H._readableState;return!ee||ee.errored?!1:typeof(ee==null?void 0:ee.ended)!="boolean"?null:ee.ended}function R(H,ee){if(!c(H))return null;const oe=H._readableState;return oe!=null&&oe.errored?!1:typeof(oe==null?void 0:oe.endEmitted)!="boolean"?null:!!(oe.endEmitted||ee===!1&&oe.ended===!0&&oe.length===0)}function M(H){return H&&H[s]!=null?H[s]:typeof(H==null?void 0:H.readable)!="boolean"?null:B(H)?!1:c(H)&&H.readable&&!R(H)}function ne(H){return H&&H[o]!=null?H[o]:typeof(H==null?void 0:H.writable)!="boolean"?null:B(H)?!1:f(H)&&H.writable&&!O(H)}function W(H,ee){return d(H)?B(H)?!0:!((ee==null?void 0:ee.readable)!==!1&&M(H)||(ee==null?void 0:ee.writable)!==!1&&ne(H)):null}function G(H){var ee,oe;return d(H)?H.writableErrored?H.writableErrored:(ee=(oe=H._writableState)===null||oe===void 0?void 0:oe.errored)!==null&&ee!==void 0?ee:null:null}function re(H){var ee,oe;return d(H)?H.readableErrored?H.readableErrored:(ee=(oe=H._readableState)===null||oe===void 0?void 0:oe.errored)!==null&&ee!==void 0?ee:null:null}function Y(H){if(!d(H))return null;if(typeof H.closed=="boolean")return H.closed;const ee=H._writableState,oe=H._readableState;return typeof(ee==null?void 0:ee.closed)=="boolean"||typeof(oe==null?void 0:oe.closed)=="boolean"?(ee==null?void 0:ee.closed)||(oe==null?void 0:oe.closed):typeof H._closed=="boolean"&&ce(H)?H._closed:null}function ce(H){return typeof H._closed=="boolean"&&typeof H._defaultKeepAlive=="boolean"&&typeof H._removedConnection=="boolean"&&typeof H._removedContLen=="boolean"}function me(H){return typeof H._sent100=="boolean"&&ce(H)}function de(H){var ee;return typeof H._consuming=="boolean"&&typeof H._dumped=="boolean"&&((ee=H.req)===null||ee===void 0?void 0:ee.upgradeOrConnect)===void 0}function ge(H){if(!d(H))return null;const ee=H._writableState,oe=H._readableState,ae=ee||oe;return!ae&&me(H)||!!(ae&&ae.autoDestroy&&ae.emitClose&&ae.closed===!1)}function te(H){var ee;return!!(H&&((ee=H[a])!==null&&ee!==void 0?ee:H.readableDidRead||H.readableAborted))}function ye(H){var ee,oe,ae,be,we,Ee,Q,X,K,ie;return!!(H&&((ee=(oe=(ae=(be=(we=(Ee=H[i])!==null&&Ee!==void 0?Ee:H.readableErrored)!==null&&we!==void 0?we:H.writableErrored)!==null&&be!==void 0?be:(Q=H._readableState)===null||Q===void 0?void 0:Q.errorEmitted)!==null&&ae!==void 0?ae:(X=H._writableState)===null||X===void 0?void 0:X.errorEmitted)!==null&&oe!==void 0?oe:(K=H._readableState)===null||K===void 0?void 0:K.errored)!==null&&ee!==void 0?ee:!((ie=H._writableState)===null||ie===void 0)&&ie.errored))}return utils={isDestroyed:B,kIsDestroyed:r,isDisturbed:te,kIsDisturbed:a,isErrored:ye,kIsErrored:i,isReadable:M,kIsReadable:s,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:o,isClosed:Y,isDuplexNodeStream:m,isFinished:W,isIterable:A,isReadableNodeStream:c,isReadableStream:T,isReadableEnded:U,isReadableFinished:R,isReadableErrored:re,isNodeStream:d,isWebStream:v,isWritable:ne,isWritableNodeStream:f,isWritableStream:_,isWritableEnded:O,isWritableFinished:L,isWritableErrored:G,isServerRequest:de,isServerResponse:me,willEmitClose:ge,isTransformStream:x},utils}var hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream.exports;hasRequiredEndOfStream=1;const e=requireBrowser$1(),{AbortError:t,codes:n}=requireErrors(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=n,{kEmptyObject:s,once:o}=requireUtil(),{validateAbortSignal:a,validateFunction:l,validateObject:u,validateBoolean:c}=requireValidators(),{Promise:f,PromisePrototypeThen:m,SymbolDispose:d}=requirePrimordials(),{isClosed:T,isReadable:_,isReadableNodeStream:x,isReadableStream:v,isReadableFinished:A,isReadableErrored:B,isWritable:O,isWritableNodeStream:L,isWritableStream:U,isWritableFinished:R,isWritableErrored:M,isNodeStream:ne,willEmitClose:W,kIsClosedPromise:G}=requireUtils();let re;function Y(te){return te.setHeader&&typeof te.abort=="function"}const ce=()=>{};function me(te,ye,H){var ee,oe;if(arguments.length===2?(H=ye,ye=s):ye==null?ye=s:u(ye,"options"),l(H,"callback"),a(ye.signal,"options.signal"),H=o(H),v(te)||U(te))return de(te,ye,H);if(!ne(te))throw new r("stream",["ReadableStream","WritableStream","Stream"],te);const ae=(ee=ye.readable)!==null&&ee!==void 0?ee:x(te),be=(oe=ye.writable)!==null&&oe!==void 0?oe:L(te),we=te._writableState,Ee=te._readableState,Q=()=>{te.writable||ie()};let X=W(te)&&x(te)===ae&&L(te)===be,K=R(te,!1);const ie=()=>{K=!0,te.destroyed&&(X=!1),!(X&&(!te.readable||ae))&&(!ae||fe)&&H.call(te)};let fe=A(te,!1);const F=()=>{fe=!0,te.destroyed&&(X=!1),!(X&&(!te.writable||be))&&(!be||K)&&H.call(te)},I=E=>{H.call(te,E)};let C=T(te);const $=()=>{C=!0;const E=M(te)||B(te);if(E&&typeof E!="boolean")return H.call(te,E);if(ae&&!fe&&x(te,!0)&&!A(te,!1))return H.call(te,new i);if(be&&!K&&!R(te,!1))return H.call(te,new i);H.call(te)},S=()=>{C=!0;const E=M(te)||B(te);if(E&&typeof E!="boolean")return H.call(te,E);H.call(te)},g=()=>{te.req.on("finish",ie)};Y(te)?(te.on("complete",ie),X||te.on("abort",$),te.req?g():te.on("request",g)):be&&!we&&(te.on("end",Q),te.on("close",Q)),!X&&typeof te.aborted=="boolean"&&te.on("aborted",$),te.on("end",F),te.on("finish",ie),ye.error!==!1&&te.on("error",I),te.on("close",$),C?e.nextTick($):we!=null&&we.errorEmitted||Ee!=null&&Ee.errorEmitted?X||e.nextTick(S):(!ae&&(!X||_(te))&&(K||O(te)===!1)||!be&&(!X||O(te))&&(fe||_(te)===!1)||Ee&&te.req&&te.aborted)&&e.nextTick(S);const b=()=>{H=ce,te.removeListener("aborted",$),te.removeListener("complete",ie),te.removeListener("abort",$),te.removeListener("request",g),te.req&&te.req.removeListener("finish",ie),te.removeListener("end",Q),te.removeListener("close",Q),te.removeListener("finish",ie),te.removeListener("end",F),te.removeListener("error",I),te.removeListener("close",$)};if(ye.signal&&!C){const E=()=>{const P=H;b(),P.call(te,new t(void 0,{cause:ye.signal.reason}))};if(ye.signal.aborted)e.nextTick(E);else{re=re||requireUtil().addAbortListener;const P=re(ye.signal,E),q=H;H=o((...z)=>{P[d](),q.apply(te,z)})}}return b}function de(te,ye,H){let ee=!1,oe=ce;if(ye.signal)if(oe=()=>{ee=!0,H.call(te,new t(void 0,{cause:ye.signal.reason}))},ye.signal.aborted)e.nextTick(oe);else{re=re||requireUtil().addAbortListener;const be=re(ye.signal,oe),we=H;H=o((...Ee)=>{be[d](),we.apply(te,Ee)})}const ae=(...be)=>{ee||e.nextTick(()=>H.apply(te,be))};return m(te[G].promise,ae,ae),ce}function ge(te,ye){var H;let ee=!1;return ye===null&&(ye=s),(H=ye)!==null&&H!==void 0&&H.cleanup&&(c(ye.cleanup,"cleanup"),ee=ye.cleanup),new f((oe,ae)=>{const be=me(te,ye,we=>{ee&&be(),we?ae(we):oe()})})}return endOfStream.exports=me,endOfStream.exports.finished=ge,endOfStream.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const e=requireBrowser$1(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=requireErrors(),{Symbol:i}=requirePrimordials(),{kIsDestroyed:s,isDestroyed:o,isFinished:a,isServerRequest:l}=requireUtils(),u=i("kDestroy"),c=i("kConstruct");function f(W,G,re){W&&(W.stack,G&&!G.errored&&(G.errored=W),re&&!re.errored&&(re.errored=W))}function m(W,G){const re=this._readableState,Y=this._writableState,ce=Y||re;return Y!=null&&Y.destroyed||re!=null&&re.destroyed?(typeof G=="function"&&G(),this):(f(W,Y,re),Y&&(Y.destroyed=!0),re&&(re.destroyed=!0),ce.constructed?d(this,W,G):this.once(u,function(me){d(this,t(me,W),G)}),this)}function d(W,G,re){let Y=!1;function ce(me){if(Y)return;Y=!0;const de=W._readableState,ge=W._writableState;f(me,ge,de),ge&&(ge.closed=!0),de&&(de.closed=!0),typeof re=="function"&&re(me),me?e.nextTick(T,W,me):e.nextTick(_,W)}try{W._destroy(G||null,ce)}catch(me){ce(me)}}function T(W,G){x(W,G),_(W)}function _(W){const G=W._readableState,re=W._writableState;re&&(re.closeEmitted=!0),G&&(G.closeEmitted=!0),(re!=null&&re.emitClose||G!=null&&G.emitClose)&&W.emit("close")}function x(W,G){const re=W._readableState,Y=W._writableState;Y!=null&&Y.errorEmitted||re!=null&&re.errorEmitted||(Y&&(Y.errorEmitted=!0),re&&(re.errorEmitted=!0),W.emit("error",G))}function v(){const W=this._readableState,G=this._writableState;W&&(W.constructed=!0,W.closed=!1,W.closeEmitted=!1,W.destroyed=!1,W.errored=null,W.errorEmitted=!1,W.reading=!1,W.ended=W.readable===!1,W.endEmitted=W.readable===!1),G&&(G.constructed=!0,G.destroyed=!1,G.closed=!1,G.closeEmitted=!1,G.errored=null,G.errorEmitted=!1,G.finalCalled=!1,G.prefinished=!1,G.ended=G.writable===!1,G.ending=G.writable===!1,G.finished=G.writable===!1)}function A(W,G,re){const Y=W._readableState,ce=W._writableState;if(ce!=null&&ce.destroyed||Y!=null&&Y.destroyed)return this;Y!=null&&Y.autoDestroy||ce!=null&&ce.autoDestroy?W.destroy(G):G&&(G.stack,ce&&!ce.errored&&(ce.errored=G),Y&&!Y.errored&&(Y.errored=G),re?e.nextTick(x,W,G):x(W,G))}function B(W,G){if(typeof W._construct!="function")return;const re=W._readableState,Y=W._writableState;re&&(re.constructed=!1),Y&&(Y.constructed=!1),W.once(c,G),!(W.listenerCount(c)>1)&&e.nextTick(O,W)}function O(W){let G=!1;function re(Y){if(G){A(W,Y??new n);return}G=!0;const ce=W._readableState,me=W._writableState,de=me||ce;ce&&(ce.constructed=!0),me&&(me.constructed=!0),de.destroyed?W.emit(u,Y):Y?A(W,Y,!0):e.nextTick(L,W)}try{W._construct(Y=>{e.nextTick(re,Y)})}catch(Y){e.nextTick(re,Y)}}function L(W){W.emit(c)}function U(W){return(W==null?void 0:W.setHeader)&&typeof W.abort=="function"}function R(W){W.emit("close")}function M(W,G){W.emit("error",G),e.nextTick(R,W)}function ne(W,G){!W||o(W)||(!G&&!a(W)&&(G=new r),l(W)?(W.socket=null,W.destroy(G)):U(W)?W.abort():U(W.req)?W.req.abort():typeof W.destroy=="function"?W.destroy(G):typeof W.close=="function"?W.close():G?e.nextTick(M,W,G):e.nextTick(R,W),W.destroyed||(W[s]=!0))}return destroy_1={construct:B,destroyer:ne,destroy:m,undestroy:v,errorOrDestroy:A},destroy_1}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=requirePrimordials(),{EventEmitter:n}=requireEvents();function r(s){n.call(this,s)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(s,o){const a=this;function l(_){s.writable&&s.write(_)===!1&&a.pause&&a.pause()}a.on("data",l);function u(){a.readable&&a.resume&&a.resume()}s.on("drain",u),!s._isStdio&&(!o||o.end!==!1)&&(a.on("end",f),a.on("close",m));let c=!1;function f(){c||(c=!0,s.end())}function m(){c||(c=!0,typeof s.destroy=="function"&&s.destroy())}function d(_){T(),n.listenerCount(this,"error")===0&&this.emit("error",_)}i(a,"error",d),i(s,"error",d);function T(){a.removeListener("data",l),s.removeListener("drain",u),a.removeListener("end",f),a.removeListener("close",m),a.removeListener("error",d),s.removeListener("error",d),a.removeListener("end",T),a.removeListener("close",T),s.removeListener("close",T)}return a.on("end",T),a.on("close",T),s.on("close",T),s.emit("pipe",a),s};function i(s,o,a){if(typeof s.prependListener=="function")return s.prependListener(o,a);!s._events||!s._events[o]?s.on(o,a):e(s._events[o])?s._events[o].unshift(a):s._events[o]=[a,s._events[o]]}return legacy={Stream:r,prependListener:i},legacy}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,function(e){const{SymbolDispose:t}=requirePrimordials(),{AbortError:n,codes:r}=requireErrors(),{isNodeStream:i,isWebStream:s,kControllerErrorFunction:o}=requireUtils(),a=requireEndOfStream(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const c=(f,m)=>{if(typeof f!="object"||!("aborted"in f))throw new l(m,"AbortSignal",f)};e.exports.addAbortSignal=function(m,d){if(c(m,"signal"),!i(d)&&!s(d))throw new l("stream",["ReadableStream","WritableStream","Stream"],d);return e.exports.addAbortSignalNoValidate(m,d)},e.exports.addAbortSignalNoValidate=function(f,m){if(typeof f!="object"||!("aborted"in f))return m;const d=i(m)?()=>{m.destroy(new n(void 0,{cause:f.reason}))}:()=>{m[o](new n(void 0,{cause:f.reason}))};if(f.aborted)d();else{u=u||requireUtil().addAbortListener;const T=u(f,d);a(m,T[t])}return m}}(addAbortSignal)),addAbortSignal.exports}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=requirePrimordials(),{Buffer:i}=requireBuffer$1(),{inspect:s}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const l={data:a,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(a){const l={data:a,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=a+l.data;return u}concat(a){if(this.length===0)return i.alloc(0);const l=i.allocUnsafe(a>>>0);let u=this.head,c=0;for(;u;)n(l,u.data,c),c+=u.data.length,u=u.next;return l}consume(a,l){const u=this.head.data;if(a<u.length){const c=u.slice(0,a);return this.head.data=u.slice(a),c}return a===u.length?this.shift():l?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[t](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let l="",u=this.head,c=0;do{const f=u.data;if(a>f.length)l+=f,a-=f.length;else{a===f.length?(l+=f,++c,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(f,0,a),this.head=u,u.data=e(f,a));break}++c}while((u=u.next)!==null);return this.length-=c,l}_getBuffer(a){const l=i.allocUnsafe(a),u=a;let c=this.head,f=0;do{const m=c.data;if(a>m.length)n(l,m,u-a),a-=m.length;else{a===m.length?(n(l,m,u-a),++f,c.next?this.head=c.next:this.head=this.tail=null):(n(l,new r(m.buffer,m.byteOffset,a),u-a),this.head=c,c.data=m.slice(a));break}++f}while((c=c.next)!==null);return this.length-=f,l}[Symbol.for("nodejs.util.inspect.custom")](a,l){return s(this,{...l,depth:0,customInspect:!1})}},buffer_list}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:e,NumberIsInteger:t}=requirePrimordials(),{validateInteger:n}=requireValidators(),{ERR_INVALID_ARG_VALUE:r}=requireErrors().codes;let i=16*1024,s=16;function o(c,f,m){return c.highWaterMark!=null?c.highWaterMark:f?c[m]:null}function a(c){return c?s:i}function l(c,f){n(f,"value",0),c?s=f:i=f}function u(c,f,m,d){const T=o(f,d,m);if(T!=null){if(!t(T)||T<0){const _=d?`options.${m}`:"options.highWaterMark";throw new r(_,T)}return e(T)}return a(c.objectMode)}return state={getHighWaterMark:u,getDefaultHighWaterMark:a,setDefaultHighWaterMark:l},state}var string_decoder={},safeBuffer={exports:{}},buffer={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(e){var t=requireBase64Js(),n=requireIeee754(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var S=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(S,g),S.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(S){if(S>i)throw new RangeError('The value "'+S+'" is invalid for option "size"');var g=new Uint8Array(S);return Object.setPrototypeOf(g,a.prototype),g}function a(S,g,b){if(typeof S=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(S)}return l(S,g,b)}a.poolSize=8192;function l(S,g,b){if(typeof S=="string")return m(S,g);if(ArrayBuffer.isView(S))return T(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(I(S,ArrayBuffer)||S&&I(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(I(S,SharedArrayBuffer)||S&&I(S.buffer,SharedArrayBuffer)))return _(S,g,b);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var E=S.valueOf&&S.valueOf();if(E!=null&&E!==S)return a.from(E,g,b);var P=x(S);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return a.from(S[Symbol.toPrimitive]("string"),g,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}a.from=function(S,g,b){return l(S,g,b)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function c(S,g,b){return u(S),S<=0?o(S):g!==void 0?typeof b=="string"?o(S).fill(g,b):o(S).fill(g):o(S)}a.alloc=function(S,g,b){return c(S,g,b)};function f(S){return u(S),o(S<0?0:v(S)|0)}a.allocUnsafe=function(S){return f(S)},a.allocUnsafeSlow=function(S){return f(S)};function m(S,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var b=B(S,g)|0,E=o(b),P=E.write(S,g);return P!==b&&(E=E.slice(0,P)),E}function d(S){for(var g=S.length<0?0:v(S.length)|0,b=o(g),E=0;E<g;E+=1)b[E]=S[E]&255;return b}function T(S){if(I(S,Uint8Array)){var g=new Uint8Array(S);return _(g.buffer,g.byteOffset,g.byteLength)}return d(S)}function _(S,g,b){if(g<0||S.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<g+(b||0))throw new RangeError('"length" is outside of buffer bounds');var E;return g===void 0&&b===void 0?E=new Uint8Array(S):b===void 0?E=new Uint8Array(S,g):E=new Uint8Array(S,g,b),Object.setPrototypeOf(E,a.prototype),E}function x(S){if(a.isBuffer(S)){var g=v(S.length)|0,b=o(g);return b.length===0||S.copy(b,0,0,g),b}if(S.length!==void 0)return typeof S.length!="number"||C(S.length)?o(0):d(S);if(S.type==="Buffer"&&Array.isArray(S.data))return d(S.data)}function v(S){if(S>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return S|0}function A(S){return+S!=S&&(S=0),a.alloc(+S)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,b){if(I(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),I(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(g)||!a.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===b)return 0;for(var E=g.length,P=b.length,q=0,z=Math.min(E,P);q<z;++q)if(g[q]!==b[q]){E=g[q],P=b[q];break}return E<P?-1:P<E?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,b){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);var E;if(b===void 0)for(b=0,E=0;E<g.length;++E)b+=g[E].length;var P=a.allocUnsafe(b),q=0;for(E=0;E<g.length;++E){var z=g[E];if(I(z,Uint8Array))q+z.length>P.length?a.from(z).copy(P,q):Uint8Array.prototype.set.call(P,z,q);else if(a.isBuffer(z))z.copy(P,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=z.length}return P};function B(S,g){if(a.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||I(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);var b=S.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&b===0)return 0;for(var P=!1;;)switch(g){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return X(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return fe(S).length;default:if(P)return E?-1:X(S).length;g=(""+g).toLowerCase(),P=!0}}a.byteLength=B;function O(S,g,b){var E=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,g>>>=0,b<=g))return"";for(S||(S="utf8");;)switch(S){case"hex":return ye(this,g,b);case"utf8":case"utf-8":return ce(this,g,b);case"ascii":return ge(this,g,b);case"latin1":case"binary":return te(this,g,b);case"base64":return Y(this,g,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,g,b);default:if(E)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),E=!0}}a.prototype._isBuffer=!0;function L(S,g,b){var E=S[g];S[g]=S[b],S[b]=E}a.prototype.swap16=function(){var g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<g;b+=2)L(this,b,b+1);return this},a.prototype.swap32=function(){var g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<g;b+=4)L(this,b,b+3),L(this,b+1,b+2);return this},a.prototype.swap64=function(){var g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<g;b+=8)L(this,b,b+7),L(this,b+1,b+6),L(this,b+2,b+5),L(this,b+3,b+4);return this},a.prototype.toString=function(){var g=this.length;return g===0?"":arguments.length===0?ce(this,0,g):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){var g="",b=e.INSPECT_MAX_BYTES;return g=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(g+=" ... "),"<Buffer "+g+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(g,b,E,P,q){if(I(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(b===void 0&&(b=0),E===void 0&&(E=g?g.length:0),P===void 0&&(P=0),q===void 0&&(q=this.length),b<0||E>g.length||P<0||q>this.length)throw new RangeError("out of range index");if(P>=q&&b>=E)return 0;if(P>=q)return-1;if(b>=E)return 1;if(b>>>=0,E>>>=0,P>>>=0,q>>>=0,this===g)return 0;for(var z=q-P,J=E-b,le=Math.min(z,J),ue=this.slice(P,q),Te=g.slice(b,E),k=0;k<le;++k)if(ue[k]!==Te[k]){z=ue[k],J=Te[k];break}return z<J?-1:J<z?1:0};function U(S,g,b,E,P){if(S.length===0)return-1;if(typeof b=="string"?(E=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,C(b)&&(b=P?0:S.length-1),b<0&&(b=S.length+b),b>=S.length){if(P)return-1;b=S.length-1}else if(b<0)if(P)b=0;else return-1;if(typeof g=="string"&&(g=a.from(g,E)),a.isBuffer(g))return g.length===0?-1:R(S,g,b,E,P);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(S,g,b):Uint8Array.prototype.lastIndexOf.call(S,g,b):R(S,[g],b,E,P);throw new TypeError("val must be string, number or Buffer")}function R(S,g,b,E,P){var q=1,z=S.length,J=g.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(S.length<2||g.length<2)return-1;q=2,z/=2,J/=2,b/=2}function le(w,D){return q===1?w[D]:w.readUInt16BE(D*q)}var ue;if(P){var Te=-1;for(ue=b;ue<z;ue++)if(le(S,ue)===le(g,Te===-1?0:ue-Te)){if(Te===-1&&(Te=ue),ue-Te+1===J)return Te*q}else Te!==-1&&(ue-=ue-Te),Te=-1}else for(b+J>z&&(b=z-J),ue=b;ue>=0;ue--){for(var k=!0,y=0;y<J;y++)if(le(S,ue+y)!==le(g,y)){k=!1;break}if(k)return ue}return-1}a.prototype.includes=function(g,b,E){return this.indexOf(g,b,E)!==-1},a.prototype.indexOf=function(g,b,E){return U(this,g,b,E,!0)},a.prototype.lastIndexOf=function(g,b,E){return U(this,g,b,E,!1)};function M(S,g,b,E){b=Number(b)||0;var P=S.length-b;E?(E=Number(E),E>P&&(E=P)):E=P;var q=g.length;E>q/2&&(E=q/2);for(var z=0;z<E;++z){var J=parseInt(g.substr(z*2,2),16);if(C(J))return z;S[b+z]=J}return z}function ne(S,g,b,E){return F(X(g,S.length-b),S,b,E)}function W(S,g,b,E){return F(K(g),S,b,E)}function G(S,g,b,E){return F(fe(g),S,b,E)}function re(S,g,b,E){return F(ie(g,S.length-b),S,b,E)}a.prototype.write=function(g,b,E,P){if(b===void 0)P="utf8",E=this.length,b=0;else if(E===void 0&&typeof b=="string")P=b,E=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(E)?(E=E>>>0,P===void 0&&(P="utf8")):(P=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var q=this.length-b;if((E===void 0||E>q)&&(E=q),g.length>0&&(E<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var z=!1;;)switch(P){case"hex":return M(this,g,b,E);case"utf8":case"utf-8":return ne(this,g,b,E);case"ascii":case"latin1":case"binary":return W(this,g,b,E);case"base64":return G(this,g,b,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,g,b,E);default:if(z)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(S,g,b){return g===0&&b===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(g,b))}function ce(S,g,b){b=Math.min(S.length,b);for(var E=[],P=g;P<b;){var q=S[P],z=null,J=q>239?4:q>223?3:q>191?2:1;if(P+J<=b){var le,ue,Te,k;switch(J){case 1:q<128&&(z=q);break;case 2:le=S[P+1],(le&192)===128&&(k=(q&31)<<6|le&63,k>127&&(z=k));break;case 3:le=S[P+1],ue=S[P+2],(le&192)===128&&(ue&192)===128&&(k=(q&15)<<12|(le&63)<<6|ue&63,k>2047&&(k<55296||k>57343)&&(z=k));break;case 4:le=S[P+1],ue=S[P+2],Te=S[P+3],(le&192)===128&&(ue&192)===128&&(Te&192)===128&&(k=(q&15)<<18|(le&63)<<12|(ue&63)<<6|Te&63,k>65535&&k<1114112&&(z=k))}}z===null?(z=65533,J=1):z>65535&&(z-=65536,E.push(z>>>10&1023|55296),z=56320|z&1023),E.push(z),P+=J}return de(E)}var me=4096;function de(S){var g=S.length;if(g<=me)return String.fromCharCode.apply(String,S);for(var b="",E=0;E<g;)b+=String.fromCharCode.apply(String,S.slice(E,E+=me));return b}function ge(S,g,b){var E="";b=Math.min(S.length,b);for(var P=g;P<b;++P)E+=String.fromCharCode(S[P]&127);return E}function te(S,g,b){var E="";b=Math.min(S.length,b);for(var P=g;P<b;++P)E+=String.fromCharCode(S[P]);return E}function ye(S,g,b){var E=S.length;(!g||g<0)&&(g=0),(!b||b<0||b>E)&&(b=E);for(var P="",q=g;q<b;++q)P+=$[S[q]];return P}function H(S,g,b){for(var E=S.slice(g,b),P="",q=0;q<E.length-1;q+=2)P+=String.fromCharCode(E[q]+E[q+1]*256);return P}a.prototype.slice=function(g,b){var E=this.length;g=~~g,b=b===void 0?E:~~b,g<0?(g+=E,g<0&&(g=0)):g>E&&(g=E),b<0?(b+=E,b<0&&(b=0)):b>E&&(b=E),b<g&&(b=g);var P=this.subarray(g,b);return Object.setPrototypeOf(P,a.prototype),P};function ee(S,g,b){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+g>b)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,b,E){g=g>>>0,b=b>>>0,E||ee(g,b,this.length);for(var P=this[g],q=1,z=0;++z<b&&(q*=256);)P+=this[g+z]*q;return P},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,b,E){g=g>>>0,b=b>>>0,E||ee(g,b,this.length);for(var P=this[g+--b],q=1;b>0&&(q*=256);)P+=this[g+--b]*q;return P},a.prototype.readUint8=a.prototype.readUInt8=function(g,b){return g=g>>>0,b||ee(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,b){return g=g>>>0,b||ee(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,b){return g=g>>>0,b||ee(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,b){return g=g>>>0,b||ee(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,b){return g=g>>>0,b||ee(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readIntLE=function(g,b,E){g=g>>>0,b=b>>>0,E||ee(g,b,this.length);for(var P=this[g],q=1,z=0;++z<b&&(q*=256);)P+=this[g+z]*q;return q*=128,P>=q&&(P-=Math.pow(2,8*b)),P},a.prototype.readIntBE=function(g,b,E){g=g>>>0,b=b>>>0,E||ee(g,b,this.length);for(var P=b,q=1,z=this[g+--P];P>0&&(q*=256);)z+=this[g+--P]*q;return q*=128,z>=q&&(z-=Math.pow(2,8*b)),z},a.prototype.readInt8=function(g,b){return g=g>>>0,b||ee(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,b){g=g>>>0,b||ee(g,2,this.length);var E=this[g]|this[g+1]<<8;return E&32768?E|4294901760:E},a.prototype.readInt16BE=function(g,b){g=g>>>0,b||ee(g,2,this.length);var E=this[g+1]|this[g]<<8;return E&32768?E|4294901760:E},a.prototype.readInt32LE=function(g,b){return g=g>>>0,b||ee(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,b){return g=g>>>0,b||ee(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readFloatLE=function(g,b){return g=g>>>0,b||ee(g,4,this.length),n.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,b){return g=g>>>0,b||ee(g,4,this.length),n.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,b){return g=g>>>0,b||ee(g,8,this.length),n.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,b){return g=g>>>0,b||ee(g,8,this.length),n.read(this,g,!1,52,8)};function oe(S,g,b,E,P,q){if(!a.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>P||g<q)throw new RangeError('"value" argument is out of bounds');if(b+E>S.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,b,E,P){if(g=+g,b=b>>>0,E=E>>>0,!P){var q=Math.pow(2,8*E)-1;oe(this,g,b,E,q,0)}var z=1,J=0;for(this[b]=g&255;++J<E&&(z*=256);)this[b+J]=g/z&255;return b+E},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,b,E,P){if(g=+g,b=b>>>0,E=E>>>0,!P){var q=Math.pow(2,8*E)-1;oe(this,g,b,E,q,0)}var z=E-1,J=1;for(this[b+z]=g&255;--z>=0&&(J*=256);)this[b+z]=g/J&255;return b+E},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,1,255,0),this[b]=g&255,b+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,2,65535,0),this[b]=g&255,this[b+1]=g>>>8,b+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,2,65535,0),this[b]=g>>>8,this[b+1]=g&255,b+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,4,4294967295,0),this[b+3]=g>>>24,this[b+2]=g>>>16,this[b+1]=g>>>8,this[b]=g&255,b+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,4,4294967295,0),this[b]=g>>>24,this[b+1]=g>>>16,this[b+2]=g>>>8,this[b+3]=g&255,b+4},a.prototype.writeIntLE=function(g,b,E,P){if(g=+g,b=b>>>0,!P){var q=Math.pow(2,8*E-1);oe(this,g,b,E,q-1,-q)}var z=0,J=1,le=0;for(this[b]=g&255;++z<E&&(J*=256);)g<0&&le===0&&this[b+z-1]!==0&&(le=1),this[b+z]=(g/J>>0)-le&255;return b+E},a.prototype.writeIntBE=function(g,b,E,P){if(g=+g,b=b>>>0,!P){var q=Math.pow(2,8*E-1);oe(this,g,b,E,q-1,-q)}var z=E-1,J=1,le=0;for(this[b+z]=g&255;--z>=0&&(J*=256);)g<0&&le===0&&this[b+z+1]!==0&&(le=1),this[b+z]=(g/J>>0)-le&255;return b+E},a.prototype.writeInt8=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,1,127,-128),g<0&&(g=255+g+1),this[b]=g&255,b+1},a.prototype.writeInt16LE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,2,32767,-32768),this[b]=g&255,this[b+1]=g>>>8,b+2},a.prototype.writeInt16BE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,2,32767,-32768),this[b]=g>>>8,this[b+1]=g&255,b+2},a.prototype.writeInt32LE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,4,2147483647,-2147483648),this[b]=g&255,this[b+1]=g>>>8,this[b+2]=g>>>16,this[b+3]=g>>>24,b+4},a.prototype.writeInt32BE=function(g,b,E){return g=+g,b=b>>>0,E||oe(this,g,b,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[b]=g>>>24,this[b+1]=g>>>16,this[b+2]=g>>>8,this[b+3]=g&255,b+4};function ae(S,g,b,E,P,q){if(b+E>S.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function be(S,g,b,E,P){return g=+g,b=b>>>0,P||ae(S,g,b,4),n.write(S,g,b,E,23,4),b+4}a.prototype.writeFloatLE=function(g,b,E){return be(this,g,b,!0,E)},a.prototype.writeFloatBE=function(g,b,E){return be(this,g,b,!1,E)};function we(S,g,b,E,P){return g=+g,b=b>>>0,P||ae(S,g,b,8),n.write(S,g,b,E,52,8),b+8}a.prototype.writeDoubleLE=function(g,b,E){return we(this,g,b,!0,E)},a.prototype.writeDoubleBE=function(g,b,E){return we(this,g,b,!1,E)},a.prototype.copy=function(g,b,E,P){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(E||(E=0),!P&&P!==0&&(P=this.length),b>=g.length&&(b=g.length),b||(b=0),P>0&&P<E&&(P=E),P===E||g.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),g.length-b<P-E&&(P=g.length-b+E);var q=P-E;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,E,P):Uint8Array.prototype.set.call(g,this.subarray(E,P),b),q},a.prototype.fill=function(g,b,E,P){if(typeof g=="string"){if(typeof b=="string"?(P=b,b=0,E=this.length):typeof E=="string"&&(P=E,E=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!a.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(g.length===1){var q=g.charCodeAt(0);(P==="utf8"&&q<128||P==="latin1")&&(g=q)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(b<0||this.length<b||this.length<E)throw new RangeError("Out of range index");if(E<=b)return this;b=b>>>0,E=E===void 0?this.length:E>>>0,g||(g=0);var z;if(typeof g=="number")for(z=b;z<E;++z)this[z]=g;else{var J=a.isBuffer(g)?g:a.from(g,P),le=J.length;if(le===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(z=0;z<E-b;++z)this[z+b]=J[z%le]}return this};var Ee=/[^+/0-9A-Za-z-_]/g;function Q(S){if(S=S.split("=")[0],S=S.trim().replace(Ee,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function X(S,g){g=g||1/0;for(var b,E=S.length,P=null,q=[],z=0;z<E;++z){if(b=S.charCodeAt(z),b>55295&&b<57344){if(!P){if(b>56319){(g-=3)>-1&&q.push(239,191,189);continue}else if(z+1===E){(g-=3)>-1&&q.push(239,191,189);continue}P=b;continue}if(b<56320){(g-=3)>-1&&q.push(239,191,189),P=b;continue}b=(P-55296<<10|b-56320)+65536}else P&&(g-=3)>-1&&q.push(239,191,189);if(P=null,b<128){if((g-=1)<0)break;q.push(b)}else if(b<2048){if((g-=2)<0)break;q.push(b>>6|192,b&63|128)}else if(b<65536){if((g-=3)<0)break;q.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((g-=4)<0)break;q.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return q}function K(S){for(var g=[],b=0;b<S.length;++b)g.push(S.charCodeAt(b)&255);return g}function ie(S,g){for(var b,E,P,q=[],z=0;z<S.length&&!((g-=2)<0);++z)b=S.charCodeAt(z),E=b>>8,P=b%256,q.push(P),q.push(E);return q}function fe(S){return t.toByteArray(Q(S))}function F(S,g,b,E){for(var P=0;P<E&&!(P+b>=g.length||P>=S.length);++P)g[P+b]=S[P];return P}function I(S,g){return S instanceof g||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===g.name}function C(S){return S!==S}var $=function(){for(var S="0123456789abcdef",g=new Array(256),b=0;b<16;++b)for(var E=b*16,P=0;P<16;++P)g[E+P]=S[b]+S[P];return g}()}(buffer)),buffer}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(e,t){var n=requireBuffer(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,t=e.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(v){if(!v)return"utf8";for(var A;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(A)return;v=(""+v).toLowerCase(),A=!0}}function r(v){var A=n(v);if(typeof A!="string"&&(e.isEncoding===t||!t(v)))throw new Error("Unknown encoding: "+v);return A||v}string_decoder.StringDecoder=i;function i(v){this.encoding=r(v);var A;switch(this.encoding){case"utf16le":this.text=f,this.end=m,A=4;break;case"utf8":this.fillLast=l,A=4;break;case"base64":this.text=d,this.end=T,A=3;break;default:this.write=_,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(A)}i.prototype.write=function(v){if(v.length===0)return"";var A,B;if(this.lastNeed){if(A=this.fillLast(v),A===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<v.length?A?A+this.text(v,B):this.text(v,B):A||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function s(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function o(v,A,B){var O=A.length-1;if(O<B)return 0;var L=s(A[O]);return L>=0?(L>0&&(v.lastNeed=L-1),L):--O<B||L===-2?0:(L=s(A[O]),L>=0?(L>0&&(v.lastNeed=L-2),L):--O<B||L===-2?0:(L=s(A[O]),L>=0?(L>0&&(L===2?L=0:v.lastNeed=L-3),L):0))}function a(v,A,B){if((A[0]&192)!==128)return v.lastNeed=0,"�";if(v.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return v.lastNeed=1,"�";if(v.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return v.lastNeed=2,"�"}}function l(v){var A=this.lastTotal-this.lastNeed,B=a(this,v);if(B!==void 0)return B;if(this.lastNeed<=v.length)return v.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,A,0,v.length),this.lastNeed-=v.length}function u(v,A){var B=o(this,v,A);if(!this.lastNeed)return v.toString("utf8",A);this.lastTotal=B;var O=v.length-(B-this.lastNeed);return v.copy(this.lastChar,0,O),v.toString("utf8",A,O)}function c(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+"�":A}function f(v,A){if((v.length-A)%2===0){var B=v.toString("utf16le",A);if(B){var O=B.charCodeAt(B.length-1);if(O>=55296&&O<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",A,v.length-1)}function m(v){var A=v&&v.length?this.write(v):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,B)}return A}function d(v,A){var B=(v.length-A)%3;return B===0?v.toString("base64",A):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",A,v.length-B))}function T(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function _(v){return v.toString(this.encoding)}function x(v){return v&&v.length?this.write(v):""}return string_decoder}var from_1,hasRequiredFrom;function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const e=requireBrowser$1(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=requirePrimordials(),{Buffer:i}=requireBuffer$1(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:o}=requireErrors().codes;function a(l,u,c){let f;if(typeof u=="string"||u instanceof i)return new l({objectMode:!0,...c,read(){this.push(u),this.push(null)}});let m;if(u&&u[n])m=!0,f=u[n]();else if(u&&u[r])m=!1,f=u[r]();else throw new s("iterable",["Iterable"],u);const d=new l({objectMode:!0,highWaterMark:1,...c});let T=!1;d._read=function(){T||(T=!0,x())},d._destroy=function(v,A){t(_(v),()=>e.nextTick(A,v),B=>e.nextTick(A,B||v))};async function _(v){const A=v!=null,B=typeof f.throw=="function";if(A&&B){const{value:O,done:L}=await f.throw(v);if(await O,L)return}if(typeof f.return=="function"){const{value:O}=await f.return();await O}}async function x(){for(;;){try{const{value:v,done:A}=m?await f.next():f.next();if(A)d.push(null);else{const B=v&&typeof v.then=="function"?await v:v;if(B===null)throw T=!1,new o;if(d.push(B))continue;T=!1}}catch(v){d.destroy(v)}break}}return d}return from_1=a,from_1}var readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const e=requireBrowser$1(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:a,Promise:l,SafeSet:u,SymbolAsyncDispose:c,SymbolAsyncIterator:f,Symbol:m}=requirePrimordials();readable=z,z.ReadableState=q;const{EventEmitter:d}=requireEvents(),{Stream:T,prependListener:_}=requireLegacy(),{Buffer:x}=requireBuffer$1(),{addAbortSignal:v}=requireAddAbortSignal(),A=requireEndOfStream();let B=requireUtil().debuglog("stream",N=>{B=N});const O=requireBuffer_list(),L=requireDestroy(),{getHighWaterMark:U,getDefaultHighWaterMark:R}=requireState(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:ne,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_OUT_OF_RANGE:G,ERR_STREAM_PUSH_AFTER_EOF:re,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Y},AbortError:ce}=requireErrors(),{validateObject:me}=requireValidators(),de=m("kPaused"),{StringDecoder:ge}=requireString_decoder(),te=requireFrom();a(z.prototype,T.prototype),a(z,T);const ye=()=>{},{errorOrDestroy:H}=L,ee=1,oe=2,ae=4,be=8,we=16,Ee=32,Q=64,X=128,K=256,ie=512,fe=1024,F=2048,I=4096,C=8192,$=16384,S=32768,g=65536,b=1<<17,E=1<<18;function P(N){return{enumerable:!1,get(){return(this.state&N)!==0},set(j){j?this.state|=N:this.state&=~N}}}s(q.prototype,{objectMode:P(ee),ended:P(oe),endEmitted:P(ae),reading:P(be),constructed:P(we),sync:P(Ee),needReadable:P(Q),emittedReadable:P(X),readableListening:P(K),resumeScheduled:P(ie),errorEmitted:P(fe),emitClose:P(F),autoDestroy:P(I),destroyed:P(C),closed:P($),closeEmitted:P(S),multiAwaitDrain:P(g),readingMore:P(b),dataEmitted:P(E)});function q(N,j,he){typeof he!="boolean"&&(he=j instanceof requireDuplex()),this.state=F|I|we|Ee,N&&N.objectMode&&(this.state|=ee),he&&N&&N.readableObjectMode&&(this.state|=ee),this.highWaterMark=N?U(this,N,"readableHighWaterMark",he):R(!1),this.buffer=new O,this.length=0,this.pipes=[],this.flowing=null,this[de]=null,N&&N.emitClose===!1&&(this.state&=~F),N&&N.autoDestroy===!1&&(this.state&=~I),this.errored=null,this.defaultEncoding=N&&N.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,N&&N.encoding&&(this.decoder=new ge(N.encoding),this.encoding=N.encoding)}function z(N){if(!(this instanceof z))return new z(N);const j=this instanceof requireDuplex();this._readableState=new q(N,this,j),N&&(typeof N.read=="function"&&(this._read=N.read),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.construct=="function"&&(this._construct=N.construct),N.signal&&!j&&v(N.signal,this)),T.call(this,N),L.construct(this,()=>{this._readableState.needReadable&&V(this,this._readableState)})}z.prototype.destroy=L.destroy,z.prototype._undestroy=L.undestroy,z.prototype._destroy=function(N,j){j(N)},z.prototype[d.captureRejectionSymbol]=function(N){this.destroy(N)},z.prototype[c]=function(){let N;return this.destroyed||(N=this.readableEnded?null:new ce,this.destroy(N)),new l((j,he)=>A(this,pe=>pe&&pe!==N?he(pe):j(null)))},z.prototype.push=function(N,j){return J(this,N,j,!1)},z.prototype.unshift=function(N,j){return J(this,N,j,!0)};function J(N,j,he,pe){B("readableAddChunk",j);const _e=N._readableState;let ke;if((_e.state&ee)===0&&(typeof j=="string"?(he=he||_e.defaultEncoding,_e.encoding!==he&&(pe&&_e.encoding?j=x.from(j,he).toString(_e.encoding):(j=x.from(j,he),he=""))):j instanceof x?he="":T._isUint8Array(j)?(j=T._uint8ArrayToBuffer(j),he=""):j!=null&&(ke=new ne("chunk",["string","Buffer","Uint8Array"],j))),ke)H(N,ke);else if(j===null)_e.state&=~be,y(N,_e);else if((_e.state&ee)!==0||j&&j.length>0)if(pe)if((_e.state&ae)!==0)H(N,new Y);else{if(_e.destroyed||_e.errored)return!1;le(N,_e,j,!0)}else if(_e.ended)H(N,new re);else{if(_e.destroyed||_e.errored)return!1;_e.state&=~be,_e.decoder&&!he?(j=_e.decoder.write(j),_e.objectMode||j.length!==0?le(N,_e,j,!1):V(N,_e)):le(N,_e,j,!1)}else pe||(_e.state&=~be,V(N,_e));return!_e.ended&&(_e.length<_e.highWaterMark||_e.length===0)}function le(N,j,he,pe){j.flowing&&j.length===0&&!j.sync&&N.listenerCount("data")>0?((j.state&g)!==0?j.awaitDrainWriters.clear():j.awaitDrainWriters=null,j.dataEmitted=!0,N.emit("data",he)):(j.length+=j.objectMode?1:he.length,pe?j.buffer.unshift(he):j.buffer.push(he),(j.state&Q)!==0&&w(N)),V(N,j)}z.prototype.isPaused=function(){const N=this._readableState;return N[de]===!0||N.flowing===!1},z.prototype.setEncoding=function(N){const j=new ge(N);this._readableState.decoder=j,this._readableState.encoding=this._readableState.decoder.encoding;const he=this._readableState.buffer;let pe="";for(const _e of he)pe+=j.write(_e);return he.clear(),pe!==""&&he.push(pe),this._readableState.length=pe.length,this};const ue=1073741824;function Te(N){if(N>ue)throw new G("size","<= 1GiB",N);return N--,N|=N>>>1,N|=N>>>2,N|=N>>>4,N|=N>>>8,N|=N>>>16,N++,N}function k(N,j){return N<=0||j.length===0&&j.ended?0:(j.state&ee)!==0?1:r(N)?j.flowing&&j.length?j.buffer.first().length:j.length:N<=j.length?N:j.ended?j.length:0}z.prototype.read=function(N){B("read",N),N===void 0?N=NaN:n(N)||(N=i(N,10));const j=this._readableState,he=N;if(N>j.highWaterMark&&(j.highWaterMark=Te(N)),N!==0&&(j.state&=~X),N===0&&j.needReadable&&((j.highWaterMark!==0?j.length>=j.highWaterMark:j.length>0)||j.ended))return B("read: emitReadable",j.length,j.ended),j.length===0&&j.ended?qe(this):w(this),null;if(N=k(N,j),N===0&&j.ended)return j.length===0&&qe(this),null;let pe=(j.state&Q)!==0;if(B("need readable",pe),(j.length===0||j.length-N<j.highWaterMark)&&(pe=!0,B("length less than watermark",pe)),j.ended||j.reading||j.destroyed||j.errored||!j.constructed)pe=!1,B("reading, ended or constructing",pe);else if(pe){B("do read"),j.state|=be|Ee,j.length===0&&(j.state|=Q);try{this._read(j.highWaterMark)}catch(ke){H(this,ke)}j.state&=~Ee,j.reading||(N=k(he,j))}let _e;return N>0?_e=Ke(N,j):_e=null,_e===null?(j.needReadable=j.length<=j.highWaterMark,N=0):(j.length-=N,j.multiAwaitDrain?j.awaitDrainWriters.clear():j.awaitDrainWriters=null),j.length===0&&(j.ended||(j.needReadable=!0),he!==N&&j.ended&&qe(this)),_e!==null&&!j.errorEmitted&&!j.closeEmitted&&(j.dataEmitted=!0,this.emit("data",_e)),_e};function y(N,j){if(B("onEofChunk"),!j.ended){if(j.decoder){const he=j.decoder.end();he&&he.length&&(j.buffer.push(he),j.length+=j.objectMode?1:he.length)}j.ended=!0,j.sync?w(N):(j.needReadable=!1,j.emittedReadable=!0,D(N))}}function w(N){const j=N._readableState;B("emitReadable",j.needReadable,j.emittedReadable),j.needReadable=!1,j.emittedReadable||(B("emitReadable",j.flowing),j.emittedReadable=!0,e.nextTick(D,N))}function D(N){const j=N._readableState;B("emitReadable_",j.destroyed,j.length,j.ended),!j.destroyed&&!j.errored&&(j.length||j.ended)&&(N.emit("readable"),j.emittedReadable=!1),j.needReadable=!j.flowing&&!j.ended&&j.length<=j.highWaterMark,Ie(N)}function V(N,j){!j.readingMore&&j.constructed&&(j.readingMore=!0,e.nextTick(Z,N,j))}function Z(N,j){for(;!j.reading&&!j.ended&&(j.length<j.highWaterMark||j.flowing&&j.length===0);){const he=j.length;if(B("maybeReadMore read 0"),N.read(0),he===j.length)break}j.readingMore=!1}z.prototype._read=function(N){throw new W("_read()")},z.prototype.pipe=function(N,j){const he=this,pe=this._readableState;pe.pipes.length===1&&(pe.multiAwaitDrain||(pe.multiAwaitDrain=!0,pe.awaitDrainWriters=new u(pe.awaitDrainWriters?[pe.awaitDrainWriters]:[]))),pe.pipes.push(N),B("pipe count=%d opts=%j",pe.pipes.length,j);const ke=(!j||j.end!==!1)&&N!==e.stdout&&N!==e.stderr?Je:Oe;pe.endEmitted?e.nextTick(ke):he.once("end",ke),N.on("unpipe",Ae);function Ae(De,Pe){B("onunpipe"),De===he&&Pe&&Pe.hasUnpiped===!1&&(Pe.hasUnpiped=!0,lt())}function Je(){B("onend"),N.end()}let Fe,Ze=!1;function lt(){B("cleanup"),N.removeListener("close",$e),N.removeListener("finish",je),Fe&&N.removeListener("drain",Fe),N.removeListener("error",ze),N.removeListener("unpipe",Ae),he.removeListener("end",Je),he.removeListener("end",Oe),he.removeListener("data",et),Ze=!0,Fe&&pe.awaitDrainWriters&&(!N._writableState||N._writableState.needDrain)&&Fe()}function Qe(){Ze||(pe.pipes.length===1&&pe.pipes[0]===N?(B("false write response, pause",0),pe.awaitDrainWriters=N,pe.multiAwaitDrain=!1):pe.pipes.length>1&&pe.pipes.includes(N)&&(B("false write response, pause",pe.awaitDrainWriters.size),pe.awaitDrainWriters.add(N)),he.pause()),Fe||(Fe=se(he,N),N.on("drain",Fe))}he.on("data",et);function et(De){B("ondata");const Pe=N.write(De);B("dest.write",Pe),Pe===!1&&Qe()}function ze(De){if(B("onerror",De),Oe(),N.removeListener("error",ze),N.listenerCount("error")===0){const Pe=N._writableState||N._readableState;Pe&&!Pe.errorEmitted?H(N,De):N.emit("error",De)}}_(N,"error",ze);function $e(){N.removeListener("finish",je),Oe()}N.once("close",$e);function je(){B("onfinish"),N.removeListener("close",$e),Oe()}N.once("finish",je);function Oe(){B("unpipe"),he.unpipe(N)}return N.emit("pipe",he),N.writableNeedDrain===!0?Qe():pe.flowing||(B("pipe resume"),he.resume()),N};function se(N,j){return function(){const pe=N._readableState;pe.awaitDrainWriters===j?(B("pipeOnDrain",1),pe.awaitDrainWriters=null):pe.multiAwaitDrain&&(B("pipeOnDrain",pe.awaitDrainWriters.size),pe.awaitDrainWriters.delete(j)),(!pe.awaitDrainWriters||pe.awaitDrainWriters.size===0)&&N.listenerCount("data")&&N.resume()}}z.prototype.unpipe=function(N){const j=this._readableState,he={hasUnpiped:!1};if(j.pipes.length===0)return this;if(!N){const _e=j.pipes;j.pipes=[],this.pause();for(let ke=0;ke<_e.length;ke++)_e[ke].emit("unpipe",this,{hasUnpiped:!1});return this}const pe=t(j.pipes,N);return pe===-1?this:(j.pipes.splice(pe,1),j.pipes.length===0&&this.pause(),N.emit("unpipe",this,he),this)},z.prototype.on=function(N,j){const he=T.prototype.on.call(this,N,j),pe=this._readableState;return N==="data"?(pe.readableListening=this.listenerCount("readable")>0,pe.flowing!==!1&&this.resume()):N==="readable"&&!pe.endEmitted&&!pe.readableListening&&(pe.readableListening=pe.needReadable=!0,pe.flowing=!1,pe.emittedReadable=!1,B("on readable",pe.length,pe.reading),pe.length?w(this):pe.reading||e.nextTick(Se,this)),he},z.prototype.addListener=z.prototype.on,z.prototype.removeListener=function(N,j){const he=T.prototype.removeListener.call(this,N,j);return N==="readable"&&e.nextTick(ve,this),he},z.prototype.off=z.prototype.removeListener,z.prototype.removeAllListeners=function(N){const j=T.prototype.removeAllListeners.apply(this,arguments);return(N==="readable"||N===void 0)&&e.nextTick(ve,this),j};function ve(N){const j=N._readableState;j.readableListening=N.listenerCount("readable")>0,j.resumeScheduled&&j[de]===!1?j.flowing=!0:N.listenerCount("data")>0?N.resume():j.readableListening||(j.flowing=null)}function Se(N){B("readable nexttick read 0"),N.read(0)}z.prototype.resume=function(){const N=this._readableState;return N.flowing||(B("resume"),N.flowing=!N.readableListening,xe(this,N)),N[de]=!1,this};function xe(N,j){j.resumeScheduled||(j.resumeScheduled=!0,e.nextTick(Re,N,j))}function Re(N,j){B("resume",j.reading),j.reading||N.read(0),j.resumeScheduled=!1,N.emit("resume"),Ie(N),j.flowing&&!j.reading&&N.read(0)}z.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[de]=!0,this};function Ie(N){const j=N._readableState;for(B("flow",j.flowing);j.flowing&&N.read()!==null;);}z.prototype.wrap=function(N){let j=!1;N.on("data",pe=>{!this.push(pe)&&N.pause&&(j=!0,N.pause())}),N.on("end",()=>{this.push(null)}),N.on("error",pe=>{H(this,pe)}),N.on("close",()=>{this.destroy()}),N.on("destroy",()=>{this.destroy()}),this._read=()=>{j&&N.resume&&(j=!1,N.resume())};const he=o(N);for(let pe=1;pe<he.length;pe++){const _e=he[pe];this[_e]===void 0&&typeof N[_e]=="function"&&(this[_e]=N[_e].bind(N))}return this},z.prototype[f]=function(){return Xe(this)},z.prototype.iterator=function(N){return N!==void 0&&me(N,"options"),Xe(this,N)};function Xe(N,j){typeof N.read!="function"&&(N=z.wrap(N,{objectMode:!0}));const he=at(N,j);return he.stream=N,he}async function*at(N,j){let he=ye;function pe(Ae){this===N?(he(),he=ye):he=Ae}N.on("readable",pe);let _e;const ke=A(N,{writable:!1},Ae=>{_e=Ae?M(_e,Ae):null,he(),he=ye});try{for(;;){const Ae=N.destroyed?null:N.read();if(Ae!==null)yield Ae;else{if(_e)throw _e;if(_e===null)return;await new l(pe)}}}catch(Ae){throw _e=M(_e,Ae),_e}finally{(_e||(j==null?void 0:j.destroyOnReturn)!==!1)&&(_e===void 0||N._readableState.autoDestroy)?L.destroyer(N,null):(N.off("readable",pe),ke())}}s(z.prototype,{readable:{__proto__:null,get(){const N=this._readableState;return!!N&&N.readable!==!1&&!N.destroyed&&!N.errorEmitted&&!N.endEmitted},set(N){this._readableState&&(this._readableState.readable=!!N)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(N){this._readableState&&(this._readableState.flowing=N)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(N){this._readableState&&(this._readableState.destroyed=N)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[de]!==!1},set(N){this[de]=!!N}}}),z._fromList=Ke;function Ke(N,j){if(j.length===0)return null;let he;return j.objectMode?he=j.buffer.shift():!N||N>=j.length?(j.decoder?he=j.buffer.join(""):j.buffer.length===1?he=j.buffer.first():he=j.buffer.concat(j.length),j.buffer.clear()):he=j.buffer.consume(N,j.decoder),he}function qe(N){const j=N._readableState;B("endReadable",j.endEmitted),j.endEmitted||(j.ended=!0,e.nextTick(st,j,N))}function st(N,j){if(B("endReadableNT",N.endEmitted,N.length),!N.errored&&!N.closeEmitted&&!N.endEmitted&&N.length===0){if(N.endEmitted=!0,j.emit("end"),j.writable&&j.allowHalfOpen===!1)e.nextTick(ot,j);else if(N.autoDestroy){const he=j._writableState;(!he||he.autoDestroy&&(he.finished||he.writable===!1))&&j.destroy()}}}function ot(N){N.writable&&!N.writableEnded&&!N.destroyed&&N.end()}z.from=function(N,j){return te(z,N,j)};let Ue;function Ye(){return Ue===void 0&&(Ue={}),Ue}return z.fromWeb=function(N,j){return Ye().newStreamReadableFromReadableStream(N,j)},z.toWeb=function(N,j){return Ye().newReadableStreamFromStreamReadable(N,j)},z.wrap=function(N,j){var he,pe;return new z({objectMode:(he=(pe=N.readableObjectMode)!==null&&pe!==void 0?pe:N.objectMode)!==null&&he!==void 0?he:!0,...j,destroy(_e,ke){L.destroyer(N,_e),ke(_e)}}).wrap(N)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const e=requireBrowser$1(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:a,Symbol:l,SymbolHasInstance:u}=requirePrimordials();writable=me,me.WritableState=Y;const{EventEmitter:c}=requireEvents(),f=requireLegacy().Stream,{Buffer:m}=requireBuffer$1(),d=requireDestroy(),{addAbortSignal:T}=requireAddAbortSignal(),{getHighWaterMark:_,getDefaultHighWaterMark:x}=requireState(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:B,ERR_STREAM_CANNOT_PIPE:O,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:U,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:ne}=requireErrors().codes,{errorOrDestroy:W}=d;o(me.prototype,f.prototype),o(me,f);function G(){}const re=l("kOnFinished");function Y(I,C,$){typeof $!="boolean"&&($=C instanceof requireDuplex()),this.objectMode=!!(I&&I.objectMode),$&&(this.objectMode=this.objectMode||!!(I&&I.writableObjectMode)),this.highWaterMark=I?_(this,I,"writableHighWaterMark",$):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const S=!!(I&&I.decodeStrings===!1);this.decodeStrings=!S,this.defaultEncoding=I&&I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=H.bind(void 0,C),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ce(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!I||I.emitClose!==!1,this.autoDestroy=!I||I.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[re]=[]}function ce(I){I.buffered=[],I.bufferedIndex=0,I.allBuffers=!0,I.allNoop=!0}Y.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(Y.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function me(I){const C=this instanceof requireDuplex();if(!C&&!r(me,this))return new me(I);this._writableState=new Y(I,this,C),I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final),typeof I.construct=="function"&&(this._construct=I.construct),I.signal&&T(I.signal,this)),f.call(this,I),d.construct(this,()=>{const $=this._writableState;$.writing||be(this,$),X(this,$)})}i(me,u,{__proto__:null,value:function(I){return r(this,I)?!0:this!==me?!1:I&&I._writableState instanceof Y}}),me.prototype.pipe=function(){W(this,new O)};function de(I,C,$,S){const g=I._writableState;if(typeof $=="function")S=$,$=g.defaultEncoding;else{if(!$)$=g.defaultEncoding;else if($!=="buffer"&&!m.isEncoding($))throw new ne($);typeof S!="function"&&(S=G)}if(C===null)throw new R;if(!g.objectMode)if(typeof C=="string")g.decodeStrings!==!1&&(C=m.from(C,$),$="buffer");else if(C instanceof m)$="buffer";else if(f._isUint8Array(C))C=f._uint8ArrayToBuffer(C),$="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],C);let b;return g.ending?b=new M:g.destroyed&&(b=new L("write")),b?(e.nextTick(S,b),W(I,b,!0),b):(g.pendingcb++,ge(I,g,C,$,S))}me.prototype.write=function(I,C,$){return de(this,I,C,$)===!0},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){const I=this._writableState;I.corked&&(I.corked--,I.writing||be(this,I))},me.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=a(C)),!m.isEncoding(C))throw new ne(C);return this._writableState.defaultEncoding=C,this};function ge(I,C,$,S,g){const b=C.objectMode?1:$.length;C.length+=b;const E=C.length<C.highWaterMark;return E||(C.needDrain=!0),C.writing||C.corked||C.errored||!C.constructed?(C.buffered.push({chunk:$,encoding:S,callback:g}),C.allBuffers&&S!=="buffer"&&(C.allBuffers=!1),C.allNoop&&g!==G&&(C.allNoop=!1)):(C.writelen=b,C.writecb=g,C.writing=!0,C.sync=!0,I._write($,S,C.onwrite),C.sync=!1),E&&!C.errored&&!C.destroyed}function te(I,C,$,S,g,b,E){C.writelen=S,C.writecb=E,C.writing=!0,C.sync=!0,C.destroyed?C.onwrite(new L("write")):$?I._writev(g,C.onwrite):I._write(g,b,C.onwrite),C.sync=!1}function ye(I,C,$,S){--C.pendingcb,S($),ae(C),W(I,$)}function H(I,C){const $=I._writableState,S=$.sync,g=$.writecb;if(typeof g!="function"){W(I,new B);return}$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0,C?(C.stack,$.errored||($.errored=C),I._readableState&&!I._readableState.errored&&(I._readableState.errored=C),S?e.nextTick(ye,I,$,C,g):ye(I,$,C,g)):($.buffered.length>$.bufferedIndex&&be(I,$),S?$.afterWriteTickInfo!==null&&$.afterWriteTickInfo.cb===g?$.afterWriteTickInfo.count++:($.afterWriteTickInfo={count:1,cb:g,stream:I,state:$},e.nextTick(ee,$.afterWriteTickInfo)):oe(I,$,1,g))}function ee({stream:I,state:C,count:$,cb:S}){return C.afterWriteTickInfo=null,oe(I,C,$,S)}function oe(I,C,$,S){for(!C.ending&&!I.destroyed&&C.length===0&&C.needDrain&&(C.needDrain=!1,I.emit("drain"));$-- >0;)C.pendingcb--,S();C.destroyed&&ae(C),X(I,C)}function ae(I){if(I.writing)return;for(let g=I.bufferedIndex;g<I.buffered.length;++g){var C;const{chunk:b,callback:E}=I.buffered[g],P=I.objectMode?1:b.length;I.length-=P,E((C=I.errored)!==null&&C!==void 0?C:new L("write"))}const $=I[re].splice(0);for(let g=0;g<$.length;g++){var S;$[g]((S=I.errored)!==null&&S!==void 0?S:new L("end"))}ce(I)}function be(I,C){if(C.corked||C.bufferProcessing||C.destroyed||!C.constructed)return;const{buffered:$,bufferedIndex:S,objectMode:g}=C,b=$.length-S;if(!b)return;let E=S;if(C.bufferProcessing=!0,b>1&&I._writev){C.pendingcb-=b-1;const P=C.allNoop?G:z=>{for(let J=E;J<$.length;++J)$[J].callback(z)},q=C.allNoop&&E===0?$:t($,E);q.allBuffers=C.allBuffers,te(I,C,!0,C.length,q,"",P),ce(C)}else{do{const{chunk:P,encoding:q,callback:z}=$[E];$[E++]=null;const J=g?1:P.length;te(I,C,!1,J,P,q,z)}while(E<$.length&&!C.writing);E===$.length?ce(C):E>256?($.splice(0,E),C.bufferedIndex=0):C.bufferedIndex=E}C.bufferProcessing=!1}me.prototype._write=function(I,C,$){if(this._writev)this._writev([{chunk:I,encoding:C}],$);else throw new A("_write()")},me.prototype._writev=null,me.prototype.end=function(I,C,$){const S=this._writableState;typeof I=="function"?($=I,I=null,C=null):typeof C=="function"&&($=C,C=null);let g;if(I!=null){const b=de(this,I,C);b instanceof n&&(g=b)}return S.corked&&(S.corked=1,this.uncork()),g||(!S.errored&&!S.ending?(S.ending=!0,X(this,S,!0),S.ended=!0):S.finished?g=new U("end"):S.destroyed&&(g=new L("end"))),typeof $=="function"&&(g||S.finished?e.nextTick($,g):S[re].push($)),this};function we(I){return I.ending&&!I.destroyed&&I.constructed&&I.length===0&&!I.errored&&I.buffered.length===0&&!I.finished&&!I.writing&&!I.errorEmitted&&!I.closeEmitted}function Ee(I,C){let $=!1;function S(g){if($){W(I,g??B());return}if($=!0,C.pendingcb--,g){const b=C[re].splice(0);for(let E=0;E<b.length;E++)b[E](g);W(I,g,C.sync)}else we(C)&&(C.prefinished=!0,I.emit("prefinish"),C.pendingcb++,e.nextTick(K,I,C))}C.sync=!0,C.pendingcb++;try{I._final(S)}catch(g){S(g)}C.sync=!1}function Q(I,C){!C.prefinished&&!C.finalCalled&&(typeof I._final=="function"&&!C.destroyed?(C.finalCalled=!0,Ee(I,C)):(C.prefinished=!0,I.emit("prefinish")))}function X(I,C,$){we(C)&&(Q(I,C),C.pendingcb===0&&($?(C.pendingcb++,e.nextTick((S,g)=>{we(g)?K(S,g):g.pendingcb--},I,C)):we(C)&&(C.pendingcb++,K(I,C))))}function K(I,C){C.pendingcb--,C.finished=!0;const $=C[re].splice(0);for(let S=0;S<$.length;S++)$[S]();if(I.emit("finish"),C.autoDestroy){const S=I._readableState;(!S||S.autoDestroy&&(S.endEmitted||S.readable===!1))&&I.destroy()}}s(me.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(I){this._writableState&&(this._writableState.destroyed=I)}},writable:{__proto__:null,get(){const I=this._writableState;return!!I&&I.writable!==!1&&!I.destroyed&&!I.errored&&!I.ending&&!I.ended},set(I){this._writableState&&(this._writableState.writable=!!I)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const I=this._writableState;return I?!I.destroyed&&!I.ending&&I.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ie=d.destroy;me.prototype.destroy=function(I,C){const $=this._writableState;return!$.destroyed&&($.bufferedIndex<$.buffered.length||$[re].length)&&e.nextTick(ae,$),ie.call(this,I,C),this},me.prototype._undestroy=d.undestroy,me.prototype._destroy=function(I,C){C(I)},me.prototype[c.captureRejectionSymbol]=function(I){this.destroy(I)};let fe;function F(){return fe===void 0&&(fe={}),fe}return me.fromWeb=function(I,C){return F().newStreamWritableFromWritableStream(I,C)},me.toWeb=function(I){return F().newWritableStreamFromStreamWritable(I)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const e=requireBrowser$1(),t=requireBuffer$1(),{isReadable:n,isWritable:r,isIterable:i,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:a,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:c}=requireUtils(),f=requireEndOfStream(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:T}}=requireErrors(),{destroyer:_}=requireDestroy(),x=requireDuplex(),v=requireReadable(),A=requireWritable(),{createDeferredPromise:B}=requireUtil(),O=requireFrom(),L=globalThis.Blob||t.Blob,U=typeof L<"u"?function(Y){return Y instanceof L}:function(Y){return!1},R=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:M}=requirePrimordials();class ne extends x{constructor(Y){super(Y),(Y==null?void 0:Y.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Y==null?void 0:Y.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function re(Y,ce){if(l(Y))return Y;if(o(Y))return G({readable:Y});if(a(Y))return G({writable:Y});if(s(Y))return G({writable:!1,readable:!1});if(u(Y))return G({readable:v.fromWeb(Y)});if(c(Y))return G({writable:A.fromWeb(Y)});if(typeof Y=="function"){const{value:de,write:ge,final:te,destroy:ye}=W(Y);if(i(de))return O(ne,de,{objectMode:!0,write:ge,final:te,destroy:ye});const H=de==null?void 0:de.then;if(typeof H=="function"){let ee;const oe=M(H,de,ae=>{if(ae!=null)throw new T("nully","body",ae)},ae=>{_(ee,ae)});return ee=new ne({objectMode:!0,readable:!1,write:ge,final(ae){te(async()=>{try{await oe,e.nextTick(ae,null)}catch(be){e.nextTick(ae,be)}})},destroy:ye})}throw new T("Iterable, AsyncIterable or AsyncFunction",ce,de)}if(U(Y))return re(Y.arrayBuffer());if(i(Y))return O(ne,Y,{objectMode:!0,writable:!1});if(u(Y==null?void 0:Y.readable)&&c(Y==null?void 0:Y.writable))return ne.fromWeb(Y);if(typeof(Y==null?void 0:Y.writable)=="object"||typeof(Y==null?void 0:Y.readable)=="object"){const de=Y!=null&&Y.readable?o(Y==null?void 0:Y.readable)?Y==null?void 0:Y.readable:re(Y.readable):void 0,ge=Y!=null&&Y.writable?a(Y==null?void 0:Y.writable)?Y==null?void 0:Y.writable:re(Y.writable):void 0;return G({readable:de,writable:ge})}const me=Y==null?void 0:Y.then;if(typeof me=="function"){let de;return M(me,Y,ge=>{ge!=null&&de.push(ge),de.push(null)},ge=>{_(de,ge)}),de=new ne({objectMode:!0,writable:!1,read(){}})}throw new d(ce,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Y)};function W(re){let{promise:Y,resolve:ce}=B();const me=new R,de=me.signal;return{value:re(async function*(){for(;;){const te=Y;Y=null;const{chunk:ye,done:H,cb:ee}=await te;if(e.nextTick(ee),H)return;if(de.aborted)throw new m(void 0,{cause:de.reason});({promise:Y,resolve:ce}=B()),yield ye}}(),{signal:de}),write(te,ye,H){const ee=ce;ce=null,ee({chunk:te,done:!1,cb:H})},final(te){const ye=ce;ce=null,ye({done:!0,cb:te})},destroy(te,ye){me.abort(),ye(te)}}}function G(re){const Y=re.readable&&typeof re.readable.read!="function"?v.wrap(re.readable):re.readable,ce=re.writable;let me=!!n(Y),de=!!r(ce),ge,te,ye,H,ee;function oe(ae){const be=H;H=null,be?be(ae):ae&&ee.destroy(ae)}return ee=new ne({readableObjectMode:!!(Y!=null&&Y.readableObjectMode),writableObjectMode:!!(ce!=null&&ce.writableObjectMode),readable:me,writable:de}),de&&(f(ce,ae=>{de=!1,ae&&_(Y,ae),oe(ae)}),ee._write=function(ae,be,we){ce.write(ae,be)?we():ge=we},ee._final=function(ae){ce.end(),te=ae},ce.on("drain",function(){if(ge){const ae=ge;ge=null,ae()}}),ce.on("finish",function(){if(te){const ae=te;te=null,ae()}})),me&&(f(Y,ae=>{me=!1,ae&&_(Y,ae),oe(ae)}),Y.on("readable",function(){if(ye){const ae=ye;ye=null,ae()}}),Y.on("end",function(){ee.push(null)}),ee._read=function(){for(;;){const ae=Y.read();if(ae===null){ye=ee._read;return}if(!ee.push(ae))return}}),ee._destroy=function(ae,be){!ae&&H!==null&&(ae=new m),ye=null,ge=null,te=null,H===null?be(ae):(H=be,_(ce,ae),_(Y,ae))},ee}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=requirePrimordials();duplex=o;const i=requireReadable(),s=requireWritable();r(o.prototype,i.prototype),r(o,i);{const c=n(s.prototype);for(let f=0;f<c.length;f++){const m=c[f];o.prototype[m]||(o.prototype[m]=s.prototype[m])}}function o(c){if(!(this instanceof o))return new o(c);i.call(this,c),s.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(s.prototype,"writableLength")},writableFinished:{__proto__:null,...t(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let a;function l(){return a===void 0&&(a={}),a}o.fromWeb=function(c,f){return l().newStreamDuplexFromReadableWritablePair(c,f)},o.toWeb=function(c){return l().newReadableWritablePairFromDuplex(c)};let u;return o.from=function(c){return u||(u=requireDuplexify()),u(c,"body")},duplex}var transform,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:e,Symbol:t}=requirePrimordials();transform=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=requireErrors().codes,r=requireDuplex(),{getHighWaterMark:i}=requireState();e(o.prototype,r.prototype),e(o,r);const s=t("kCallback");function o(u){if(!(this instanceof o))return new o(u);const c=u?i(this,u,"readableHighWaterMark",!0):null;c===0&&(u={...u,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[s]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function a(u){typeof this._flush=="function"&&!this.destroyed?this._flush((c,f)=>{if(c){u?u(c):this.destroy(c);return}f!=null&&this.push(f),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==a&&a.call(this)}return o.prototype._final=a,o.prototype._transform=function(u,c,f){throw new n("_transform()")},o.prototype._write=function(u,c,f){const m=this._readableState,d=this._writableState,T=m.length;this._transform(u,c,(_,x)=>{if(_){f(_);return}x!=null&&this.push(x),d.ended||T===m.length||m.length<m.highWaterMark?f():this[s]=f})},o.prototype._read=function(){if(this[s]){const u=this[s];this[s]=null,u()}},transform}var passthrough,hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:e}=requirePrimordials();passthrough=n;const t=requireTransform();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,i,s){s(null,r)},passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const e=requireBrowser$1(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:i}=requirePrimordials(),s=requireEndOfStream(),{once:o}=requireUtil(),a=requireDestroy(),l=requireDuplex(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:d,ERR_STREAM_PREMATURE_CLOSE:T},AbortError:_}=requireErrors(),{validateFunction:x,validateAbortSignal:v}=requireValidators(),{isIterable:A,isReadable:B,isReadableNodeStream:O,isNodeStream:L,isTransformStream:U,isWebStream:R,isReadableStream:M,isReadableFinished:ne}=requireUtils(),W=globalThis.AbortController||requireBrowser$2().AbortController;let G,re,Y;function ce(ae,be,we){let Ee=!1;ae.on("close",()=>{Ee=!0});const Q=s(ae,{readable:be,writable:we},X=>{Ee=!X});return{destroy:X=>{Ee||(Ee=!0,a.destroyer(ae,X||new d("pipe")))},cleanup:Q}}function me(ae){return x(ae[ae.length-1],"streams[stream.length - 1]"),ae.pop()}function de(ae){if(A(ae))return ae;if(O(ae))return ge(ae);throw new c("val",["Readable","Iterable","AsyncIterable"],ae)}async function*ge(ae){re||(re=requireReadable()),yield*re.prototype[r].call(ae)}async function te(ae,be,we,{end:Ee}){let Q,X=null;const K=F=>{if(F&&(Q=F),X){const I=X;X=null,I()}},ie=()=>new n((F,I)=>{Q?I(Q):X=()=>{Q?I(Q):F()}});be.on("drain",K);const fe=s(be,{readable:!1},K);try{be.writableNeedDrain&&await ie();for await(const F of ae)be.write(F)||await ie();Ee&&(be.end(),await ie()),we()}catch(F){we(Q!==F?u(Q,F):F)}finally{fe(),be.off("drain",K)}}async function ye(ae,be,we,{end:Ee}){U(be)&&(be=be.writable);const Q=be.getWriter();try{for await(const X of ae)await Q.ready,Q.write(X).catch(()=>{});await Q.ready,Ee&&await Q.close(),we()}catch(X){try{await Q.abort(X),we(X)}catch(K){we(K)}}}function H(...ae){return ee(ae,o(me(ae)))}function ee(ae,be,we){if(ae.length===1&&t(ae[0])&&(ae=ae[0]),ae.length<2)throw new m("streams");const Ee=new W,Q=Ee.signal,X=we==null?void 0:we.signal,K=[];v(X,"options.signal");function ie(){g(new _)}Y=Y||requireUtil().addAbortListener;let fe;X&&(fe=Y(X,ie));let F,I;const C=[];let $=0;function S(z){g(z,--$===0)}function g(z,J){var le;if(z&&(!F||F.code==="ERR_STREAM_PREMATURE_CLOSE")&&(F=z),!(!F&&!J)){for(;C.length;)C.shift()(F);(le=fe)===null||le===void 0||le[i](),Ee.abort(),J&&(F||K.forEach(ue=>ue()),e.nextTick(be,F,I))}}let b;for(let z=0;z<ae.length;z++){const J=ae[z],le=z<ae.length-1,ue=z>0,Te=le||(we==null?void 0:we.end)!==!1,k=z===ae.length-1;if(L(J)){let y=function(w){w&&w.name!=="AbortError"&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"&&S(w)};var q=y;if(Te){const{destroy:w,cleanup:D}=ce(J,le,ue);C.push(w),B(J)&&k&&K.push(D)}J.on("error",y),B(J)&&k&&K.push(()=>{J.removeListener("error",y)})}if(z===0)if(typeof J=="function"){if(b=J({signal:Q}),!A(b))throw new f("Iterable, AsyncIterable or Stream","source",b)}else A(J)||O(J)||U(J)?b=J:b=l.from(J);else if(typeof J=="function"){if(U(b)){var E;b=de((E=b)===null||E===void 0?void 0:E.readable)}else b=de(b);if(b=J(b,{signal:Q}),le){if(!A(b,!0))throw new f("AsyncIterable",`transform[${z-1}]`,b)}else{var P;G||(G=requirePassthrough());const y=new G({objectMode:!0}),w=(P=b)===null||P===void 0?void 0:P.then;if(typeof w=="function")$++,w.call(b,Z=>{I=Z,Z!=null&&y.write(Z),Te&&y.end(),e.nextTick(S)},Z=>{y.destroy(Z),e.nextTick(S,Z)});else if(A(b,!0))$++,te(b,y,S,{end:Te});else if(M(b)||U(b)){const Z=b.readable||b;$++,te(Z,y,S,{end:Te})}else throw new f("AsyncIterable or Promise","destination",b);b=y;const{destroy:D,cleanup:V}=ce(b,!1,!0);C.push(D),k&&K.push(V)}}else if(L(J)){if(O(b)){$+=2;const y=oe(b,J,S,{end:Te});B(J)&&k&&K.push(y)}else if(U(b)||M(b)){const y=b.readable||b;$++,te(y,J,S,{end:Te})}else if(A(b))$++,te(b,J,S,{end:Te});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=J}else if(R(J)){if(O(b))$++,ye(de(b),J,S,{end:Te});else if(M(b)||A(b))$++,ye(b,J,S,{end:Te});else if(U(b))$++,ye(b.readable,J,S,{end:Te});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=J}else b=l.from(J)}return(Q!=null&&Q.aborted||X!=null&&X.aborted)&&e.nextTick(ie),b}function oe(ae,be,we,{end:Ee}){let Q=!1;if(be.on("close",()=>{Q||we(new T)}),ae.pipe(be,{end:!1}),Ee){let K=function(){Q=!0,be.end()};var X=K;ne(ae)?e.nextTick(K):ae.once("end",K)}else we();return s(ae,{readable:!0,writable:!1},K=>{const ie=ae._readableState;K&&K.code==="ERR_STREAM_PREMATURE_CLOSE"&&ie&&ie.ended&&!ie.errored&&!ie.errorEmitted?ae.once("end",we).once("error",we):we(K)}),s(be,{readable:!1,writable:!0},we)}return pipeline_1={pipelineImpl:ee,pipeline:H},pipeline_1}var compose,hasRequiredCompose;function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:e}=requirePipeline(),t=requireDuplex(),{destroyer:n}=requireDestroy(),{isNodeStream:r,isReadable:i,isWritable:s,isWebStream:o,isTransformStream:a,isWritableStream:l,isReadableStream:u}=requireUtils(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:m}}=requireErrors(),d=requireEndOfStream();return compose=function(..._){if(_.length===0)throw new m("streams");if(_.length===1)return t.from(_[0]);const x=[..._];if(typeof _[0]=="function"&&(_[0]=t.from(_[0])),typeof _[_.length-1]=="function"){const G=_.length-1;_[G]=t.from(_[G])}for(let G=0;G<_.length;++G)if(!(!r(_[G])&&!o(_[G]))){if(G<_.length-1&&!(i(_[G])||u(_[G])||a(_[G])))throw new f(`streams[${G}]`,x[G],"must be readable");if(G>0&&!(s(_[G])||l(_[G])||a(_[G])))throw new f(`streams[${G}]`,x[G],"must be writable")}let v,A,B,O,L;function U(G){const re=O;O=null,re?re(G):G?L.destroy(G):!W&&!ne&&L.destroy()}const R=_[0],M=e(_,U),ne=!!(s(R)||l(R)||a(R)),W=!!(i(M)||u(M)||a(M));if(L=new t({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(M!=null&&M.readableObjectMode),writable:ne,readable:W}),ne){if(r(R))L._write=function(re,Y,ce){R.write(re,Y)?ce():v=ce},L._final=function(re){R.end(),A=re},R.on("drain",function(){if(v){const re=v;v=null,re()}});else if(o(R)){const Y=(a(R)?R.writable:R).getWriter();L._write=async function(ce,me,de){try{await Y.ready,Y.write(ce).catch(()=>{}),de()}catch(ge){de(ge)}},L._final=async function(ce){try{await Y.ready,Y.close().catch(()=>{}),A=ce}catch(me){ce(me)}}}const G=a(M)?M.readable:M;d(G,()=>{if(A){const re=A;A=null,re()}})}if(W){if(r(M))M.on("readable",function(){if(B){const G=B;B=null,G()}}),M.on("end",function(){L.push(null)}),L._read=function(){for(;;){const G=M.read();if(G===null){B=L._read;return}if(!L.push(G))return}};else if(o(M)){const re=(a(M)?M.readable:M).getReader();L._read=async function(){for(;;)try{const{value:Y,done:ce}=await re.read();if(!L.push(Y))return;if(ce){L.push(null);return}}catch{return}}}}return L._destroy=function(G,re){!G&&O!==null&&(G=new c),B=null,v=null,A=null,O===null?re(G):(O=re,r(M)&&n(M,G))},L},compose}var hasRequiredOperators;function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const e=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:s}=requireErrors(),{validateAbortSignal:o,validateInteger:a,validateObject:l}=requireValidators(),u=requirePrimordials().Symbol("kWeak"),c=requirePrimordials().Symbol("kResistStopPropagation"),{finished:f}=requireEndOfStream(),m=requireCompose(),{addAbortSignalNoValidate:d}=requireAddAbortSignal(),{isWritable:T,isNodeStream:_}=requireUtils(),{deprecate:x}=requireUtil(),{ArrayPrototypePush:v,Boolean:A,MathFloor:B,Number:O,NumberIsNaN:L,Promise:U,PromiseReject:R,PromiseResolve:M,PromisePrototypeThen:ne,Symbol:W}=requirePrimordials(),G=W("kEmpty"),re=W("kEof");function Y(X,K){if(K!=null&&l(K,"options"),(K==null?void 0:K.signal)!=null&&o(K.signal,"options.signal"),_(X)&&!T(X))throw new t("stream",X,"must be writable");const ie=m(this,X);return K!=null&&K.signal&&d(K.signal,ie),ie}function ce(X,K){if(typeof X!="function")throw new n("fn",["Function","AsyncFunction"],X);K!=null&&l(K,"options"),(K==null?void 0:K.signal)!=null&&o(K.signal,"options.signal");let ie=1;(K==null?void 0:K.concurrency)!=null&&(ie=B(K.concurrency));let fe=ie-1;return(K==null?void 0:K.highWaterMark)!=null&&(fe=B(K.highWaterMark)),a(ie,"options.concurrency",1),a(fe,"options.highWaterMark",0),fe+=ie,(async function*(){const I=requireUtil().AbortSignalAny([K==null?void 0:K.signal].filter(A)),C=this,$=[],S={signal:I};let g,b,E=!1,P=0;function q(){E=!0,z()}function z(){P-=1,J()}function J(){b&&!E&&P<ie&&$.length<fe&&(b(),b=null)}async function le(){try{for await(let ue of C){if(E)return;if(I.aborted)throw new s;try{if(ue=X(ue,S),ue===G)continue;ue=M(ue)}catch(Te){ue=R(Te)}P+=1,ne(ue,z,q),$.push(ue),g&&(g(),g=null),!E&&($.length>=fe||P>=ie)&&await new U(Te=>{b=Te})}$.push(re)}catch(ue){const Te=R(ue);ne(Te,z,q),$.push(Te)}finally{E=!0,g&&(g(),g=null)}}le();try{for(;;){for(;$.length>0;){const ue=await $[0];if(ue===re)return;if(I.aborted)throw new s;ue!==G&&(yield ue),$.shift(),J()}await new U(ue=>{g=ue})}}finally{E=!0,b&&(b(),b=null)}}).call(this)}function me(X=void 0){return X!=null&&l(X,"options"),(X==null?void 0:X.signal)!=null&&o(X.signal,"options.signal"),(async function*(){let ie=0;for await(const F of this){var fe;if(X!=null&&(fe=X.signal)!==null&&fe!==void 0&&fe.aborted)throw new s({cause:X.signal.reason});yield[ie++,F]}}).call(this)}async function de(X,K=void 0){for await(const ie of H.call(this,X,K))return!0;return!1}async function ge(X,K=void 0){if(typeof X!="function")throw new n("fn",["Function","AsyncFunction"],X);return!await de.call(this,async(...ie)=>!await X(...ie),K)}async function te(X,K){for await(const ie of H.call(this,X,K))return ie}async function ye(X,K){if(typeof X!="function")throw new n("fn",["Function","AsyncFunction"],X);async function ie(fe,F){return await X(fe,F),G}for await(const fe of ce.call(this,ie,K));}function H(X,K){if(typeof X!="function")throw new n("fn",["Function","AsyncFunction"],X);async function ie(fe,F){return await X(fe,F)?fe:G}return ce.call(this,ie,K)}class ee extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function oe(X,K,ie){var fe;if(typeof X!="function")throw new n("reducer",["Function","AsyncFunction"],X);ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&o(ie.signal,"options.signal");let F=arguments.length>1;if(ie!=null&&(fe=ie.signal)!==null&&fe!==void 0&&fe.aborted){const g=new s(void 0,{cause:ie.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(g)),g}const I=new e,C=I.signal;if(ie!=null&&ie.signal){const g={once:!0,[u]:this,[c]:!0};ie.signal.addEventListener("abort",()=>I.abort(),g)}let $=!1;try{for await(const g of this){var S;if($=!0,ie!=null&&(S=ie.signal)!==null&&S!==void 0&&S.aborted)throw new s;F?K=await X(K,g,{signal:C}):(K=g,F=!0)}if(!$&&!F)throw new ee}finally{I.abort()}return K}async function ae(X){X!=null&&l(X,"options"),(X==null?void 0:X.signal)!=null&&o(X.signal,"options.signal");const K=[];for await(const fe of this){var ie;if(X!=null&&(ie=X.signal)!==null&&ie!==void 0&&ie.aborted)throw new s(void 0,{cause:X.signal.reason});v(K,fe)}return K}function be(X,K){const ie=ce.call(this,X,K);return(async function*(){for await(const F of ie)yield*F}).call(this)}function we(X){if(X=O(X),L(X))return 0;if(X<0)throw new i("number",">= 0",X);return X}function Ee(X,K=void 0){return K!=null&&l(K,"options"),(K==null?void 0:K.signal)!=null&&o(K.signal,"options.signal"),X=we(X),(async function*(){var fe;if(K!=null&&(fe=K.signal)!==null&&fe!==void 0&&fe.aborted)throw new s;for await(const I of this){var F;if(K!=null&&(F=K.signal)!==null&&F!==void 0&&F.aborted)throw new s;X--<=0&&(yield I)}}).call(this)}function Q(X,K=void 0){return K!=null&&l(K,"options"),(K==null?void 0:K.signal)!=null&&o(K.signal,"options.signal"),X=we(X),(async function*(){var fe;if(K!=null&&(fe=K.signal)!==null&&fe!==void 0&&fe.aborted)throw new s;for await(const I of this){var F;if(K!=null&&(F=K.signal)!==null&&F!==void 0&&F.aborted)throw new s;if(X-- >0&&(yield I),X<=0)return}}).call(this)}return operators.streamReturningOperators={asIndexedPairs:x(me,"readable.asIndexedPairs will be removed in a future version."),drop:Ee,filter:H,flatMap:be,map:ce,take:Q,compose:Y},operators.promiseReturningOperators={every:ge,forEach:ye,reduce:oe,toArray:ae,some:de,find:te},operators}var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:e,Promise:t}=requirePrimordials(),{isIterable:n,isNodeStream:r,isWebStream:i}=requireUtils(),{pipelineImpl:s}=requirePipeline(),{finished:o}=requireEndOfStream();requireStream();function a(...l){return new t((u,c)=>{let f,m;const d=l[l.length-1];if(d&&typeof d=="object"&&!r(d)&&!n(d)&&!i(d)){const T=e(l);f=T.signal,m=T.end}s(l,(T,_)=>{T?c(T):u(_)},{signal:f,end:m})})}return promises={finished:o,pipeline:a},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:e}=requireBuffer$1(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=requirePrimordials(),{promisify:{custom:i}}=requireUtil(),{streamReturningOperators:s,promiseReturningOperators:o}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=requireErrors(),l=requireCompose(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:c}=requireState(),{pipeline:f}=requirePipeline(),{destroyer:m}=requireDestroy(),d=requireEndOfStream(),T=requirePromises(),_=requireUtils(),x=stream.exports=requireLegacy().Stream;x.isDestroyed=_.isDestroyed,x.isDisturbed=_.isDisturbed,x.isErrored=_.isErrored,x.isReadable=_.isReadable,x.isWritable=_.isWritable,x.Readable=requireReadable();for(const B of n(s)){let L=function(...U){if(new.target)throw a();return x.Readable.from(r(O,this,U))};var A=L;const O=s[B];t(L,"name",{__proto__:null,value:O.name}),t(L,"length",{__proto__:null,value:O.length}),t(x.Readable.prototype,B,{__proto__:null,value:L,enumerable:!1,configurable:!0,writable:!0})}for(const B of n(o)){let L=function(...R){if(new.target)throw a();return r(O,this,R)};var A=L;const O=o[B];t(L,"name",{__proto__:null,value:O.name}),t(L,"length",{__proto__:null,value:O.length}),t(x.Readable.prototype,B,{__proto__:null,value:L,enumerable:!1,configurable:!0,writable:!0})}x.Writable=requireWritable(),x.Duplex=requireDuplex(),x.Transform=requireTransform(),x.PassThrough=requirePassthrough(),x.pipeline=f;const{addAbortSignal:v}=requireAddAbortSignal();return x.addAbortSignal=v,x.finished=d,x.destroy=m,x.compose=l,x.setDefaultHighWaterMark=u,x.getDefaultHighWaterMark=c,t(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return T}}),t(f,i,{__proto__:null,enumerable:!0,get(){return T.pipeline}}),t(d,i,{__proto__:null,enumerable:!0,get(){return T.finished}}),x.Stream=x,x._isUint8Array=function(O){return O instanceof Uint8Array},x._uint8ArrayToBuffer=function(O){return e.from(O.buffer,O.byteOffset,O.byteLength)},stream.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(e){const t=requireStream(),n=requirePromises(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(browser$2)),browser$2.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const e=requireBrowser();class t extends e.Readable{constructor(r){super(),this.bytesRead=0,this.released=!1,this.reader=r.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(r=>{delete this.pendingRead,r.done||this.released?this.push(null):(this.bytesRead+=r.value.length,this.push(r.value))}).catch(r=>{this.destroy(r)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return lib.ReadableWebToNodeStream=t,lib}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchFromUrl=e.parseBlob=e.parseReadableStream=e.parseNodeStream=e.selectCover=e.ratingToStars=e.orderTags=e.parseFromTokenizer=e.parseBuffer=void 0;const t=requireBrowser$3(),n=requireCore(),r=requireLib$1(),i=t("music-metadata-browser:main");var s=requireCore();Object.defineProperty(e,"parseBuffer",{enumerable:!0,get:function(){return s.parseBuffer}}),Object.defineProperty(e,"parseFromTokenizer",{enumerable:!0,get:function(){return s.parseFromTokenizer}}),Object.defineProperty(e,"orderTags",{enumerable:!0,get:function(){return s.orderTags}}),Object.defineProperty(e,"ratingToStars",{enumerable:!0,get:function(){return s.ratingToStars}}),Object.defineProperty(e,"selectCover",{enumerable:!0,get:function(){return s.selectCover}}),e.parseNodeStream=n.parseStream;async function o(c,f,m){const d=new r.ReadableWebToNodeStream(c),T=await(0,e.parseNodeStream)(d,typeof f=="string"?{mimeType:f}:f,m);return await d.close(),T}e.parseReadableStream=o;async function a(c,f){c.type,c.size,c instanceof File&&c.name;const m=c.stream?c.stream():l(c);return o(m,{mimeType:c.type,size:c.size},f)}e.parseBlob=a;function l(c){const f=new FileReader;return new ReadableStream({start(m){f.onloadend=d=>{let T=d.target.result;T instanceof ArrayBuffer&&(T=new Uint8Array(T)),m.enqueue(T),m.close()},f.onerror=d=>{m.close()},f.onabort=d=>{m.close()},f.readAsArrayBuffer(c)}})}async function u(c,f){const m=await fetch(c),d={size:parseInt(m.headers.get("Content-Length"),10),mimeType:m.headers.get("Content-Type")};if(m.ok)if(m.body){const T=await o(m.body,d,f);return i("Closing HTTP-readable-stream..."),m.body.locked||await m.body.cancel(),i("HTTP-readable-stream closed."),T}else return a(await m.blob(),f);else throw new Error(`HTTP error status=${m.status}: ${m.statusText}`)}e.fetchFromUrl=u}(lib$3)),lib$3}var libExports=requireLib();const _hoisted_1={id:"container"},_hoisted_2={id:"audio-container"},_sfc_main={__name:"AudioVisualizer",props:{userId:{type:Number,required:!0}},setup(e){const t=e,n=ref(null),r=ref(null),i=ref(null),s=async u=>{try{const c=await libExports.parseBlob(u);if(c.format.duration)duration=Math.floor(c.format.duration);else{const f=URL.createObjectURL(u);duration=await o(f),URL.revokeObjectURL(f)}return{title:c.common.title||u.name.replace(/\.[^/.]+$/,""),artist:c.common.artist||"Unknown Artist",duration:duration||0,filePath:URL.createObjectURL(u),userId:t.userId}}catch(c){console.warn("Error extracting metadata:",c);const f=await o(URL.createObjectURL(u));return{title:u.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",duration:f,filePath:URL.createObjectURL(u),userId:t.userId}}},o=u=>new Promise(c=>{const f=new Audio;f.src=u,f.onloadedmetadata=()=>{c(Math.floor(f.duration)),URL.revokeObjectURL(u)},f.onerror=()=>c(0)}),a=async u=>{const c=u.target.files[0];if(c)try{const f=await s(c);n.value.src=f.filePath;const d=await(await fetch("/api/tracks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();d.success?i.value.fetchTracks():console.error("Failed to save track:",d.error)}catch(f){console.error("Error processing file:",f)}},l=u=>{n.value.src=u.filePath,n.value.play()};return onMounted(()=>{initializeAudioVisualizer()}),(u,c)=>(openBlock(),createElementBlock("div",_hoisted_1,[c[0]||(c[0]=createBaseVNode("canvas",{id:"canvas-audio"},null,-1)),createBaseVNode("div",_hoisted_2,[createBaseVNode("input",{type:"file",id:"file-upload",ref_key:"fileInput",ref:r,accept:"audio/*",onChange:a},null,544),createBaseVNode("audio",{id:"audio-player",ref_key:"audioElement",ref:n,"aria-label":"Audio player",controls:""},null,512)]),createVNode(TrackList,{ref_key:"trackList",ref:i,userId:e.userId,onTrackSelected:l},null,8,["userId"])]))}},AudioVisualizer=_export_sfc(_sfc_main,[["__scopeId","data-v-6901c467"]]),router=createRouter({history:createWebHistory(),routes:[{path:"/",name:"Login",component:_sfc_main$3},{path:"/register",name:"Register",component:_sfc_main$2},{path:"/visualizer",name:"AudioVisualizer",component:AudioVisualizer,meta:{requiresAuth:!0},props:e=>({userId:parseInt(localStorage.getItem("userId"))})}]});router.beforeEach((e,t,n)=>{const r=localStorage.getItem("isAuthenticated");e.meta.requiresAuth&&!r?n("/"):n()});const app=createApp(App);app.use(router);app.mount("#app");
